(function(){/*
 http://pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/messages.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/device.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/rom.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/ram.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/computer.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/panel.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/bus.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/memory.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/cpu.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/cpustate.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/cpuops.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/serial.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/debugger.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp10/lib/macro10.js (C) Jeff Parsons 2012-2017
*/
var m,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function ca(){ca=function(){};ba.Symbol||(ba.Symbol=da)}var ea=0;function da(a){return"jscomp_symbol_"+(a||"")+ea++}
function fa(){ca();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(this)}});fa=function(){}}function ha(a){var b=0;return ia(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ia(a){fa();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}
function la(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function ma(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}
ma("Math.trunc",function(a){return a?a:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||!a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b}});ma("Math.log2",function(a){return a?a:function(a){return Math.log(a)/Math.LN2}});
var na={vc:0,Nb:1,xc:2,yc:3,zc:4,Ac:5,Bc:6,Cc:7,xb:8,Dc:9,Ob:10,Ec:11,Fc:12,Pb:13,Gc:14,Hc:15,Ic:16,Jc:17,Kc:18,Lc:19,Mc:20,Nc:21,Oc:22,Pc:23,Qc:24,Rc:25,Sc:26," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,wb:65,uc:66,wc:67,Tc:68,E:69,Uc:70,Vc:71,Wc:72,Xc:73,Yc:74,Zc:75,$c:76,ad:77,bd:78,dd:79,ed:80,Q:81,fd:82,gd:83,hd:84,jd:85,kd:86,ld:87,
nd:88,od:89,Sb:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,pd:97,qd:98,rd:99,d:100,e:101,sd:102,td:103,ud:104,vd:105,xd:106,k:107,yd:108,zd:109,n:110,Ad:111,p:112,q:113,r:114,Bd:115,t:116,Dd:117,Ed:118,Fd:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,Qb:127};
function oa(a,b){var c;if(a){b||(b=10);var d,e,f=0<a.indexOf(",");f&&(a=a.replace(/,/g,""));d=e=a.charAt(0);"#"==e?(b=8,e=""):"$"==e&&(b=16,e="");d!=e?a=a.substr(1):(d=e=a.substr(0,2),"0b"==e&&f||"^B"==e?(b=2,e=""):"0o"==e||"^O"==e?(b=8,e=""):"^D"==e?(b=10,e=""):"0x"==e&&(b=16,e=""),d!=e&&(a=a.substr(2)));d=e=a.slice(-1);"Y"==e||"y"==e?(b=2,e=""):"."==e?(b=10,e=""):"H"==e||"h"==e?(b=16,e=""):"K"==e?e="000":"M"==e?e="000000":"G"==e&&(e="000000000");d!=e&&(a=a.slice(0,-1)+e);var g;d=0;10>=b&&(e=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=e[1],d=35-((e[2]||35)&255));e=a;((f=b)&&10!=f?16==f?e.match(/^-?[0-9a-f]+$/i):8==f?e.match(/^-?[0-7]+$/):2==f&&e.match(/^-?[01]+$/):e.match(/^-?[0-9]+$/))&&!isNaN(g=parseInt(a,b))&&(d&&(0>g&&(g+=Math.pow(2,36)),g=0<d?g*Math.pow(2,d):Math.trunc(g/Math.pow(2,-d))),c=g)}return c}
function pa(a,b,c,d,e){e=void 0===e?0:e;var f="";isNaN(a)?a=null:null!=a&&(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(b,c)),a>=Math.pow(b,c)&&(c=Math.ceil(Math.log(a)/Math.log(b))));for(var g=e||-1;0<c--;){g||(f=","+f,g=e);if(null==a)f="?"+f;else{var h=a%b,h=h+(0<=h&&9>=h?48:55),f=String.fromCharCode(h)+f;a=Math.trunc(a/b)}g--}return(void 0===d?"":d)+f}function qa(a,b,c){b?12<b&&(b=12):(b=Math.abs(a),b=262143>=b?6:16777215>=b?8:12);return pa(a,8,b,c?"0o":"")}
function xa(a,b){b?11<b&&(b=11):b=99999>=Math.abs(a)?5:11;return pa(a,10,b)}function n(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);return pa(a,16,b,c?"0x":"")}function ya(a){var b=a,c=a.lastIndexOf("/");0<=c&&(b=a.substr(c+1));c=b.indexOf("&");0<c&&(b=b.substr(0,c));return b}function za(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function Aa(a,b){return-1!==a.indexOf(b,a.length-b.length)}
function Ba(a){return a.replace(/[&<>"']/g,function(a){return Ca[a]})}function Da(a,b){return(a+"                                        ").slice(0,b)}function Ea(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}var Ca={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function Fa(a,b,c){var d=0,e=a.length,f=0;for(c||(c=function(a,b){return a>b?1:a<b?-1:0});d<e;){var g=d+e>>1,h;h=c(b,a[g]);0<h?d=g+1:(e=g,f=!h)}return f?d:~d}
function Ia(){var a,b="";a||(a=new Date);for(var c=a.getHours(),d=a.getDate(),e=a.getMonth()+1,f=0;11>f;f++){var g;switch(g="Y-m-d H:i:s".charAt(f)){case "a":b+=12>c?"am":"pm";break;case "d":b+=("0"+d).slice(-2);break;case "D":b+=Ja[a.getDay()].substr(0,3);break;case "F":b+=Ka[e-1];break;case "g":b+=c?12<c?c-12:c:12;break;case "h":b+=c;break;case "H":b+=("0"+c).slice(-2);break;case "i":b+=("0"+a.getMinutes()).slice(-2);break;case "j":b+=d;break;case "l":b+=Ja[a.getDay()];break;case "m":b+=("0"+e).slice(-2);
break;case "M":b+=Ka[e-1].substr(0,3);break;case "n":b+=e;break;case "s":b+=("0"+a.getSeconds()).slice(-2);break;case "y":b+=(""+a.getFullYear()).slice(-2);break;case "Y":b+=a.getFullYear();break;default:b+=g}}return b}var Ja="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ka="January February March April May June July August September October November December".split(" ");
function La(a,b,c,d){c=void 0===c?!1:c;var e=0,f=null,g=null;if("object"==typeof resources&&(f=resources[a]))return d&&d(a,f,e),[f,e];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),g;var h=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(h.onreadystatechange=function(){4===h.readyState&&(f=h.responseText,200==h.status||!h.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(e=h.status||-1),d&&d(a,
f,e))});if(b&&"object"==typeof b){var k="",l;for(l in b)b.hasOwnProperty(l)&&(k&&(k+="&"),k+=l+"="+encodeURIComponent(b[l]));k=k.replace(/%20/g,"+");h.open("POST",a,c);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(k)}else h.open("GET",a,c),"bytes"==b&&h.overrideMimeType("text/plain; charset=x-user-defined"),h.send();c||(f=h.responseText,200!=h.status&&(e=h.status||-1),d&&d(a,f,e),g=[f,e]);return g}
function Ma(a,b){var c,d={ea:null,aa:null,la:null,ya:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f,g;if("<"==b.substr(0,1))throw Error(b);g=0>b.indexOf("0x")&&0>b.indexOf("0o")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.la=g.load;d.ya=g.exec;if(e=g.bytes)d.ea=e;else if(e=g.words)for(d.ea=Array(2*e.length),f=c=0;c<e.length;c++)d.ea[f++]=e[c]&255,d.ea[f++]=e[c]>>8&255;else if(e=g.longs)for(d.ea=Array(4*e.length),f=c=0;c<e.length;c++)d.ea[f++]=
e[c]&255,d.ea[f++]=e[c]>>8&255,d.ea[f++]=e[c]>>16&255,d.ea[f++]=e[c]>>24&255;else(e=g.data)?d.Oa=e:d.ea=g;d.ea&&(d.ea.length?1==d.ea.length&&(q(d.ea[0]),d=null):(q("Empty resource: "+a),d=null));d.aa=g.symbols}catch(h){q("Resource data error ("+a+"): "+h.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){q("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.ea=e)}return d}
function Na(){return"http://"+(window?window.location.host:"www.pcjs.org")}function Oa(){if(null==Ta){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}Ta=a}return Ta}function Ua(a){var b;if(window)try{b=window.localStorage.getItem(a)}catch(c){}return b}
function Va(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Wa(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}
function Xa(a){if(!Ya){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}Ya=c}return Ya[a]||Ya[a.toLowerCase()]}function Za(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function $a(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function ab(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function bb(a){cb.init.push(a)}
function db(a){if(eb)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){q(""+("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks."))}}function fb(a){!eb&&a?(eb=!0,gb&&hb("init"),ib&&hb("show")):eb=a}function hb(a){cb[a]&&db(cb[a])}var Ya=null,cb={init:[],show:[],exit:[]},gb=!1,ib=!1,eb=!0,Ta=null;ab("onload",function(){gb=!0;db(cb.init)});ab("onpageshow",function(){ib=!0;db(cb.show)});
ab(Wa("iOS")?"onpagehide":Wa("Opera")?"onunload":"onbeforeunload",function(){db(cb.exit)});function r(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Cb=b.comment;this.Vb=b;this.exports={};this.J=this.bindings={};a=this.id.indexOf(".");0>a?this.Db=this.id:(this.$a=this.id.substr(0,a),this.Db=this.id.substr(a+1));this.A={ready:!1,Ua:!1,ob:!1,wd:!1,ba:!1,ub:!1,error:!1};this.cb=null;this.A.error=!1;this.da=c||0;this.D=this.v=this.H=this.G=null;jb.push(this)}
function pb(a,b,c){qb[a]&&b&&(qb[a][b]=c)}function rb(){return Date.now()||+new Date}function q(a){window&&window.alert(a)}function sb(a){var b=!1;window&&(b=window.confirm(a));return b}function tb(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function ub(a,b){var c=t;b=v(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var h=g.getAttribute("class");if(h)for(var k=h.split(" "),l=0;l<k.length;l++)switch(h=k[l],h){case c+"-binding":(h=w(g))&&h.binding&&a.sa(h.type,h.binding,g,h.value),l=k.length}}}}function vb(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<jb.length;b++){var d=jb[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function wb(a){if(void 0!==a){var b;for(b=0;b<jb.length;b++)if(jb[b].id===a)return jb[b]}return null}function xb(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<jb.length;d++)if(c)c==jb[d]&&(c=null);else if(!(a!=jb[d].type||b&&jb[d].id.indexOf(b)))return jb[d]}return null}function w(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){q(c.message+" ("+a+")")}return b}
function v(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function yb(a){for(var b=!0,c=zb[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0],f=null;0<=Ab.indexOf(e)&&(f=function(){return function(){yb(a)}}());var g=Bb[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{var b=!1,h=xb(d[1],a);if(h)if(g=Cb[e])b=g(h,d[2],d[3]);else{var k=h.exports;if(k&&(g=k[e]))if(b=!0,!f)b=g.call(h,d[2],d[3]);else if(!g.call(h,f,d[2],d[3]))break}}if(!b){q("Script error: '"+e+(g?" failed":" unrecognized"));break}}c&&!c.length&&delete zb[a];return b}m=r.prototype;
m.toString=function(){return this.name?this.name:this.id||this.type};
m.sa=function(a,b,c){switch(b){case "clear":return this.J[b]||(this.J[b]=c,c.onclick=function(a){return function(){a.J.print&&(a.J.print.value="")}}(this)),!0;case "print":return this.J[b]||(this.J[b]=c,this.ja=function(a){this.u(a,this.type);return!0},c.value="",this.print=function(a){return function(b){tb(a,b)}}(c),this.u=function(a,b){return function(a,c){a||(a="");if(c!=Db.Rb||"..."!=a.slice(-3))c&&(a=c+": "+a),tb(b,a+"\n");else{c=b.value;var d=c.lastIndexOf(a);0>d?c+=a+"\n":c=c.substr(0,d)+(a+
".")+c.substr(d+a.length);8192<c.length&&(c=c.substr(c.length-4096));b.value=c;b.scrollTop=b.scrollHeight}}}(this,c)),!0;default:return!1}};m.log=function(){};m.print=function(){};m.u=function(){};m.status=function(a){this.u(this.type+": "+a)};m.ja=function(a,b,c){if(!b){var d=xb("Computer",this.id);if(d&&d.A.ub)return console.log("ignoring notice during unload: "+a),!1}c=c||this.type;b||q((c?c+": ":"")+a);return!0};function Eb(a,b){a.A.error=!0;a.ja(b)}
function Fb(a){return a.A.error?(a.u(a.toString()+" error"),!0):!1}function Qb(a,b){b&&(a.A.ready?b():a.cb=b);return a.A.ready}function Rb(a){if(!a.A.error&&(a.A.ready=!0,a.A.ready)){var b=a.cb;a.cb=null;b&&b()}}function Sb(a,b){a.A.Ua&&(b?a.A.ob=!0:void 0===b&&a.u(a.toString()+" busy"));return a.A.Ua}function Tb(a,b){if(a.A.ob)return a.A.Ua=!1,a.A.ob=!1;if(a.A.error)return a.u(a.toString()+" error"),!1;a.A.Ua=b;return a.A.Ua}m.Aa=function(){return this.A.ba=!0};
m.ra=function(a,b){b&&(this.A.ba=!1);return!0};function Ub(a,b){if(a.D){a===a.D?b|=0:b=b||a.da;var c=a.D.da&b;return!!b&&c===b||!!(c&a.D.Eb)}return!1}function Vb(a,b,c,d){a.D&&(!0===c||Ub(a,c|0))&&a.D.message(b,d)}var Db={ERROR:"error",cd:"notice",Rb:"progress",SCRIPT:"script",md:"warning"};window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var qb=window?window.PCjs.Machines:{},jb=window?window.PCjs.Components:[],zb=window?window.PCjs.Commands:{},Ab=["hold","sleep","wait"],Bb={alert:function(a){q(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},Cb={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var t="pdp10",Wb="PDPjs",Xb=Math.pow(2,18)-1,Yb=Math.pow(2,18),Zb=Math.pow(2,17)-1,$b=Math.pow(2,17),x=Math.pow(2,18)-1,y=Math.pow(2,18),A=Math.pow(2,35)-1,C=Math.pow(2,35),D=Math.pow(2,36)-1,E=Math.pow(2,36),F=Math.pow(2,32),ac=Math.pow(2,34),bc=Math.pow(2,36),cc=Math.pow(2,21),dc=Math.pow(2,26),ec=Math.pow(2,23),fc=Math.pow(2,30),t="pdp10",Wb="PDPjs",gc={cpu:1,trap:2,fault:4,"int":8,bus:16,memory:32,mmu:64,rom:128,device:256,panel:512,keyboard:1024,key:2048,paper:4096,read:16384,write:32768,serial:1048576,
timer:2097152,speaker:16777216,computer:33554432,log:268435456,warn:536870912,buffer:1073741824,halt:-2147483648};
function hc(a,b){r.call(this,"Panel",a,512);this.K=this.L=0;this.V=b;this.i=this.I=this.j=this.w=0;this.M=this.N=-1;this.O=this.R=this.F=!1;this.S=ic;this.C={};this.b={START:[1,1,!0,!1,this.fc],STEP:[1,1,!1,!1,this.gc],ENABLE:[1,1,!1,!1,this.ac],CONT:[1,1,!0,!1,this.Zb],DEP:[0,0,!0,!1,this.$b],EXAM:[1,1,!0,!1,this.bc],LOAD:[1,1,!0,!1,this.dc],TEST:[0,0,!0,!1,this.cc]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.ec,a];this.D=this.v=this.H=this.G=null;this.exports={hold:this.Wb,toggle:this.pc,reset:this.lc,
set:this.oc};Rb(this)}la(hc,r);m=hc.prototype;m.reset=function(a){this.stop();a&&jc(this,this.w=0)};
m.sa=function(a,b,c,d){if(this.G&&this.G.sa(a,b,c,d)||this.v&&this.v.sa(a,b,c,d)||this.D&&this.D.sa(a,b,c,d))return!0;switch(b){case "PC":return this.J[b]=c,this.L++,!0;default:return"led"==a||"rled"==a?(this.J[b]=c,this.C[b]=d?1:0,this.L++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.J[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,b){return function(){kc(a,b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){lc(a,b)}}(this,b),a.ontouchstart=
function(a,b){return function(c){kc(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){lc(a,b)}}(this,b),!0):r.prototype.sa.call(this,a,b,c,d)}};m.La=function(a,b,c,d){this.G=a;this.H=b;this.v=c;this.D=d;mc(this);nc(this)};m.Aa=function(a,b){if(!b)if(this.V&&oc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};m.ra=function(a){return a?this.save():!0};m.save=function(){var a=new G(this);a.set(0,[this.i,this.w,this.j]);return a.data()};
m.restore=function(a){if(a=a[0])pc(this,this.i=a[0]),jc(this,this.w=a[1]),qc(this,a[2]);return!0};m.lc=function(){for(var a in this.b){var b=this.b[a];b[1]=b[0]}nc(this);return!0};function rc(a,b,c){if(a=a.J[b])a.style.backgroundColor=c?"#ff0000":"#000000"}function mc(a,b){for(var c in a.C)rc(a,c,null!=b?b:a.C[c])}function sc(a,b,c){if(a=a.J[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function nc(a){for(var b in a.b)sc(a,b,a.b[b][1])}
m.Wb=function(a,b,c){if(kc(this,b)){if(c){var d=this;setTimeout(function(){lc(d,b);a&&a()},+c);return!1}lc(this,b)}return!0};m.oc=function(a,b){if("SR"==a)return qc(this,oa(b,8));var c=this.b[a];return c?(c[1]=+b?1:0,sc(this,a,c[1]),!0):!1};m.pc=function(a){return kc(this,a)?(lc(this,a),!0):!1};function kc(a,b){var c=a.b[b];return c?(sc(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b!=tc&&(a.O=b==uc,a.R=b==vc),!0):!1}
function lc(a,b){var c=a.b[b];c&&(c[2]&&c[3]&&(sc(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}m.fc=function(a){a||this.v.A.P||(H(this.v,this.i),this.b[wc]&&this.b[wc][1]&&xc(this.v))};m.gc=function(){};m.ac=function(a){a||this.v.Y()};
m.Zb=function(a){if(!a&&!this.v.A.P)if(this.b[wc]&&this.b[wc][1])xc(this.v);else{if((a=this.D)&&!Sb(a,!0))Tb(a,!0),yc(a,0,null),Tb(a,!1);else try{var b=this.v.Ya(1);0<b&&(zc(this.v,b),Ac(this.v,b,!0),Bc(this.v,b))}catch(c){"number"!=typeof c&&Eb(this.v,c.stack||c.message)}this.stop();this.G&&K(this.G)}};m.$b=function(a){a&&!this.v.A.P&&(this.O&&Cc(this),a=jc(this,this.w=this.j),this.S==ic?Dc(this.H,this.i,a):this.v.g(this.i,a))};
m.bc=function(a){if(!a&&!this.v.A.P){var b;this.R&&Cc(this);this.S==ic?b=Ec(this.H,this.i):b=this.v.f(this.i);jc(this,this.w=b)}};m.dc=function(a){a||this.v.A.P||pc(this,this.j)};m.cc=function(a){a?(this.F=!0,mc(this,!0)):(this.F=!1,mc(this),qc(this,0))};m.ec=function(a,b){this.j=a?this.j|1<<b:this.j&~(1<<b)};function Cc(a){var b=1,c=a.H.j;a.b[tc]&&a.b[tc][1]||(b=-b);pc(a,a.i&~c|a.i+b&c)}
function pc(a,b){a.i=b&a.H.j;if(a.M!==a.i){a.M=a.i;b=a.M;for(var c=0;22>c;c++){var d=a,e="A"+c,f=b&1<<c;d.C[e]=f;d.F||rc(d,e,f)}}}function jc(a,b){a.I=b%E;if(a.N!==a.I){a.N=a.I;b=a.N;for(var c=0;16>c;c++){var d=a,e="D"+c,f=b&1<<c;d.C[e]=f;d.F||rc(d,e,f)}}return a.I}function qc(a,b){a.j=b|0;for(b=0;22>b;b++)a.b["S"+b][1]=a.j&1<<b?1:0;nc(a);return!0}m.stop=function(){pc(this,this.v.i)};
function oc(){for(var a=v(document,t,"panel"),b=0;b<a.length;b++){var c=a[b],d=w(c),e=wb(d.id);e||(e=new hc(d,!0));ub(e,c)}}var ic=7,uc="DEP",wc="ENABLE",vc="EXAM",tc="STEP";bb(oc);function Fc(a,b,c){r.call(this,"Bus",a,16);this.v=b;this.D=c;this.F=+a.busWidth||18;this.I=1<<this.F;this.j=this.I-1;this.i=Math.log2(16384);this.C=this.I/16384|0;this.w=0;this.b=[];a=new Gc(this);Hc(a,this.D);this.b=Array(this.C);for(b=0;b<this.C;b++)this.b[b]=a;Rb(this)}la(Fc,r);m=Fc.prototype;m.reset=function(){};
m.Aa=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};m.ra=function(a){return a?this.save():!0};m.save=function(){var a=new G(this);a.set(0,Ic(this));return a.data()};m.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&4096>d.length){for(var e=0,f=Array(4096),g=0;g<d.length-1;)for(var h=d[g++],k=d[g++];h--;)f[e++]=k;d=f}e=this.b[c];if(!e||!e.restore(d)){q("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function Jc(a,b,c,d){for(var e=b,f=c,g=e>>>a.i;0<f&&g<a.b.length;){var h=a.b[g],k=16384*g,l=16384-(e-k);l>f&&(l=f);if(h&&h.size){if(h.type==d){if(e+f<=h.B)return h.Wa+=h.B-e,h.B=e,!0;if(e>=h.B+h.Wa){l=h.size-(e-k);l>f&&(l=f);h.Wa=e-h.B+l;e=k+16384;f-=l;g++;continue}}return Kc(Lc,e,f)}e=new Gc(a,e,l,16384,d);Hc(e,a.D,h);a.b[g++]=e;e=k+16384;f-=l}return 0>=f?(a.status("Added "+(c>>10)+"Kb "+Qc[d]+" at "+qa(b)),!0):Kc(Rc,b,c)}
function Ec(a,b){var c=a.b[(b&a.j)>>>a.i];a.w++;b=c.w(b&16383,b);a.w--;return b}function Dc(a,b,c){var d=a.b[(b&a.j)>>>a.i];a.w++;d.D(c,b&16383,b);a.w--}function Ic(a){for(var b=0,c=[],d=0;d<a.C;d++){var e=a.b[d];if(e.qb||e.Ub){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,h=0,k=[];g<e.length;){for(var l=e[g],p=g+1;p<e.length&&e[p]===l;)p++;k[h++]=p-g;k[h++]=l;g=p}k.length<e.length&&(e=k)}c[f]=e}}return c}
m.Jb=function(a){if(!this.w)throw this.D&&Ub(this.D,4)&&Vb(this.D,"memory fault on "+L(this.D,a),!0,!0),this.v.Y(),-1;};function Kc(a,b,c){q("Memory block error ("+a+": "+n(b)+","+n(c)+")");return!1}var Lc=1,Rc=2;function Sc(a){r.call(this,"Device",a,256)}la(Sc,r);m=Sc.prototype;m.La=function(a,b,c,d){this.H=b;this.G=a;this.v=c;this.D=d;Rb(this)};m.Aa=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};m.ra=function(a){return a?this.save():!0};m.reset=function(){};
m.save=function(){return(new G(this)).data()};m.restore=function(){return!0};bb(function(){for(var a=v(document,t,"device"),b=0;b<a.length;b++){var c,d=a[b];c=w(d);switch(c.type){case "default":c=new Sc(c),ub(c,d)}}});
function Gc(a,b,c,d,e){this.H=a;this.id=Tc+=2;this.B=b;this.Wa=c;this.size=d||0;this.type=e||Uc;this.G=e==Vc;this.b=null;this.f=this.w=this.tb;this.g=this.D=this.Xa;this.i=this.v=0;Hc(this);this.qb=this.Ub=!1;if(this.size){a=this.j=Array(this.size);for(b=0;b<a.length;b++)a[b]=0;Wc(this,Xc)}else Wc(this)}m=Gc.prototype;m.save=function(){return this.j};m.restore=function(a){return a&&this.size==a.length?(this.j=a,this.qb=!0):!1};function Wc(a,b){b||(b=Yc);Zc(a,b,void 0);$c(a,b,void 0)}
function Zc(a,b,c){c&&a.i||(a.f=b[0]||a.tb);if(c||void 0===c)a.w=b[0]||a.tb}function $c(a,b,c){c&&a.v||(a.g=!a.G&&b[1]||a.Xa);if(c||void 0===c)a.D=b[1]||a.Xa}m.Ra=function(a,b){b?this.v++||$c(this,ad,!1):this.i++||Zc(this,ad,!1)};function bd(a,b){b?--a.v||(a.g=a.G?a.Xa:a.D):--a.i||(a.f=a.w)}function Hc(a,b,c){a.b=b;a.i=a.v=0;c&&((a.i=c.i)&&Zc(a,ad,!1),(a.v=c.v)&&$c(a,ad,!1))}m.tb=function(a,b){this.b&&Ub(this.b,32)&&Vb(this.b,"attempt to read invalid address "+L(this.b,b),!0);this.H.Jb(b);return-1};
m.Xa=function(a,b,c){this.b&&Ub(this.b,32)&&Vb(this.b,"attempt to write "+L(this.b,a)+" to invalid addresses "+L(this.b,c),!0);this.H.Jb(c)};m.jc=function(a){return this.j[a]};m.sc=function(a,b){this.j[b]!=a&&(this.j[b]=a,this.qb=!0)};m.hc=function(a,b){if(this.b&&null!=this.B){var c=this.b;cd(c,this.B+a,2,c.N)&&c.Y(!1)}return this.w(a,b)};m.rc=function(a,b,c){if(this.b&&null!=this.B){var d=this.b;cd(d,this.B+b,2,d.K)&&d.Y(!1)}this.G?this.Xa(a,0,c):this.D(a,b,c)};
var Uc=0,Vc=2,Qc=["NONE","RAM","ROM"],Tc=0,Yc=[],Xc=[Gc.prototype.jc,Gc.prototype.sc],ad=[Gc.prototype.hc,Gc.prototype.rc];
function dd(a,b){r.call(this,"CPU",a,1);b=+a.cycles||b;var c=+a.multiplier||1;this.hb=0;this.lb=b;this.ha=c;this.ib=Math.round(this.lb/1E4)/100;this.ca=this.ib*this.ha;this.kb=this.Ia=this.ma=this.ab=0;this.A.P=this.A.gb=!1;this.A.ga=a.autoStart;"string"==typeof this.A.ga&&(this.A.ga="true"==this.A.ga);this.A.Ta=!1;this.Ga=this.ta=0;this.Ha=+a.csStart;this.pa=+a.csInterval;this.ua=+a.csStop;this.R=[];this.Fb=this.mc.bind(this);this.W=this.M=this.V=this.N=this.L=this.Fa=this.S=this.va=this.mb=this.Z=
0;this.Na=null;Rb(this)}la(dd,r);m=dd.prototype;m.La=function(a,b,c,d){this.G=a;this.H=b;this.D=d;this.Na=a.j;for(a=0;a<ed.length;a++)(b=this.J[ed[a]])&&this.G.sa(null,ed[a],b);Rb(this)};m.reset=function(){};m.save=function(){return null};m.restore=function(){return!1};
m.Aa=function(a,b){var c=fd(this.G,"autoStart");null!=c?this.A.ga="true"==c?!0:"false"==c?!1:!!c:null==this.A.ga&&(this.A.ga=!this.D&&void 0===this.J.run);if(!b){if(a){gd(this);if(!this.restore(a))return!1;hd(this)}else this.reset();this.D?(a=this.D,b=this.A.ga,a.Ia=!0,a.u("Type ? for help with PDPjs Debugger commands"),id(a),b||jd(a),a.ua&&(b=a.ua,a.ua=null,kd(a,b,!0))):this.status("No debugger detected");this.A.ga||this.u("CPU will not be auto-started "+(this.Na?"(click Run to start)":"(type 'go' to start)"))}return!0};
m.ra=function(a){return a?this.save():!0};m.ga=function(){return this.A.P?!0:this.A.ga?(xc(this),!0):!1};m.Kb=function(){return 0};function hd(a){void 0===a.Ha&&(a.Ha=0);void 0===a.pa&&(a.pa=-1);void 0===a.ua&&(a.ua=-1);a.A.Ta=0<=a.Ha&&0<a.pa;a.A.Ta&&(a.Ga=0,a.ta=a.Ha-a.W)}function Bc(a,b){if(a.A.Ta){var c=!1;a.Ga=a.Ga+a.Kb()|0;a.ta-=b;0>=a.ta&&(a.ta+=a.pa,c=!0);0<=a.ua&&a.ua<=ld(a)&&(a.pa=a.ua=-1,hd(a),a.Y(),c=!0);c&&a.u(ld(a)+" cycles: checksum="+n(a.Ga))}}
m.sa=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.J[b]=c,!0;case "run":return this.J[b]=c,c.onclick=function(){var a;if(a=d.G)if(a=d.G,a.A.ba)a=!0;else{var b=null,c,h=vb(a.id);for(c=0;c<h.length&&(b=h[c],b===a||b.A.ready);c++);if(c==h.length)for(c=0;c<h.length&&(b=h[c],b===a||b.A.ba);c++);c==h.length&&(b=a);q("The "+b.type+" component ("+b.id+") is not "+(b.A.ready?"powered yet":"ready yet"+(b.cb?" (waiting for notification)":""))+".");a=!1}a&&(d.A.P?d.Y():xc(d))},!0;
case "speed":return this.J[b]=c,!0;case "setSpeed":return this.J[b]=c,c.onclick=function(){md(d,d.ha<<1,!0)},c.textContent=this.ca.toFixed(2)+"Mhz",!0}return!1};function Ac(a,b,c){a.W+=b;c&&(a.V=a.N=0)}function nd(a,b){var c=1;b&&1<a.ha&&a.Z&&(c=a.Z/a.ib);a.kb=Math.round(1E3/od);a.Ia=Math.floor(a.lb/od*c);b||(a.ma=a.Ia);a.ab=0}function ld(a){return a.W+a.M+a.V-a.N}function gd(a){a.Z=0;a.mb=0;a.W=a.M=a.V=a.N=0;hd(a);md(a,1)}
function md(a,b,c){var d=!1;if(void 0!==b){.8>a.Z/a.ca?b=1:d=!0;a.ha=b;b=a.ib*a.ha;if(a.ca!=b){a.ca=b;b=a.ca.toFixed(2)+"Mhz";var e=a.J.setSpeed;e&&(e.textContent=b);a.u("target speed: "+b)}c&&a.G&&pd(a.G)}Ac(a,a.M);a.M=0;a.L=rb();a.S=0;nd(a);return d}function qd(a,b){for(var c=a.R.length-1;0<=c;c--){var d=a.R[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function rd(a){for(var b=[],c=0;c<a.R.length;c++)b.push(a.R[c][0]);return b}
function zc(a,b){for(var c=a.R.length-1;0<=c;c--){var d=a.R[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function sd(a,b){var c=a.V-=a.N;a.N=0;b&&(a.V=0);return c}
m.mc=function(){if(this.A.P){this.ab>=this.lb&&nd(this,!0);this.va=0;this.Fa=rb();if(this.S){var a=this.Fa-this.S;a>this.kb&&(this.L+=a,this.L>this.Fa&&(this.L=this.Fa))}try{do{var b=qd(this,this.A.Ta?1:this.Ia);try{this.Ya(b)}catch(e){if("number"!=typeof e)throw e;}b=sd(this,!0);this.va+=b;this.M+=b;Bc(this,b);zc(this,b);this.ma-=b;if(0>=this.ma){this.ma+=this.Ia;++this.mb>=td&&(this.G&&K(this.G,void 0),this.mb=0);break}}while(this.A.P)}catch(e){this.Y();this.G&&this.G.stop(rb(),ld(this));Eb(this,
e.stack||e.message);return}if(this.A.P){a=setTimeout;b=this.Fb;this.S=rb();var c=this.kb;this.va&&(c=Math.round(c*this.va/this.Ia));var c=c-(this.S-this.Fa),d=this.S-this.L;d&&(this.Z=Math.round(this.M/(10*d))/100,864E5<=d&&(this.W=0,md(this)));if(0>c||this.Z<this.ca)-1E3>c&&(this.L-=c),c=0;this.ab+=this.va;this.S+=c;a(b,c)}}};
function xc(a,b){if(!Fb(a))if(a.A.P)a.u(a.toString()+" busy");else{md(a);a.A.P=!0;a.A.gb=!0;var c=a.J.run;c&&(c.textContent="Halt");a.G&&(b&&pd(a.G,!0),a.G.start(a.L,ld(a)));a.D||a.status("Started");setTimeout(a.Fb,0)}}m.Ya=function(){return 0};m.Y=function(a){var b=!1;if(this.A.P){sd(this);Ac(this,this.M);this.M=0;this.A.P=!1;if(b=this.J.run)b.textContent="Run";this.G&&this.G.stop(rb(),ld(this));b=!0;this.D||this.status("Stopped")}this.A.complete=a;return b};var od=30,td=15,ed=["power","reset"];
function ud(a){var b=+a.model||1001;dd.call(this,a,1E6);this.jb=b;this.Za=+a.addrReset||0;this.Tb=vd.bind(this);this.w=M.bind(this);this.Ca=null;this.vb=[];this.A.complete=!1}la(ud,dd);m=ud.prototype;
m.reset=function(){this.status("Model "+this.jb);this.A.P&&this.Y();this.Ja=this.Ka=this.b=this.I=0;this.i=this.oa=this.Za;this.K=this.O=-1;this.F=this.j=0;this.nb=[0,0];this.wa=[0,0];this.na=[0,0];this.xa=[0,0];this.Ba=this.i;this.C=0;this.f=this.ic;this.g=this.tc;this.Ca=null;gd(this);this.A.error=!1;dd.prototype.reset.call(this)};m.Kb=function(){return 0};
m.save=function(){var a=new G(this);a.set(0,[this.b,this.I,this.Ja,this.Ka,this.i,this.O,this.K,this.j,this.C,this.oa,this.Ba,this.Za]);a.set(1,[]);a.set(2,[this.W,this.ha,this.A.ga]);a.set(3,wd(this));a.set(4,rd(this));return a.data()};
m.restore=function(a){var b;b=a[0];fa();ca();fa();var c=b[Symbol.iterator];b=c?c.call(b):ha(b);this.b=b.next().value;this.I=b.next().value;this.Ja=b.next().value;this.Ka=b.next().value;this.i=b.next().value;this.O=b.next().value;this.K=b.next().value;this.j=b.next().value;this.C=b.next().value;this.oa=b.next().value;this.Ba=b.next().value;this.Za=b.next().value;b=a[2];this.W=b[0];md(this,b[1]);this.A.ga=b[2];b=a[3];for(c=b.length-1;0<=c;c--){var d;a:{for(d=0;d<this.vb.length;d++){var e=this.vb[d];
if(e.qc===b[c]){d=e;break a}}d=null}d&&(d.next=this.Ca,this.Ca=d)}a=a[4];for(b=0;b<this.R.length&&b<a.length;b++)this.R[b][0]=a[b];return!0};function xd(a,b){a.j=a.j&-254049|b&254048;a.j|=b&4096;b&2048?a.j&4096||(a.j|=2048):a.j&=-2049}function yd(a,b){var c=a.i;a.i=(c+b)%Yb;return c}function zd(a){return 0<=a.O?a.O:a.I&4194304?a.oa:a.i}function H(a,b){a.I=0;a.O=-1;a.i=b%Yb}function wd(a){var b=[];for(a=a.Ca;a;)b.push(a.qc),a=a.next;return b}
m.ic=function(a){var b=this.H;a=this.Ba=a;return b.b[(a&b.j)>>>b.i].f(a&16383,a)};m.tc=function(a,b){var c=this.H;a=this.Ba=a;c.b[(a&c.j)>>>c.i].g(b,a&16383,a);return b};
m.Ya=function(a){this.A.complete=!0;var b=this.D?Ad(this.D)?1:this.A.gb?-1:0:0,c=a?this.A.gb?0:1:-1;this.A.gb=!1;this.V=this.N=a;this.C=this.C&-5|(b?4:0);do{if(this.C){if(this.C&4){if(Bd(this.D,zd(this),c)){this.Y();break}++b||(this.C&=-5);c||c++}if(a=this.C&11)this.C&2?this.Ca||(this.C&=-3):this.C&1&&this.C++,a=!1;if(a){if(this.C&4&&Bd(this.D,zd(this),c)){this.Y();break}if(0>c)break}}this.C&=15;this.I&4194304?this.I=this.Ja=this.f(this.b):0<=this.O?(this.I=this.Ka=this.f(this.O),this.O=-1):(this.I=
this.Ka=this.f(this.oa=this.i),this.i=(this.i+1)%Yb);this.I&=8388607;this.b=this.I&262143;if(a=this.I>>18&15)this.b=this.b+(this.Ja=this.f(a))&Xb;a=this.I&4194304?-1:this.Ka/ec|0;0<=a&&this.Tb(a);this.N--}while(0<this.N);return this.A.complete?this.V-this.N:!1===this.A.complete?-1:0};bb(function(){for(var a=v(document,t,"cpu"),b=0;b<a.length;b++){var c=a[b],d=w(c),d=new ud(d);ub(d,c)}});function vd(a){Cd[a>>4].call(this,a,a&15)}function O(a){this.w(a)}
function Dd(){var a=0,b=this.f(this.b),c=b/fc&63,d=b>>24&63,c=c-d;0>c&&(a++,c=36-d,0>c&&(c=100-d));b=c*fc+(d<<24)+(b&16777215);a&&(b=(b+a)%E);this.g(this.b,b)}function Ed(a,b){a=this.f(this.b);if(0>this.K)this.K=a,this.I=this.b|4194304;else{var c=this.K/fc&63,d=this.K>>24&63;a=32>c+d?(a>>c&(1<<d)-1)>>>0:Math.trunc(a/Math.pow(2,c))%Math.pow(2,d);this.g(b,a);this.j&=-8193;this.K=-1}}
function Fd(a,b){a=this.f(this.b);if(0>this.K)this.K=a,this.I=this.b|4194304;else{var c=this.K/fc&63,d=this.K>>24&63;b=this.f(b)%Math.pow(2,d)*Math.pow(2,c)%E;a=a-a%Math.pow(2,c+d)+b+a%Math.pow(2,c);this.g(this.b,a);this.j&=-8193;this.K=-1}}function Gd(a,b){this.g(b,this.f(this.b))}function Hd(a,b){this.g(b,this.b)}function Id(a,b){this.g(this.b,this.f(b))}function Jd(a,b){this.g(b,0)}function Kd(a,b){this.g(b,D-this.f(b))}function Ld(a,b){this.g(b,D)}
function Md(a,b){var c=this.f(this.b),d=this.f(b);this.g(b,Nd(a,d,c)+(c-(c&x)))}function Od(a,b){var c=this.f(b);this.g(b,Nd(a,c,0))}function Pd(a,b){b=this.f(b);var c=this.f(this.b);this.g(this.b,Nd(a,c,b)+(b-(b&x)))}function Qd(a,b){var c=this.f(this.b),d=c;if(a&=384)switch(d-=d&x,a){case 256:d+=x;break;case 384:d+=c>A?x:0}c=d;this.g(this.b,c);b&&this.g(b,c)}function ie(a,b){var c=(this.f(this.b)&x)*y,d=this.f(b);this.g(b,Nd(a,d,c)+c)}
function je(a,b){var c=this.b*y,d=this.f(b);this.g(b,Nd(a,d,c)+c)}function ke(a,b){b=(this.f(b)&x)*y;var c=this.f(this.b);this.g(this.b,Nd(a,c,b)+b)}function le(a,b){var c=this.f(this.b),d=(c&x)*y,c=Nd(a,c,d)+d;this.g(this.b,c);b&&this.g(b,c)}function me(a,b){var c=this.f(this.b)&x,d=this.f(b);this.g(b,ne(a,d,c)+c)}function oe(a,b){var c=this.f(b);this.g(b,ne(a,c,this.b)+this.b)}function pe(a,b){b=this.f(b)&x;var c=this.f(this.b);this.g(this.b,ne(a,c,b)+b)}
function qe(a,b){var c=this.f(this.b),d=c;if(a&=384)switch(d&=x,a){case 256:d+=x*y;break;case 384:d+=c>Zb?x*y:0}c=d;this.g(this.b,c);b&&this.g(b,c)}function re(a,b){var c=this.f(this.b)/y|0,d=this.f(b);this.g(b,ne(a,d,c)+c)}function se(a,b){var c=this.f(b);this.g(b,ne(a,c,0))}function te(a,b){b=this.f(b)/y|0;var c=this.f(this.b);this.g(this.b,ne(a,c,b)+b)}function ue(a,b){var c=this.f(this.b),d=c/y|0,c=ne(a,c,d)+d;this.g(this.b,c);b&&this.g(b,c)}function P(a){ve[a&7].call(this,a,a>>3&127)}
function we(){}function xe(){}function M(a){this.u("undefined opcode: "+qa(a));yd(this,-1);this.Y()}function ye(a){a>A&&(a!=C?a=bc-a:this.j|=163840);return a}function Q(a,b){var c=(a+b)%E;ze.call(this,a,b,c);return c}
function Ae(a,b,c){var d=!1,e=!1;if(void 0===c){if(!a)return this.j|=131104,-1;c=b>A?D:0}else if((c<C?c:bc-c-(b?1:0))>=(a<C?a:bc-a))return this.j|=131104,-1;var f=c-c%C;b=b%C+(c&1)*C;c=this.F=f+Math.trunc(c/2);a>A&&(a=E-a,d=!d);c>A&&(b?(c=D-c,b=E-b):c&&(c=E-c),e=!0,d=!d);f=this.nb;f[0]=0;f[1]=0;f=this.wa;f[0]=1;f[1]=0;f=this.na;f[0]=a;f[1]=0;a=this.xa;a[0]=b;for(a[1]=c;0<Be(this.xa,this.na);)Ce(this.na,this.na),Ce(this.wa,this.wa);do{if(0<=Be(this.xa,this.na)&&(c=this.xa,a=this.na,c[0]-=a[0],c[1]-=
a[1],0>c[0]&&(c[0]+=E,c[1]--),Ce(this.nb,this.wa),De(this.xa)))break;Ee(this.na);Ee(this.wa)}while(!De(this.wa));b=this.nb[0];this.F=this.xa[0];d&&b&&(b=E-b);e&&this.F&&(this.F=E-this.F);return b}
function Fe(a,b,c,d){var e=a,f=b;b=!1;var g;e>A&&(d||1001!=this.jb||e!=C)&&(e=E-e,b=!b);f>A&&(f=E-f,b=!b);if(e<y&&f<y)a=e*f,g=0;else{a=e&x;e=Math.trunc(e/y);g=f&x;var f=Math.trunc(f/y),h=a*g,k=e*g+Math.trunc(h/y);g=Math.trunc(k/y);k=(k&x)+a*f;a=(k*y+(h&x))%E;g+=Math.trunc(k/y)+e*f}b&&(a?(g=D-g,a=E-a):g&&(g=E-g));b=a;a=g;e=a-a%C;a=2*a%E+Math.trunc(b/C);b=e+b%C;a-a%C!=e&&(b=a);d?g=b:(b==C&&a==C&&(this.j|=131072),this.F=b,g=a);c&&(a=this.F,!d&&(g||a>A)&&(g!=D||a<=A)&&(this.j|=131072),g=a);return g}
function Ge(a){a?a==C?this.j|=163840:a=bc-a:this.j|=98304;return a}function He(a,b){var c=a-b;0>c&&(c+=E);ze.call(this,c,b,a);return c}function ze(a,b,c){a=Math.trunc(a/ac);b=Math.trunc(b/ac);c=Math.trunc(c/ac);var d=a^(a^b)&(b^c);this.j=this.j|(d&2?65536:0)|(d&1?32768:0)|((a^c)&(b^c)&2?131072:0)}function R(a,b){return((a/F|0)&(b/F|0))*F+((a&b)>>>0)}function S(a,b){return R(a,(~(b/F|0)&15)*F+(~b>>>0))}function Ie(a,b){return(a<C?a:a-E)-(b<C?b:b-E)}
function Je(a,b){return(~((a/F|0)^(b/F|0))&15)*F+(~(a^b)>>>0)}function T(a,b){return(a/F|0|b/F|0)*F+((a|b)>>>0)}function U(a){return a<C?a:a-E}function V(a,b){return((a/F|0)^(b/F|0))*F+((a^b)>>>0)}function W(a){return(a/y|0)+(a&x)*y}function ne(a,b,c){switch(a&384){case 0:b-=b&x;break;case 128:b=0;break;case 256:b=x*y;break;case 384:b=c>Zb?x*y:0}return b}function Nd(a,b,c){switch(a&384){case 0:b&=x;break;case 128:b=0;break;case 256:b=x;break;case 384:b=c>A?x:0}return b}
function Ce(a,b){a[0]+=b[0];a[1]+=b[1];a[0]>=E&&(a[0]%=E,a[1]++)}function Be(a,b){var c=a[1]-b[1];c||(c=a[0]-b[0]);return c}function Ee(a){a[1]%2&&(a[0]+=E);a[0]=Math.trunc(a[0]/2);a[1]=Math.trunc(a[1]/2)}function De(a){return!a[0]&&!a[1]}
var Cd=[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},Dd,function(a,b){this.j&8192||(Dd.call(this),this.j|=8192);Ed.call(this,0,b)},Ed,function(a,b){this.j&8192||(Dd.call(this),this.j|=8192);Fd.call(this,0,b)},Fd,function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},
function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},
function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},Gd,Hd,Id,function(a,b){b&&this.g(b,this.f(this.b))},function(a,b){a=this.f(this.b);a=(a/y|0)+(a&x)*y;this.g(b,a)},function(a,b){this.g(b,this.b*y)},function(a,b){a=this.f(b);a=(a/y|0)+(a&x)*y;this.g(this.b,a)},function(a,b){a=this.f(this.b);a=(a/y|0)+(a&x)*y;this.g(this.b,a);b&&this.g(b,a)},function(a,b){this.g(b,Ge.call(this,this.f(this.b)))},function(a,b){this.g(b,
Ge.call(this,this.b))},function(a,b){this.g(this.b,Ge.call(this,this.f(b)))},function(a,b){a=Ge.call(this,this.f(this.b));this.g(this.b,a);b&&this.g(b,a)},function(a,b){this.g(b,ye.call(this,this.f(this.b)))},function(a,b){this.g(b,this.b)},function(a,b){this.g(this.b,ye.call(this,this.f(b)))},function(a,b){a=ye.call(this,this.f(this.b));this.g(this.b,a);b&&this.g(b,a)},function(a,b){this.g(b,Fe.call(this,this.f(b),this.f(this.b),!0))},function(a,b){this.g(b,Fe.call(this,this.f(b),this.b,!0))},function(a,
b){this.g(this.b,Fe.call(this,this.f(b),this.f(this.b),!0))},function(a,b){this.g(this.b,this.g(b,Fe.call(this,this.f(b),this.f(this.b),!0)))},function(a,b){this.g(b,Fe.call(this,this.f(b),this.f(this.b)));this.g(b+1&15,this.F)},function(a,b){this.g(b,Fe.call(this,this.f(b),this.b));this.g(b+1&15,this.F)},function(a,b){this.g(this.b,Fe.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,Fe.call(this,this.f(b),this.f(this.b))));this.g(b+1&15,this.F)},function(a,b){a=Ae.call(this,
this.f(this.b),this.f(b));0>a||(this.g(b,a),this.g(b+1&15,this.F))},function(a,b){a=Ae.call(this,this.b,this.f(b));0>a||(this.g(b,a),this.g(b+1&15,this.F))},function(a,b){a=Ae.call(this,this.f(this.b),this.f(b));0>a||this.g(this.b,a)},function(a,b){a=Ae.call(this,this.f(this.b),this.f(b));0>a||(this.g(this.b,this.g(b,a)),this.g(b+1&15,this.F))},function(a,b){a=this.f(b);var c=this.f(b+1&15),c=Ae.call(this,this.f(this.b),c,a);0>c||(this.g(b,c),this.g(b+1&15,this.F))},function(a,b){a=this.f(b);var c=
this.f(b+1&15),c=Ae.call(this,this.b,c,a);0>c||(this.g(b,c),this.g(b+1&15,this.F))},function(a,b){a=this.f(b);b=this.f(b+1&15);b=Ae.call(this,this.f(this.b),b,a);0>b||this.g(this.b,b)},function(a,b){a=this.f(b);var c=this.f(b+1&15),c=Ae.call(this,this.f(this.b),c,a);0>c||(this.g(b,this.g(this.b,c)),this.g(b+1&15,this.F))},function(a,b){if(a=(this.b&$b)<<14>>23|this.b&255){var c,d,e=this.f(b);0<a?(d=A,c=e<C?0:C,35>a&&(c+=e*Math.pow(2,a)%C,d=C-Math.pow(2,35-a)),e<C?e+d>A&&(this.j|=131072):e-d<C&&(this.j|=
131072)):-35>=a?c=e<C?0:A:(c=Math.trunc(e/Math.pow(2,-a)),e>A&&(d=E-Math.pow(2,36+a),c+=d));this.g(b,c)}},function(a,b){if(a=((this.b&$b)<<14>>23|this.b&255)%36){var c=this.f(b);0>a&&(a=36+a);c=c*Math.pow(2,a)%E+Math.trunc(c/Math.pow(2,36-a));this.g(b,c)}},function(a,b){if(a=(this.b&$b)<<14>>23|this.b&255){var c=this.f(b),c=0<a?36<=a?0:c*Math.pow(2,a)%E:-36>=a?0:Math.trunc(c/Math.pow(2,-a));this.g(b,c)}},function(a,b){a=0;var c=this.f(b);if(c){for(;c<C;)a++,c*=2;H(this,this.b)}this.g(b+1&15,a)},function(a,
b){if(a=(this.b&$b)<<14>>23|this.b&255){var c,d=this.f(b),e=this.f(b+1&15);if(0<a){var f=d;if(36<=a){if(0<d&&d<C||d>A&&d<D)this.j|=131072;if(71<=a){if(0<e&&e<C||e>A&&e<D)this.j|=131072;d=0}else d=e*Math.pow(2,a-35)%C,c=C-Math.pow(2,70-a),f<=A?e+c>A&&(this.j|=131072):e-c<=A&&(this.j|=131072);e=0;f>A&&(d+=C,e+=C)}else d=d*Math.pow(2,a)%C+Math.trunc(e%C/Math.pow(2,35-a)),e=e*Math.pow(2,a)%C,c=C-Math.pow(2,35-a),f<=A?f+c>A&&(this.j|=131072):(f-c<=A&&(this.j|=131072),d+=C,e+=C)}else-36>=a?(e=-72>=a?d>
A?D:0:Math.trunc(d%C/Math.pow(2,-a-35)),d<=A?d=0:(d=D,e+=C)):(c=d>A?E-Math.pow(2,36+a):0,e=Math.trunc(e%C/Math.pow(2,-a))+d%C*Math.pow(2,35+a)%C,d=Math.trunc(d/Math.pow(2,-a))+c,d>A&&(e+=C));this.g(b,d);this.g(b+1&15,e)}},function(a,b){if(a=((this.b&$b)<<14>>23|this.b&255)%72){var c=this.f(b),d=this.f(b+1&15),e=c;0>a&&(a=72+a);36>a?(c=c*Math.pow(2,a)%E+Math.trunc(d/Math.pow(2,36-a)),d=d*Math.pow(2,a)%E+Math.trunc(e/Math.pow(2,36-a))):(c=d*Math.pow(2,a-36)%E+Math.trunc(c/Math.pow(2,72-a)),d=e*Math.pow(2,
a-36)%E+Math.trunc(d/Math.pow(2,72-a)));this.g(b,c);this.g(b+1&15,d)}},function(a,b){if(a=(this.b&$b)<<14>>23|this.b&255){var c=this.f(b),d=this.f(b+1&15);0<a?36<=a?(c=72<=a?0:d*Math.pow(2,a-36)%E,d=0):(c=c*Math.pow(2,a)%E+Math.trunc(d/Math.pow(2,36-a)),d=d*Math.pow(2,a)%E):-36>=a?(d=-72>=a?0:Math.trunc(c/Math.pow(2,-a-36)),c=0):(d=Math.trunc(d/Math.pow(2,-a))+c*Math.pow(2,36+a)%E,c=Math.trunc(c/Math.pow(2,-a)));this.g(b,c);this.g(b+1&15,d)}},M,function(a,b){a=this.f(b);this.g(b,this.f(this.b));this.g(this.b,
a)},function(a,b){for(var c=a=!1,d=this.f(b),e=d/y|0,d=d&x;!a;)if(this.g(d,this.f(e)),(a=d>=this.b)||(e=e+1&x,d=d+1&x,c=!0),a||!this.A.P){c&&this.g(b,e*y+d);a||yd(this,-1);break}},function(a,b){a=(this.f(b)+262145)%E;this.g(b,a);a<C&&H(this,this.b)},function(a,b){a=(this.f(b)+262145)%E;this.g(b,a);a>=C&&H(this,this.b)},function(a,b){b&1&&(this.j|=4096);b&2&&xd(this,this.Ja/y|0);b&4&&this.Y();b&8&&this.w(a);H(this,this.b)},function(a,b){a=b<<14;this.j&a&&(this.j&=~a,H(this,this.b))},function(){this.O=
this.b},M,function(a,b){a=(this.f(b)+262145)%E;this.g(b,a);a/y|0||(this.j|=262144);this.g(a&Xb,(this.j&x)*y+this.i);this.j&=-8193;H(this,this.b)},function(a,b){a=this.f(b);a+=262145;this.g(a&Xb,this.f(this.b));a>=E&&(a-=E);a/y|0||(this.j|=262144);this.g(b,a)},function(a,b){a=this.f(b);var c=this.f(a&Xb);this.g(this.b,c);this.b==b&&(a=c);a-=262145;0>a&&(a+=E);(a/y|0)==x&&(this.j|=262144);this.g(b,a)},function(a,b){a=this.f(b);var c=this.f(a&Xb);a-=262145;0>a&&(a+=E);(a/y|0)==x&&(this.j|=262144);this.g(b,
a);H(this,c&Xb)},function(){this.g(this.b,(this.j&x)*y+this.i);this.j&=-8193;H(this,this.b+1)},function(a,b){this.g(b,(this.j&x)*y+this.i);this.j&=-8193;H(this,this.b)},function(a,b){this.g(this.b,this.f(b));this.g(b,this.b*y+this.i);H(this,this.b+1)},function(a,b){a=this.f(b);this.g(b,this.f(a/y|0));H(this,this.b)},function(a,b){this.g(b,Q.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(b,Q.call(this,this.f(b),this.b))},function(a,b){this.g(this.b,Q.call(this,this.f(b),this.f(this.b)))},
function(a,b){this.g(this.b,this.g(b,Q.call(this,this.f(b),this.f(this.b))))},function(a,b){this.g(b,He.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(b,He.call(this,this.f(b),this.b))},function(a,b){this.g(this.b,He.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,He.call(this,this.f(b),this.f(this.b))))},we,function(a,b){0>Ie(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){Ie(this.f(b),this.b)||H(this,this.i+1)},function(a,b){0>=Ie(this.f(b),this.b)&&H(this,
this.i+1)},function(){H(this,this.i+1)},function(a,b){0<=Ie(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){Ie(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){0<Ie(this.f(b),this.b)&&H(this,this.i+1)},xe,function(a,b){0>Ie(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,b){Ie(this.f(b),this.f(this.b))||H(this,this.i+1)},function(a,b){0>=Ie(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(){H(this,this.i+1)},function(a,b){0<=Ie(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,
b){Ie(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,b){0<Ie(this.f(b),this.f(this.b))&&H(this,this.i+1)},we,function(a,b){0>U(this.f(b))&&H(this,this.b)},function(a,b){U(this.f(b))||H(this,this.b)},function(a,b){0>=U(this.f(b))&&H(this,this.b)},function(){H(this,this.b)},function(a,b){0<=U(this.f(b))&&H(this,this.b)},function(a,b){U(this.f(b))&&H(this,this.b)},function(a,b){0<U(this.f(b))&&H(this,this.b)},function(a,b){b&&this.g(b,this.f(this.b))},function(a,b){a=this.f(this.b);0>U(a)&&
H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.f(this.b);U(a)||H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.f(this.b);0>=U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){H(this,this.i+1);b&&this.g(b,this.f(this.b))},function(a,b){a=this.f(this.b);0<=U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.f(this.b);U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.f(this.b);0<U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){this.g(b,Q.call(this,this.f(b),1))},
function(a,b){a=this.g(b,Q.call(this,this.f(b),1));0>U(a)&&H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),1));U(a)||H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),1));0>=U(a)&&H(this,this.b)},function(a,b){this.g(b,Q.call(this,this.f(b),1));H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),1));0<=U(a)&&H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),1));U(a)&&H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),1));0<U(a)&&H(this,
this.b)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),1));b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),1));0>U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),1));U(a)||H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),1));0>=U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),1));H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=
this.g(this.b,Q.call(this,this.f(this.b),1));0<=U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),1));U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),1));0<U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){this.g(b,Q.call(this,this.f(b),D))},function(a,b){a=this.g(b,Q.call(this,this.f(b),D));0>U(a)&&H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),D));U(a)||H(this,this.b)},function(a,b){a=
this.g(b,Q.call(this,this.f(b),D));0>=U(a)&&H(this,this.b)},function(a,b){this.g(b,Q.call(this,this.f(b),D));H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),D));0<=U(a)&&H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),D));U(a)&&H(this,this.b)},function(a,b){a=this.g(b,Q.call(this,this.f(b),D));0<U(a)&&H(this,this.b)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),D));b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),D));0>U(a)&&H(this,
this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),D));U(a)||H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),D));0>=U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),D));H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),D));0<=U(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),D));U(a)&&H(this,this.i+
1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,Q.call(this,this.f(this.b),D));0<U(a)&&H(this,this.i+1);b&&this.g(b,a)},Jd,Jd,function(){this.g(this.b,0)},function(a,b){this.g(this.b,this.g(b,0))},function(a,b){this.g(b,R(this.f(b),this.f(this.b)))},function(a,b){this.g(b,R(this.f(b),this.b))},function(a,b){this.g(this.b,R(this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,R(this.f(b),this.f(this.b))))},function(a,b){this.g(b,R(D-this.f(b),this.f(this.b)))},function(a,b){this.g(b,R(D-
this.f(b),this.b))},function(a,b){this.g(this.b,R(D-this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,R(D-this.f(b),this.f(this.b))))},Gd,Hd,xe,Gd,function(a,b){this.g(b,R(this.f(b),D-this.f(this.b)))},function(a,b){this.g(b,R(this.f(b),D-this.b))},function(a,b){this.g(this.b,R(this.f(b),D-this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,R(this.f(b),D-this.f(this.b))))},we,we,Id,Id,function(a,b){this.g(b,V(this.f(b),this.f(this.b)))},function(a,b){this.g(b,V(this.f(b),this.b))},
function(a,b){this.g(this.b,V(this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,V(this.f(b),this.f(this.b))))},function(a,b){this.g(b,T(this.f(b),this.f(this.b)))},function(a,b){this.g(b,T(this.f(b),this.b))},function(a,b){this.g(this.b,T(this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,T(this.f(b),this.f(this.b))))},function(a,b){this.g(b,R(D-this.f(b),D-this.f(this.b)))},function(a,b){this.g(b,R(D-this.f(b),D-this.b))},function(a,b){this.g(this.b,R(D-this.f(b),D-this.f(this.b)))},
function(a,b){this.g(this.b,this.g(b,R(D-this.f(b),D-this.f(this.b))))},function(a,b){this.g(b,Je(this.f(b),this.f(this.b)))},function(a,b){this.g(b,Je(this.f(b),this.b))},function(a,b){this.g(this.b,Je(this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,Je(this.f(b),this.f(this.b))))},Kd,Kd,function(a,b){this.g(this.b,D-this.f(b))},function(a,b){this.g(this.b,this.g(b,D-this.f(b)))},function(a,b){this.g(b,T(D-this.f(b),this.f(this.b)))},function(a,b){this.g(b,T(D-this.f(b),this.b))},
function(a,b){this.g(this.b,T(D-this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,T(D-this.f(b),this.f(this.b))))},function(a,b){this.g(b,D-this.f(this.b))},function(a,b){this.g(b,D-this.b)},function(){this.g(this.b,D-this.f(this.b))},function(a,b){this.g(this.b,this.g(b,D-this.f(this.b)))},function(a,b){this.g(b,T(this.f(b),D-this.f(this.b)))},function(a,b){this.g(b,T(this.f(b),D-this.b))},function(a,b){this.g(this.b,T(this.f(b),D-this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,
T(this.f(b),D-this.f(this.b))))},function(a,b){this.g(b,T(D-this.f(b),D-this.f(this.b)))},function(a,b){this.g(b,T(D-this.f(b),D-this.b))},function(a,b){this.g(this.b,T(D-this.f(b),D-this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,T(D-this.f(b),D-this.f(this.b))))},Ld,Ld,function(){this.g(this.b,D)},function(a,b){this.g(this.b,this.g(b,D))},Md,Od,Pd,Qd,ie,je,ke,le,Md,Od,Pd,Qd,ie,je,ke,le,Md,Od,Pd,Qd,ie,je,ke,le,Md,Od,Pd,Qd,ie,je,ke,le,me,oe,pe,qe,re,se,te,ue,me,oe,pe,qe,re,se,te,ue,me,oe,pe,
qe,re,se,te,ue,me,oe,pe,qe,re,se,te,ue,we,we,function(a,b){R(this.f(b),this.b)||H(this,this.i+1)},function(a,b){R(this.f(b),this.b*y)||H(this,this.i+1)},function(){H(this,this.i+1)},function(){H(this,this.i+1)},function(a,b){R(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){R(this.f(b),this.b*y)&&H(this,this.i+1)},xe,xe,function(a,b){R(this.f(b),this.f(this.b))||H(this,this.i+1)},function(a,b){R(this.f(b),W(this.f(this.b)))||H(this,this.i+1)},function(){H(this,this.i+1)},function(){H(this,this.i+
1)},function(a,b){R(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,b){R(this.f(b),W(this.f(this.b)))&&H(this,this.i+1)},function(a,b){this.g(b,S(this.f(b),this.b))},function(a,b){this.g(b,S(this.f(b),this.b*y))},function(a,b){a=this.f(b);R(a,this.b)||H(this,this.i+1);this.g(b,S(a,this.b))},function(a,b){a=this.f(b);var c=this.b*y;R(a,c)||H(this,this.i+1);this.g(b,S(a,c))},function(a,b){H(this,this.i+1);this.g(b,S(this.f(b),this.b))},function(a,b){H(this,this.i+1);this.g(b,S(this.f(b),this.b*
y))},function(a,b){a=this.f(b);R(a,this.b)&&H(this,this.i+1);this.g(b,S(a,this.b))},function(a,b){a=this.f(b);var c=this.b*y;R(a,c)&&H(this,this.i+1);this.g(b,S(a,c))},function(a,b){this.g(b,S(this.f(b),this.f(this.b)))},function(a,b){this.g(b,S(this.f(b),W(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);R(a,c)||H(this,this.i+1);this.g(b,S(a,c))},function(a,b){a=this.f(b);var c=W(this.f(this.b));R(a,c)||H(this,this.i+1);this.g(b,S(a,c))},function(a,b){H(this,this.i+1);this.g(b,S(this.f(b),
this.f(this.b)))},function(a,b){H(this,this.i+1);this.g(b,S(this.f(b),W(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);R(a,c)&&H(this,this.i+1);this.g(b,S(a,c))},function(a,b){a=this.f(b);var c=W(this.f(this.b));R(a,c)&&H(this,this.i+1);this.g(b,S(a,c))},function(a,b){this.g(b,V(this.f(b),this.b))},function(a,b){this.g(b,V(this.f(b),this.b*y))},function(a,b){a=this.f(b);R(a,this.b)||H(this,this.i+1);this.g(b,V(a,this.b))},function(a,b){a=this.f(b);var c=this.b*y;R(a,c)||H(this,
this.i+1);this.g(b,V(a,c))},function(a,b){H(this,this.i+1);this.g(b,V(this.f(b),this.b))},function(a,b){H(this,this.i+1);this.g(b,V(this.f(b),this.b*y))},function(a,b){a=this.f(b);R(a,this.b)&&H(this,this.i+1);this.g(b,V(a,this.b))},function(a,b){a=this.f(b);var c=this.b*y;R(a,c)&&H(this,this.i+1);this.g(b,V(a,c))},function(a,b){this.g(b,V(this.f(b),this.f(this.b)))},function(a,b){this.g(b,V(this.f(b),W(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);R(a,c)||H(this,this.i+1);this.g(b,
V(a,c))},function(a,b){a=this.f(b);var c=W(this.f(this.b));R(a,c)||H(this,this.i+1);this.g(b,V(a,c))},function(a,b){H(this,this.i+1);this.g(b,V(this.f(b),this.f(this.b)))},function(a,b){H(this,this.i+1);this.g(b,V(this.f(b),W(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);R(a,c)&&H(this,this.i+1);this.g(b,V(a,c))},function(a,b){a=this.f(b);var c=W(this.f(this.b));R(a,c)&&H(this,this.i+1);this.g(b,V(a,c))},function(a,b){this.g(b,T(this.f(b),this.b))},function(a,b){this.g(b,T(this.f(b),
this.b*y))},function(a,b){a=this.f(b);R(a,this.b)||H(this,this.i+1);this.g(b,T(a,this.b))},function(a,b){a=this.f(b);R(a,this.b*y)||H(this,this.i+1);this.g(b,T(a,this.b*y))},function(a,b){H(this,this.i+1);this.g(b,T(this.f(b),this.b))},function(a,b){H(this,this.i+1);this.g(b,T(this.f(b),this.b*y))},function(a,b){a=this.f(b);R(a,this.b)&&H(this,this.i+1);this.g(b,T(a,this.b))},function(a,b){a=this.f(b);var c=this.b*y;R(a,c)&&H(this,this.i+1);this.g(b,T(a,c))},function(a,b){this.g(b,T(this.f(b),this.f(this.b)))},
function(a,b){this.g(b,T(this.f(b),W(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);R(a,c)||H(this,this.i+1);this.g(b,T(a,c))},function(a,b){a=this.f(b);var c=W(this.f(this.b));R(a,c)||H(this,this.i+1);this.g(b,T(a,c))},function(a,b){H(this,this.i+1);this.g(b,T(this.f(b),this.f(this.b)))},function(a,b){H(this,this.i+1);this.g(b,T(this.f(b),W(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);R(a,c)&&H(this,this.i+1);this.g(b,T(a,c))},function(a,b){a=this.f(b);var c=
W(this.f(this.b));R(a,c)&&H(this,this.i+1);this.g(b,T(a,c))},P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],ve=[function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a,b){switch(b){case 0:a=this.f(this.b);a&8&&(this.j&=-131073);a&131072&&(this.j&=-262145);break;default:this.w(a)}},function(a,b){switch(b){case 0:a=0;this.j&131072&&(a|=8);this.j&262144&&(a|=65536);this.g(this.b,
a);break;default:this.w(a)}},function(a){this.w(a)},function(a){this.w(a)}];
function Ke(a){r.call(this,"ROM",a,128);this.aa=this.b=null;this.C=+a.addr;this.j=+a.size;this.i=a.alias;"string"==typeof this.i&&(this.i=eval(this.i));this.w=a.file;this.F=ya(this.w);if(this.w){a=this.w;var b=za(this.F);"json"!=b&&"hex"!=b&&(a=Na()+"/api/v1/dump?file="+this.w+"&format=bytes&decimal=true");var c=this;La(a,null,!0,function(a,b,f){f?(c.ja("Unable to load ROM resource (error "+f+": "+a+")"),c.w=null):(pb(c.$a,a,b),(a=Ma(a,b))?(c.b=a.ea,c.aa=a.aa):c.w=null);Le(c)})}}la(Ke,r);
Ke.prototype.La=function(a,b,c,d){this.H=b;this.v=c;this.D=d;Le(this)};Ke.prototype.Aa=function(){this.aa&&(this.D&&Me(this.D,this.id,this.C,this.j,this.aa),delete this.aa);return!0};Ke.prototype.ra=function(){return!0};
function Le(a){if(!Qb(a)){if(a.w){if(!a.b||!a.H)return;a.j||(a.j=a.b.length);if(a.b.length!=a.j)Eb(a,"ROM size ("+n(a.b.length,8,!0)+") does not match specified size ("+n(a.j,8,!0)+")");else{var b;b=a.C;if(Jc(a.H,b,a.j,Vc)){var c;for(c=0;c<a.b.length;c++)Dc(a.H,b+c,a.b[c]);b=!0}else b=!1;if(b){b=[];"number"==typeof a.i?b.push(a.i):null!=a.i&&a.i.length&&(b=a.i);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.H,g=d.j,h=[],k=d.C>>>f.i;0<g&&k<f.b.length;)h.push(f.b[k++]),g-=16384;f=d.H;d=d.j;g=0;for(e>>>=
f.i;0<d&&e<f.b.length;){k=h[g++];if(!k)break;f.b[e++]=k;d-=16384}}delete a.b}}}Rb(a)}}bb(function(){for(var a=v(document,t,"rom"),b=0;b<a.length;b++){var c=a[b],d=w(c),d=new Ke(d);ub(d,c)}});
function Ne(a){r.call(this,"RAM",a);this.aa=this.Oa=null;this.i=+a.addr;this.j=+a.size;this.la=a.load;this.ya=a.exec;null!=this.la&&(this.la=+this.la);null!=this.ya&&(this.ya=+this.ya);this.w=this.F=!1;this.b=a.file;this.C=ya(this.b);if(this.b){a=this.b;var b=za(this.C);"json"!=b&&"hex"!=b&&(a=Na()+"/api/v1/dump?file="+this.b+"&format=bytes&decimal=true");var c=this;La(a,null,!0,function(a,b,f){f?(c.ja("Unable to load RAM resource (error "+f+": "+a+")"),c.b=null):(pb(c.$a,a,b),(a=Ma(a,b))?(c.Oa=a.Oa,
c.aa=a.aa,null==c.la&&(c.la=a.la),null==c.ya&&(c.ya=a.ya)):c.b=null);Oe(c)})}}la(Ne,r);Ne.prototype.La=function(a,b,c,d){this.H=b;this.v=c;this.D=d;Oe(this)};Ne.prototype.Aa=function(a,b){this.aa&&(this.D&&Me(this.D,this.id,this.i,this.j,this.aa),delete this.aa);b||this.reset();return!0};Ne.prototype.ra=function(){return!0};
function Oe(a){if(a.H&&(!a.w&&a.j&&(Jc(a.H,a.i,a.j,1)?a.w=!0:a.j=0),!Qb(a))){if(!a.w)q("No RAM allocated");else if(a.b){if(!a.Oa)return;Pe(a,a.Oa,a.la,a.ya,a.i)?a.status('Loaded image "'+a.C+'"'):a.ja('Error loading image "'+a.C+'"')}a.F=!0;Rb(a)}}
Ne.prototype.reset=function(){if(this.w&&!this.F){for(var a=this.H,b=this.i,c=this.j,d=b&16383,b=b>>>a.i;0<c&&b<a.b.length;){var e=a.b[b],f=c,g=0,g=void 0===g?0:g,d=d||0;void 0===f&&(f=e.size);0>g&&g>=-C&&(g+=E);for(var g=Math.trunc(Math.abs(g))%E,h=d;f--&&h<e.size;h++)e.D(g,d,e.B+d);c-=16384;b++;d=0}this.Oa&&Pe(this,this.Oa,this.la,this.ya,this.i,!this.D)}this.F=!1};
function Pe(a,b,c,d,e,f){var g=!1;null==c&&(c=e);if(null!=c){for(g=0;g<b.length;g++)Dc(a.H,c+g,b[g]);g=!0}g&&(null==d&&(a.v.Y(),f=!1),null!=d&&(a=a.v,a.Za=d,H(a,d),f?a.A.ba?a.A.P||xc(a):a.A.ga=!0:a.D&&a.A.ba?a.Y()||a.G.A.reset||(id(a.D),K(a.G,-1)):!1===f&&a.Y(),!a.A.P&&a.Na&&a.Na.stop()));return g}bb(function(){for(var a=v(document,t,"ram"),b=0;b<a.length;b++){var c=a[b],d=w(c),d=new Ne(d);ub(d,c)}});
function Qe(a){r.call(this,"SerialPort",a,1048576);this.w=a.upperCase;"string"==typeof this.w&&(this.w="true"==this.w);this.j=!0;this.i=[];var b=a.binding;if("console"!=b){var c;a=Re;b&&(void 0===c&&(c="Panel"),(c=xb(c,this.id))&&(b=c.J[b])&&this.sa(null,a,b))}this.b=this.C=null;this.exports={connect:this.Lb,receiveData:this.eb,receiveStatus:this.kc,setConnection:this.nc}}la(Qe,r);m=Qe.prototype;
m.sa=function(a,b,c){var d=this;switch(b){case Re:return this.J[b]=c,c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?na.xb:na.Qb:46==c?b=na.xb:a.ctrlKey&&c>=na.wb&&c<=na.Sb&&(b=c-(na.wb-na.Nb));b&&(a.preventDefault&&a.preventDefault(),d.eb(b));return!0},c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==na.Pb&&(b=na.Ob);d.eb(b);a.preventDefault&&a.preventDefault()}return!0},c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.eb(a.getData("Text"))},c.removeAttribute("readonly"),!0}return!1};m.La=function(a,b,c,d){this.G=a;this.H=b;this.v=c;this.D=d;Rb(this)};
m.Lb=function(a){if(!this.b){var b=fd(this.G,"connection");if(b){var c=b.split("->");if(2==c.length){var d=Ea(c[0]);if(d!=this.Db)return;c=Ea(c[1]);if(this.b=wb(c)){var e=this.b.exports;if(e){var f=e.connect;f&&f.call(this.b,this.j);if(this.C=e.receiveData){this.j=a;this.status("Connected "+this.$a+"."+d+" to "+c);return}}}}this.status("Unable to establish connection: "+b)}}};m.Aa=function(a,b){if(!b)if(this.Lb(this.j),!a)this.reset();else if(!this.restore(a))return!1;return!0};
m.ra=function(a){return a?this.save():!0};m.reset=function(){};m.save=function(){var a=new G(this);a.set(0,[]);return a.data()};m.restore=function(){return!0};m.eb=function(a){if("number"==typeof a)this.i.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.i.push(b)}else this.i=this.i.concat(a);return!0};m.kc=function(){};m.nc=function(a,b){return this.b?!1:(this.b=a,this.C=b,!0)};var Re="buffer";
bb(function(){for(var a=v(document,t,"serial"),b=0;b<a.length;b++){var c=a[b],d=w(c),d=new Qe(d);ub(d,c)}});function Se(a){r.call(this,"Debugger",a);this.T=+a.base||16;this.L=32;this.S=["{","}"];this.ta=["[","]"];this.F=0;this.V=!1;this.C=-1;this.w=[];this.b={}}la(Se,r);Se.prototype.rb=function(){return-1};Se.prototype.sb=function(){};
function Te(a,b,c,d){if(c)if(b){0>a.C&&a.w.length&&(a.C=0);if(0>a.C||b!=a.w[a.C])a.w.splice(0,0,b),a.C=0;a.C--}else a.V?b="end":b=a.w[a.C+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(Ea(b.substring(c,f))),c=f+1}}return a}function Ue(a,b,c){if(32>=a.L)return b&c;b=X(a,b,0,!0);c=X(a,c,0,!0);return((b/Ve|0)&(c/Ve|0))*Ve+((b&c)>>>0)}
function We(a,b,c){if(32>=a.L)return b|c;b=X(a,b,0,!0);c=X(a,c,0,!0);return((b/Ve|0)^(c/Ve|0))*Ve+((b^c)>>>0)}Se.prototype.Ib=function(a,b){return a*b};function X(a,b,c,d){var e=b;c=c||a.L;if(d)if(32==c)e=b>>>0;else if(32>c)e=b&(1<<c)-1;else{if(a=Math.pow(2,c),0>b||b>=a)e=b%a,0>e&&(e+=a)}else 32>=c?e=b<<32-c>>32-c:(a=Math.pow(2,c-1),b>=a?(e=b%a,(b/a|0)&1&&(e-=a)):b<-a&&(e=b%a,((-b-1)/a|0)&1?e&&(e+=a):e||(e-=a)));b!=e&&(b=e);return b}
function Xe(a,b,c,d){for(d=void 0===d?-1:d;d--&&c.length;){var e=c.pop();if(2>b.length)return!1;var f,g=b.pop();f=b.pop();switch(e){case "*":f=a.Ib(f,g);break;case "/":if(!g)return!1;f=Math.trunc(f/g);break;case "^/":if(!g)return!1;f%=g;break;case "+":f+=g;break;case "-":f-=g;break;case "<<":f<<=g;break;case ">>":f>>=g;break;case ">>>":f>>>=g;break;case "<":f=f<g?1:0;break;case "<=":f=f<=g?1:0;break;case ">":f=f>g?1:0;break;case ">=":f=f>=g?1:0;break;case "==":f=f==g?1:0;break;case "!=":f=f!=g?1:
0;break;case "&":f=Ue(a,f,g);break;case "!":case "|":e=a;32>=e.L?f|=g:(f=X(e,f,0,!0),g=X(e,g,0,!0),f=(f/Ve|0|g/Ve|0)*Ve+((f|g)>>>0));break;case "^!":f=We(a,f,g);break;case "&&":f=f&&g?1:0;break;case "||":f=f||g?1:0;break;case ",,":f=X(a,f,18,!0)*Math.pow(2,18)+X(a,g,18,!0);break;case "_":case "^_":"^_"==e&&(g=35-(g&255));g&&(f=X(a,f,0,!0),f=0<g?f*Math.pow(2,g):Math.trunc(f/Math.pow(2,-g)));break;default:return!1}b.push(X(a,f))}return!0}
function Ye(a,b,c,d,e,f){var g,h,k,l=!1,p=0,u=[],B=[],z=a.T;for(a.T=e;c<d;){var J;h=b[c++].trim();k=c<d?b[c++]:"";if(h)J=Ze(a,h,null,f,p);else if("{"==k){h=1;for(J=c;c<d;)if(c++,k=c<b.length?b[c++]:"","{"==k)h++;else if("}"==k&&!--h)break;J=Ye(a,b,J,c-1,a.T,f);null!=J&&p&&(J=$e(a,J,p));h=c<d?b[c++].trim():"";k=c<d?b[c++]:""}else{if(" "==k)continue;if("^B"==k){a.T=2;continue}if("^O"==k){a.T=8;continue}if("^D"==k){a.T=10;continue}if(!(p&-1073741824)){if("+"==k)continue;if("-"==k){p=p<<2|1;continue}if("~"==
k||"^-"==k){p=p<<2|2;continue}if("^L"==k){p=p<<2|3;continue}}l=!0;break}if(void 0===J)if(f)f.push(h),J=0;else{l=!0;f=[];break}u.push(X(a,J));if(" "==k)if(c<b.length-1&&!b[c])c++,k=b[c++];else{l=!0;break}if(!k)break;p="<"==a.S[0]?af:bf;if(!p[k]){l=!0;break}B.length&&p[k]<=p[B[B.length-1]]&&Xe(a,u,B,1);B.push(k);a.T="^_"==k?10:e;p=0}if(l||!Xe(a,u,B)||1!=u.length)l=!0;l?f||a.u("parse error ("+(h||k)+")"):g=u.pop();a.T=z;return g}
function cf(a,b,c,d,e){for(var f;0<=(f=b.indexOf(c));){for(var g=0,h=f+1,k=e;h<b.length;){var l=b[h++];if(l==c){k=-1;break}if(!k)break;k--;l=l.charCodeAt(0);7==d?l&=127:l=l-32&63;g=X(a,g*Math.pow(2,d)+l,d*e,!0)}if(0<=k){a.u("parse error ("+c+b+c+")");return}b=b.substr(0,f)+L(a,g,-1)+b.substr(h)}return b}
function df(a,b,c){var d=void 0,e=!1===c;c=Array.isArray(c)?c:void 0;if(b){"{"!=a.S[0]&&(b=b.split(a.S[0]).join("{").split(a.S[1]).join("}"));b=cf(a,b,'"',7,5);if(!b)return d;b=cf(a,b,"'",6,6);if(!b)return d;16!=a.T&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=Ye(a,b,0,b.length,a.T,c);void 0!==d&&e&&ef(a,null,d)}return d}
function $e(a,b,c){for(;c;){switch(c&3){case 1:b=-X(a,b);break;case 2:b=We(a,b,-1);break;case 3:for(var d=35;0<=d&&!Ue(a,b,Math.pow(2,d));)d--;b=35-d}c>>>=2}return b}
function Ze(a,b,c,d,e){e=void 0===e?0:e;var f,g=Array.isArray(d)?d:void 0;if(null!=b){f=a.rb(b);if(0<=f)f=a.sb(f);else if(f=b,a.b[f]?f=a.b[f].value:(f=f.substr(0,6),f=a.b[f]&&a.b[f].value),null!=f){var h=a.b[b]&&a.b[b].Mb;h&&(g?g.push(h):(g=df(a,h,d),void 0!==g?f+=g:(d||a.u("undefined "+(c||"value")+": "+b+" ("+h+")"),f=void 0)))}else f=oa(b,1<b.length||10<a.T?a.T:10);null!=f?f=X(a,$e(a,f,e)):d||a.u("invalid "+(c||"value")+": "+b)}else d||a.u("missing "+(c||"value"));return f}
function ef(a,b,c){var d,e=!1;void 0!==c&&(e=!0,d=8==a.T?L(a,c,a.L,8,1)+"  "+c+".":L(a,c,a.L,16,1)+"  "+L(a,c,a.L,8,1)+"  "+L(a,c,a.L,2,32>=a.L?8:6)+"  "+c+".",32<=c&&127>c&&(d+=" '"+String.fromCharCode(c)+"'"));a.u((null!=b?b+": ":"")+d);return e}function ff(a){var b=a.b;a.b={};return b}function gf(a,b){var c=0;if(a.b){if(b)return ef(a,b,a.b[b]&&a.b[b].value);b=Object.keys(a.b);b.sort();for(var d=0;d<b.length;d++)ef(a,b[d],a.b[b[d]].value),c++}return 0<c}
function L(a,b,c,d,e){c=void 0===c?0:c;e=void 0===e?0:e;switch((void 0===d?0:d)||a.T){case 2:(a=0<c?c:0)?36<a&&(a=36):(a=Math.abs(b),a=255>=a?8:262143>=a?18:36);b=pa(b,2,a,"",e);break;case 8:b=qa(b,0<c?(c+2)/3|0:0,!!e);break;case 10:b=xa(b,0<c?Math.ceil(.3*c):0);break;default:b=n(b,0<c?c+3>>2:0,!!e)}0>c?c=b.replace(/^0+([0-9A-F]+)$/i,"$1"):c=b;return c}
var bf={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},af={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,_:19,"^_":19,"{":20,"}":20},Ve=Math.pow(2,32);
function hf(a){Se.call(this,a);this.Ia=!1;this.Fa=18;this.L=36;this.S=["<",">"];this.ta=[];this.Ha=Y();this.M=Y(0);this.oa=Y(0);this.ha=Y(0);this.I=[];this.i=this.N=this.K=[];jf(this);this.W=this.pa=0;this.j=[];this.Ba=void 0;kf(this);this.D=this;this.va={};this.da=this.Eb=0;this.Z=null;this.R=[];lf(this,a.messages);this.ua=a.commands;this.Ga=[];this.O=0;this.Na=this.Ca=null;this.F=this.Ka=this.Ja=this.na=this.xa=0;this.wa=this.ma=this.ca=null;var b=this;window?void 0===window[t]&&(window[t]=function(a){return kd(b,
a)}):void 0===global[t]&&(global[t]=function(a){return kd(b,a)})}la(hf,Se);function mf(a){a=a&&a.B;null==a&&(a=-1);return a}function Y(a,b,c){return{B:void 0===a?null:a,bb:void 0===b?!1:b,qa:!1,T:c}}function nf(a,b,c,d){a.B=b;a.bb=c||!1;a.qa=!1;a.T=d}function of(a){return[a.B,a.bb,a.qa,a.T,a.fb]}function pf(a,b){var c=Y(b[0],b[1],b[2]);c.qa=b[3];b[4]&&(c.zb=Te(a,c.fb=b[4]));return c}m=hf.prototype;
m.La=function(a,b,c,d){this.H=b;this.G=a;this.v=c;this.ma=a.j;this.Fa=b.F;(b=fd(a,"messages"))&&lf(this,b);if(a=fd(a,"commands"))this.ua=a;qf(this,function(a){a:{var b=d.H.b,c=a[0],e=a=0,k=b.length;if(c){a=mf(rf(d,c,d.oa));if(-1===a){d.u("invalid address: "+c);break a}e=a>>>d.H.i;k=1}d.u("blockid   physical   blockaddr  used    size    type");d.u("--------  ---------  ---------  ------  ------  ----");for(var c=-1,l=0;k--;){var p=b[e];p.type==c?l++||d.u("..."):(c=p.type,l=Qc[c],p&&d.u(n(p.id,8)+"  %"+
n(e<<d.H.i,8)+"  %"+n(p.B,8)+"  "+n(p.Wa,4,!0)+"  "+n(p.size,4,!0)+"  "+l),c!=Uc&&(c=-1),l=0);a+=16384;e++}}});Rb(this)};
m.sa=function(a,b,c){var d=this;switch(b){case "debugInput":return this.ca=this.J[b]=c,c.onkeydown=function(a){var b;if(13==a.keyCode)b=c.value,c.value="",kd(d,b,!0);else if(27==a.keyCode)c.value=b="";else if(38==a.keyCode?(b=null,d.C<d.w.length-1&&(b=d.w[++d.C])):40==a.keyCode&&(0<d.C?b=d.w[--d.C]:(b="",d.C=-1)),null!=b){var e=b.length;c.value=b;c.setSelectionRange(e,e)}null!=b&&a.preventDefault&&a.preventDefault()},!0;case "debugEnter":return this.J[b]=c,$a(c,function(){if(d.ca){var a=d.ca.value;
d.ca.value="";kd(d,a,!0);return!0}return!1}),!0;case "step":return this.J[b]=c,$a(c,function(a){var b=!1;Sb(d,!0)||(Tb(d,!0),b=yc(d,a?1:0,null),Tb(d,!1));return b}),!0}return!1};function jd(a){if(a.ca){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.ca.focus();window&&window.scrollTo(b,c)}}m.Ma=function(a,b){var c=-1,d=mf(a);-1!==d&&(c=Ec(this.H,d),b&&null!=a.B&&(a.B+=b||1));return c};m.yb=function(a,b,c){var d=mf(a);-1!==d&&(Dc(this.H,d,b),c&&null!=a.B&&(a.B+=c||1),K(this.G,-1))};
m.Ib=function(a,b){0>a&&(a+=E);0>b&&(b+=E);a=Fe.call(this.v,a,b,!1,!0);a>=C&&(a-=E);return a};
function rf(a,b,c){var d,e;c||(c=Y());var f=c.B;if(void 0!==b){a:{var g,f=a.S[0],h=a.S[1];g="("==f||"{"==f||"["==f?"\\":"";for(var k="["==f?"\\":"",k=new RegExp(g+f+"([^"+k+f+k+h+"]+)"+g+h);g=b.match(k);){var l=df(a,g[1]);if(void 0===l){b=void 0;break a}b=b.replace(f+g[1]+h,null!=l?L(a,l):"undefined")}if(a.ta.length)for(f=a.ta[0],h=a.ta[1],g="("==f||"{"==f||"["==f?"\\":"",k="["==f?"\\":"",k=new RegExp(g+f+"([^"+k+f+k+h+"]+)"+g+h);g=b.match(k);)b=b.replace("["+g[1]+"]","unimplemented");for(;f=b.match(/\$([a-z]+)/i);){h=
null;switch(f[1].toLowerCase()){case "ops":h=0}if(null==h)break;b=b.replace(f[0],h.toString())}}"%"==b.charAt(0)&&(d=!0,b=b.substr(1));var p,f=b,u;if(f.match(/^[a-z_][a-z0-9_]*$/i))for(f=f.toUpperCase(),h=0;h<a.I.length;h++)if(g=a.I[h].aa[f],null!=g){u=g.o;break}null!=u&&(p=Y(u));if(p)return p;0<=b.indexOf("0x")?e=16:0<=b.indexOf("0o")?e=8:0<=b.indexOf(".")&&(e=10);f=df(a,b)}null!=f&&(f=sf(f,a.Fa),nf(c,f,d,e));return c}function tf(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.zb=Te(a,b.fb=c[2]))}
function sf(a,b){0>a&&a>=-C&&(a+=E);return Math.trunc(Math.abs(a))%Math.pow(2,void 0===b?36:b)}function uf(a,b){return L(a,b/Yb,18)+" "+L(a,b%Yb,18)}
function lf(a,b){a.D=a;a.da=a.Eb=536870916;a.Z=null;a.R=[];b=Te(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in gc){var d;a:if(d=void 0,Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}0<=d&&(a.da|=gc[c],a.u(c+" messages enabled"))}}function qf(a,b){for(var c in gc)if(16==gc[c]){a.va[c]=b;break}}m.rb=function(a){return vf.indexOf(a.toUpperCase())};
m.sb=function(a){var b,c=this.v;switch(a){case wf:b=c.i;break;case xf:b=c.I;break;case yf:b=c.b;break;case zf:b=c.j&x;break;case Af:b=c.j&131072?1:0;break;case Bf:b=c.j&65536?1:0;break;case Cf:b=c.j&32768?1:0;break;case Df:b=c.j&8192?1:0;break;case Ef:b=c.j&32?1:0;break;case Ff:b=c.j&262144?1:0}return b};
m.message=function(a,b){b&&(a+=" @"+L(this,Y(this.v.oa).B,18));if(!this.Z||a!=this.Z)if(this.Z=a,this.da&1073741824)this.R.push(a);else{var c;if(this.da&-2147483648&&this.v&&(c=this.v.A.P)||Sb(this,!0))this.Y(),c&&(a+=" (cpu halted)");this.u(a);this.v&&(a=this.v,sd(a),a.ma=0,a.G&&K(a.G,void 0))}};
function kf(a){var b;if(!Ad(a))a.j&&a.j.length&&a.u("instruction history buffer freed"),a.W=0,a.j=[];else if(!a.j||!a.j.length){a.j=Array(Gf);for(b=0;b<a.j.length;b++)a.j[b]=Y();a.W=0;a.u("instruction history buffer allocated")}}function Hf(a,b,c){if(!If(a,c))return!1;xc(a.v,b);return!0}
function yc(a,b,c,d){if(!If(a))return!1;var e="";null===c&&(e=(c=!a.Ca||"tr"==a.Ca)?"tr":"t");a.F=0;b||Ad(a)&&Bd(a,a.v.i,0);try{b=qd(a.v,b);var f=a.v.Ya(b);0<f&&(zc(a.v,f),a.F+=f,Ac(a.v,f,!0),Bc(a.v,f),a.na++)}catch(g){"number"!=typeof g&&(a.F=0,Eb(a.v,g.stack||g.message))}!1!==d&&(a.ma&&a.ma.stop(),K(a.G,-1));id(a,c||!1,e);return 0<a.F}m.Y=function(a){this.v&&this.v.Y(a)};function id(a,b,c){b=void 0===b?!0:b;a.Ia&&(c&&a.u(Jf+c),nf(a.M,a.v.i),b&&1!=a.O?Kf(a):Lf(a))}
function If(a,b){var c;(c=!a.v||!Qb(a.v))||(c=a.v,c.A.ba?c=!0:(c.u(c.toString()+" not powered"),c=!1),c=!c);return c||a.v.A.P?(b||a.u("cpu busy or unavailable, command ignored"),!1):!Fb(a.v)}m.Aa=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};m.ra=function(a,b){b&&this.u(a?"suspending":"shutting down");return a?this.save():!0};m.reset=function(a){kf(this);this.na=0;this.Z=null;this.F=0;nf(this.M,this.v.i);this.A.P=!1;Mf(this);a||id(this)};
m.save=function(){var a=new G(this);a.set(0,of(this.M));a.set(1,of(this.oa));a.set(2,of(this.ha));a.set(3,[this.w,this.V,this.da]);a.set(4,this.I);return a.data()};m.restore=function(a){var b=0;void 0!==a[3]&&(this.M=pf(this,a[b++]),this.oa=pf(this,a[b++]),this.ha=pf(this,a[b++]),this.w=a[b][0],"string"==typeof this.w&&(this.w=[this.w]),this.V=a[b][1],this.da|=a[b][2]);a[4]&&(this.I=a[4]);return!0};m.start=function(a,b){this.O||this.u("running");this.A.P=!0;this.Ja=a;this.Ka=b};
m.stop=function(a,b){if(this.A.P){this.A.P=!1;this.F=b-this.Ka;if(!this.O){b="stopped";if(this.F){a-=this.Ja;var c=0<a?Math.round(1E3*this.F/a):0;b+=" (";Ad(this)&&(b+=this.na+" instructions, ",this.na=0);b+=this.F+" cycles, "+a+" ms, "+c+" hz)"}else Ub(this,-2147483648)&&(b+=" (use the 't' command to execute blocked faults)");this.u(b)}id(this,!0);jd(this);Mf(this,this.v.i);this.Z=null}};function Ad(a){return 1<a.i.length||!!a.pa}
function Bd(a,b,c){var d=-1;c||(d=a.v.f(b),2756==d>>23&&a.v.oa==b&&(b=yd(a.v,1)));if(0<c&&(a.pa&&!--a.pa||cd(a,b,1,a.i)))return!0;0<=c&&a.j.length&&(a.na++,0>d&&(d=a.v.f(b)),0<=d&&(nf(a.j[a.W],b),++a.W==a.j.length&&(a.W=0)));return!1}
function Nf(a,b,c,d){var e=Y(b.B),f=a.Ma(b,1),g,h,k,l=0,p=f/cc|0,u;for(u in Of)if(g=Of[u][p&u]){h=+u;p>>=6;switch(h){case 32512:k=Pf;l=p&3;break;case 32256:k=Qf;l=p&7;break;case 29248:k=Rf,l=(p&48)>>2|(p&6)>>1}break}k=k&&k[l]||"";"S"==k&&g>Sf&&(k="B");k=Tf[g||0]+k;if(g){if(28700==h)h=f/dc&127,l=L(a,h,-1);else for(h=f>>23&15,l=L(a,h,-1),p=0;l&&p<Uf.length;p++)if(g==Uf[p][0]&&(u=Uf[p][h])){k=Tf[u];l="";break}k=Da(k,8)+(l?l+",":"");f&4194304&&(k+="@");k+=L(a,f&262143,-1);(f=f>>18&15)&&(k+="("+L(a,f,
-1)+")")}else k=Da(k,8)+uf(a,f);f=k;g="";h=L(a,e.B,18)+":";if(-1!==e.B&&-1!==b.B){do if(k=a.Ma(e,1),g+=" "+uf(a,k),null==e.B)break;while(e.B!=b.B)}h+=Da(g,16)+f;c&&(h=Da(h,48)+";"+(c||""),h=a.v.A.Ta?h+("cycles="+ld(a.v).toString()+" cs="+n(a.v.Ga)):h+(null!=d?"="+d.toString():""));return h}
function Vf(a,b,c,d,e){var f=-1,g,h;if(b){for(var k=b.toUpperCase(),l=0;l<Uf.length;l++)for(var p in Uf[l])if(+p&&(h=Uf[l][p],k==Tf[h])){k=Tf[Uf[l][0]];c&&(c=L(a,+p)+","+c);break}for(var u in Of){g=+u;p=Of[u];switch(g){case 32512:l=Pf;break;case 32256:l=Qf;break;case 29248:l=Rf;break;default:l=[""]}for(var B in p){h=p[B];for(var z=0;z<l.length;z++){var J=l[z];"S"==J&&h>Sf&&(J="B");if(k==Tf[h]+J){f=29248!=g?z:(z&3)<<1|(z&12)<<2;f=(B|f<<6)*cc;break}}if(0<=f)break}if(0<=f)break}!(0>f)||c&&c.match(/^[0-9A-Z$%.?]/i)||
(c=b+c,b="",f=0)}else c&&(f=g=0);if(0<=f&&c)for(k=c.split(","),2<k.length&&(e||a.u("too many operands: "+c),k.length=0,f=-1),u=0;u<k.length;u++)if(h=k[u].trim()){B=h.match(/(@?)([^(]*)\(?([^)]*)\)?/);if(!B){e||a.u("unknown operand: "+h);f=-1;break}B[1]&&(f+=4194304);if(h=B[3]){h=df(a,h,e);if(void 0==h){f=-1;break}h=W(X(a,h,36,!0));f+=h}h=B[2];if(u||1==k.length)h=h?h.replace(/(^|[^0-9])\./g,"$1"+L(a,d,18)):"0";h=df(a,h,e);if(void 0==h){f=-1;break}if(!u&&1<k.length)if(28700==g){if(0>h||127<h)h&=127;
f+=h*dc}else{if(0>h||15<h)h&=15;f+=h<<23}else{if(b||u)if(0>h||262143<h)h&=Xb;f+=h}}0>f&&!e&&a.u("unknown instruction: "+b+" "+c);return f}function jf(a){var b,c;a.i=["bp"];if(a.N)for(b=1;b<a.N.length;b++){c=a.N[b];c=mf(c);var d=a.H;bd(d.b[c>>>d.i],!1)}a.N=["br"];if(a.K)for(b=1;b<a.K.length;b++)c=a.K[b],c=mf(c),d=a.H,bd(d.b[c>>>d.i],!0);a.K=["bw"];a.xa=0;a.pa=0}
m.Ra=function(a,b,c){var d=!0;c||Wf(this,a,b,!1,!0);if(a!=this.i){var e=mf(b);if(-1===e)this.u("invalid address: "+L(this,b.B,18)),d=!1;else{var f=this.H;f.b[e>>>f.i].Ra(e&16383,a==this.K)}}d&&(a.push(b),c?b.qa=!0:(Xf(this,a,a.length-1,"set"),kf(this)));return d};function Wf(a,b,c,d,e){var f=!1;c=mf(c);for(var g=1;g<b.length;g++){var h=b[g];if(c==mf(h)&&(!d||h.qa)){f=!0;h.qa||e||Xf(a,b,g,"cleared");b.splice(g,1);b!=a.i&&(d=a.H,bd(d.b[c>>>d.i],b==a.K));h.qa||kf(a);break}}return f}
function Yf(a,b){for(var c=1;c<b.length;c++)Xf(a,b,c);return b.length-1}function Xf(a,b,c,d){c=b[c];a.u(b[0]+" "+L(a,c.B,18)+(d?" "+d:c.fb?' "'+c.fb+'"':""))}function Mf(a,b){if(void 0!==b)cd(a,b,1,a.i,!0),a.O=0;else for(b=1;b<a.i.length;b++){var c=a.i[b];if(c.qa){if(!Wf(a,a.i,c,!0))break;b=0}}}
function cd(a,b,c,d,e){var f=!1;if(!a.xa++)for(var g=1;!f&&g<d.length;g++){var h=d[g];if(!e||h.qa)for(var k=mf(h)&(d==a.i?65535:-1),l=0;l<c;l++)if(b+l==k){var p,f=!0;h.qa&&(Wf(a,d,h,!0),e=!0);if(p=h.zb){for(var f=!1,u=0;u<p.length;u++)if(!Zf(a,p[u],!0)){if(p[u].indexOf("if")){f=!0;break}for(var B=u+1;B<p.length&&p[B].indexOf("else");B++)u++;if(B==p.length){f=!0;break}}a.v.A.P||(f=!0)}if(f){e||Xf(a,d,g,"hit");break}}}a.xa--;return f}
function $f(a,b){b=void 0===b?!0:b;for(var c="",d=0;16>d;d++){!d||d&3||(c+="\n");var e=a,f=qa(d,2);nf(e.Ha,d);f+="="+L(e,e.Ma(e.Ha),36)+" ";c+=f}if(b){b="";for(d=0;d<vf.length;d++)(e=vf[d]||"")&&(e+="="+L(a,a.sb(d),d>=Af?1:d==xf?23:18)+" "),b+=e;c+="\n"+b}return c}m.Gb=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function Me(a,b,c,d,e){var f=[],g;for(g in e){var h=e[g];"number"==typeof h&&(e[g]=h={o:h});var k=h.o,l=h.a;if(void 0!==k){var p=f,k=[k>>>0,g],u=Fa(p,k,a.Gb);0>u&&p.splice(-(u+1),0,k)}l&&(h.a=l.replace(/''/g,'"'))}a.I.push({Cd:b,B:c,Xb:d,aa:e,Bb:f})}function ag(a,b,c){var d=[],e=mf(b)>>>0;for(b=0;b<a.I.length;b++){var f=a.I[b],g=f.B>>>0,h=f.Xb;if(e>=g&&e<g+h){e=Fa(f.Bb,[e-g],a.Gb);0<=e?bg(a,b,e,d):c&&(e=~e,bg(a,b,e-1,d),bg(a,b,e,d));break}}return d}
function cg(a,b,c){var d=a.H,e=0,f=null,g=0;b.forEach(function(a,b){d.b[(b&d.j)>>>d.i].g(a,b&16383,b);null==f&&(f=b);b>g&&(g=b);e++});e?(b="start address ",null!=c?(H(a.v,c),b+=L(a,c)):b+="unspecified",a.u(e+" words loaded at "+L(a,f)+"-"+L(a,g)+", "+b),id(a)):a.u("no data")}function bg(a,b,c,d){var e={},f=a.I[b].Bb,g=0,h=null;0<=c&&c<f.length&&(g=f[c][0],h=f[c][1]);h&&(e=a.I[b].aa[h],h="."==h.charAt(0)?null:e.l||h);d.push(h);d.push(g);d.push(e.a);d.push(e.c)}
function dg(a,b){var c=b[0].substr(1),d=b[1]&&"0"<=b[1][0]&&"9">=b[1][0]?b[1]:void 0,e=d?b[2]:b[1],f=rf(a,d,a.ha);if(!e)return a.u("begin assemble at "+L(a,f.B,18)),a.V=!0,K(a.G),!0;var g=e.match(/^(['"]?)(.*?)(\.klm|\.mac|\.html|\.txt|)\1$/i);if(g&&(g[1]||g[3])){f=rf(a,d);if(a.wa)a.u("assembly already in progress");else{var h=g[2]+g[3];g[3]||(c+="s");var k=f.B,l=a.wa=new Hg(a);Jg(l,h,k,c,function(b,c){if(!b)try{var d=l.J;null==d&&(d=k);cg(a,l.U,d)}catch(z){"number"==typeof z?b=z||-1:(a.u(z.message),
b=-1)}b&&a.u("error ("+b+") processing "+(c||h));a.wa=null;b||kd(a)})}return!1}b.shift();b.shift();b.shift();b=Vf(a,e,b.join(""),f.B||0);0<=b&&(a.yb(f,b),a.u(Nf(a,f)));return!0}function Kg(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return gf(a)||a.u("no variables"),!0;if(!c[2])return gf(a,c[1]);if(!c[3])return delete a.b[c[1]],!0;b=df(a,c[3]);return void 0!==b?(a.b[c[1]]={value:b,Mb:void 0},!0):!1}a.u("invalid assignment:"+b);return!1}
function Lg(a,b,c){var d=null;b=rf(a,b);var e=ag(a,b,!0);if(e.length){var f,g;e[0]&&(g="",(f=b.B-e[1])&&(g=" + "+n(f,4,!0)),f=e[0]+" ("+L(a,e[1],18)+")"+g,c&&a.u(f),d=f);4<e.length&&e[4]&&(g="",(f=e[5]-b.B)&&(g=" - "+n(f,4,!0)),f=e[4]+" ("+L(a,e[5],18)+")"+g,c&&a.u(f),d||(d=f))}else c&&a.u("no symbols");return d}
function Kf(a,b){var c;if(b&&"?"==b[1])a.u("register commands:"),a.u("\tr\tdump registers"),a.u("\trm\tdump misc registers"),a.u("\trx [#]\tset flag or register x to [#]");else{var d=a.v,e=void 0;null==c&&(c=!0);if(b&&1<b.length){var f=b[1];if("m"==f)e=!0;else{var g=f.indexOf("=");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.u("missing value for "+b[1]);return}g=df(a,b);if(void 0===g)return;b=a.rb(f);if(0>b){a.u("unknown register: "+f);return}var f=0,h=a.v;switch(b){case wf:H(h,
g);nf(a.M,h.i);break;case zf:xd(h,g);break;case Af:f=131072;break;case Bf:f=65536;break;case Cf:f=32768;break;case Df:f=8192;break;case Ef:f=32;break;case Ff:f=262144}f&&(h.j=g?h.j|f:h.j&~f);K(a.G);a.u("updated registers:")}}a.u($f(a,e));c&&(nf(a.M,zd(d)),Lf(a,L(a,a.M.B,18)))}}function Mg(a,b){b=Ea(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.u(c[2]):ef(a,null,c[2].charCodeAt(0)):df(a,b,!1)}
function Ng(a,b,c){if("?"==c)a.u("trace commands:"),a.u("\tt  [#]\ttrace # instructions"),a.u("\ttr [#]\ttrace # instructions with register updates"),a.u("\ttc [#]\ttrace # cycles"),a.u("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=Ze(a,c,null,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.Ca=b;Za(c,function(){return Tb(a,!0)&&yc(a,e,d,!1)},function(){a.ma&&a.ma.stop();K(a.G,-1);Tb(a,!1)})}}
function Lf(a,b,c,d){b=rf(a,b,a.M);void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=Ze(a,c.substr(1)),null!=c&&(d=c);else{d=rf(a,c);if(d.B<b.B)return;e=d.B-b.B;if(256<e){a.u("range too large");return}d=-1}for(c=0;0<e&&d--;){var f=Sb(a,!1)||a.O?a.F:null,g=null!=f?"cycles":null,h=ag(a,b),k=b.B;if(h[0]&&d&&(!c&&d||0>h[0].indexOf("+"))){var l=h[0]+":";h[2]&&(l+=" "+h[2]);a.u(l)}h[3]&&(g=h[3],f=null);h=a.ha;l=b;h.B=l.B;h.bb=l.bb;h.qa=l.qa;h.T=l.T;a.u(Nf(a,b,g,f));e-=b.B-k;c++}}
function Zf(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.u(Jf+b):(a.V&&(a.u("ended assemble at "+L(a,a.ha.B,18)),a.V=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.Z=null;if(Qb(a)&&0<b.length){a.V&&(b="a "+L(a,a.ha.B,18)+" "+b);var f=!1,g=b,h;h=void 0===h?" ":h;for(var k=[],l="",p=0,u=0;p<g.length;){var B=g[p++];l?B==l&&(l="",k.push(g.substr(u,p-u)),u=p):'"'==B||"'"==B?l=B:0<=h.indexOf(B)&&(k.push(g.substr(u,p-u-1)),u=p)}u<p&&k.push(g.substr(u,p-u));k[0]=k[0].toLowerCase();if(k&&k.length)for(var z=
k[0],J=z.charAt(0),p=1;p<z.length;p++)if(B=z.charAt(p),"?"==J||"r"==J||"a">B||"z"<B){k[0]=z.substr(p);k.unshift(z.substr(0,p));break}switch(k[0].charAt(0)){case "a":d=dg(a,k);break;case "b":var Mc=k[0],ra=k[1],I=b;if("?"==ra)a.u("breakpoint commands:"),a.u("\tbp #\tset exec breakpoint"),a.u("\tbr #\tset read breakpoint"),a.u("\tbw #\tset write breakpoint"),a.u("\tbc #\tclear breakpoint (* to clear all)"),a.u("\tbl\tlist all breakpoints"),a.u("\tbn [#]\tbreak after # instruction(s)");else{var Pa=Mc.charAt(1);
if("l"==Pa){var Rd;Rd=0+Yf(a,a.i);Rd+=Yf(a,a.N);(Rd+=Yf(a,a.K))||a.u("no breakpoints")}else if("n"==Pa){var eg=+ra||0;ra&&(a.pa=eg);a.u("break after "+eg+" instruction(s)")}else if(void 0===ra)a.u("missing breakpoint address");else{var ja="*"==ra?Y():rf(a,ra,a.M);"c"==Pa?null==ja.B?(jf(a),a.u("all breakpoints cleared")):Wf(a,a.i,ja)||Wf(a,a.N,ja)||Wf(a,a.K,ja)||a.u("breakpoint missing: "+L(a,ja.B,18)):null!=ja.B&&(tf(a,ja,I),"p"==Pa?a.Ra(a.i,ja):"r"==Pa?a.Ra(a.N,ja):"w"==Pa?a.Ra(a.K,ja):a.u("unknown breakpoint command: "+
Pa))}}break;case "c":var fg=a.G;fg.F&&(fg.F.value="");break;case "d":a:{var kb,lb=k[0],sa=k[1],Ga=k[2],ei=k[3];if("?"==sa){var mb="";for(kb in gc)a.va[kb]&&(mb&&(mb+=","),mb+=kb);mb+=",state,symbols";a.u("dump memory commands:");a.u("\tdw [a] [n]    dump n words at address a");a.u("\tds [a] [n]    dump n words at address a as JSON");a.u("\tdh [p] [n]    dump n instructions from history position p");mb.length&&a.u("dump extension commands:\n\t"+mb)}else if("state"==sa){var Sd=Og(a.G,!0);if("console"==
Ga)console.log(Sd);else{var gg=a.G;gg.F&&(gg.F.value="");Sd&&a.u(Sd)}}else if("symbols"==sa)for(var Td=0;Td<a.I.length;Td++){var Ud=a.I[Td],nb;for(nb in Ud.aa)if("."!=nb.charAt(0)){var hg=Ud.aa[nb].o;if(void 0!==hg){var ig=Ud.aa[nb].l;ig&&(nb=ig);a.u(L(a,hg,18)+" "+nb)}}}else{if("d"==lb){for(kb in gc)if(k[1]==kb){var jg=a.va[kb];jg?(k.shift(),k.shift(),jg(k)):a.u("no dump registered for "+sa);break a}sa||(lb=a.Na||"dw")}else a.Na=lb;if("dh"==lb){var kg=sa,lg=Ga,mg="",ng=0,ka=a.W,ta=a.j;if(ta.length){var ga=
+kg||a.Ba,Gb=+lg||10;isNaN(ga)?ga=Gb:mg="more ";ga>ta.length&&(a.u("note: only "+ta.length+" available"),ga=ta.length);ka-=ga;0>ka&&(null==ta[ta.length-1].B?(ga=ka+ga,ka=0):ka+=ta.length);var Vd=[];"call"==lg&&(Gb=1E5,Vd=["CALL"]);for(void 0!==kg&&a.u(ga+" instructions earlier:");0<Gb&&ka!=a.W;){var og=ta[ka++];if(null==og.B)break;var Hb=Y(og.B),fi=ga--,pg=Nf(a,Hb,"history",fi);(!Vd.length||0<=pg.indexOf(Vd[0]))&&a.u(pg);Hb.pb&&(ka+=Hb.pb,Gb-=Hb.pb,ga-=Hb.pb);ka>=ta.length&&(ka=0);a.Ba=ga;ng++;Gb--}}ng||
(a.u("no "+mg+"history available"),a.Ba=void 0)}else{var Qa=0,qg="ds"==lb,Ib=rf(a,sa,a.oa);Ga&&("l"==Ga.charAt(0)?(Ga=Ga.substr(1)||ei,Qa=Ze(a,Ga)):Qa=rf(a,Ga).B-Ib.B,0>Qa&&(Qa=0),65536<Qa&&(Qa=65536));var gi=a.T;Ib.T&&(a.T=Ib.T);for(var rg="db"==lb?1:2,Wd=Qa||32,Xd=1==rg?1:4,hi=(Wd+Xd-1)/Xd|0||1,Ra="";hi--&&0<Wd;){for(var ua="",Yd="",sa=L(a,Ib.B,18),sg=Xd;0<sg--&&0<Wd--;){var Zd=a.Ma(Ib,1);qg?(ua&&(ua+=","),ua+=Zd):(ua+=uf(a,Zd),ua+="  ");for(var Nc=29,ii=0;1==rg&&0<=Nc;ii++)var Jb=Zd/Math.pow(2,
Nc)%Math.pow(2,7),ua=ua+(L(a,Jb,7)+" "),Jb=Jb+0,Yd=Yd+(32>Jb?".":String.fromCharCode(Jb)),Nc=Nc-7}Ra&&(Ra+="\n");Ra=qg?Ra+(ua+","):Ra+(sa+": "+ua+(0>sg?" "+Yd:""))}Ra&&a.u(Ra);a.T=gi}}}break;case "e":if("else"==k[0])break;var tg,ug,vg=k[0],$d=k[1];"e"==vg||"ew"==vg?(tg=a.Ma,ug=a.yb):$d=null;if(null==$d)a.u("edit memory commands:"),a.u("\tew [a] [...]  edit words at address a");else for(var ae=rf(a,$d,a.oa),be=2;be<k.length;be++){var Kb=df(a,k[be]);if(void 0===Kb)break;Kb=sf(Kb);a.u("changing "+L(a,
ae.B,18)+" from "+uf(a,tg.call(a,ae))+" to "+uf(a,Kb));ug.call(a,ae,Kb,1)}break;case "g":var wg=k[1],ji=b;if(void 0!==wg){var xg=rf(a,wg);tf(a,xg,ji);a.Ra(a.i,xg,!0)}Hf(a,!0,c);break;case "h":a.A.P?(c||a.u("halting"),a.Y()):Sb(a,!0)||c||a.u("already halted");break;case "i":if("if"==k[0]){var ce;var Lb=b.substr(2),Lb=Ea(Lb);df(a,Lb)?(c||a.u("true: "+Lb),ce=!0):(c||a.u("false: "+Lb),ce=!1);ce||(d=!1);break}f=!0;break;case "k":var ki=k[0];if("?"==k[1])a.u("stack trace commands:"),a.u("\tk\tshow frame addresses"),
a.u("\tks\tshow symbol information");else{var de=0,ee=Y(),Mb=Y();for(a.u("stack trace for "+L(a,Mb.B,18));10>de;){for(var Sa=null,li=256;65536>Mb.B>>>0;){ee.B=a.Ma(Mb,2);if(null==Mb.B||!li--)break;if(!(ee.B&1)){for(var mi=a,Oc=ee,yg=null,Nb=Oc.B,zg=Nb,fe=1;6>=fe&&Nb;fe++){if(2<fe){Oc.B=Nb;var Pc=Nf(mi,Oc);if(0<=Pc.indexOf("JSR")){var Ag=Pc.indexOf(" ");if(Nb+(Pc.indexOf(" ",Ag+1)-Ag-1)/2==zg){yg=Pc;break}}}Nb-=2}Oc.B=zg;if(Sa=yg)break}}if(!Sa||null==Sa)break;var Bg=null;if("ks"==ki){var Cg=Sa.match(/[0-9A-F]+$/);
Cg&&(Bg=Lg(a,Cg[0]))}Sa=Da(Sa,50)+"  ;"+(Bg||"stack="+L(a,Mb.B,18));a.u(Sa);de++}de||a.u("no return addresses found")}break;case "l":if("ln"==k[0]){Lg(a,k[1],!0);break}f=!0;break;case "m":a:{var va,wa=null,N=k[1];"?"==N&&(N=void 0);if(void 0!==N){var Ha=0;if("all"==N)Ha=1879046143,N=null;else if("on"==N)wa=!0,N=null;else if("off"==N)wa=!1,N=null;else{"keys"==N&&(N="key");"kbd"==N&&(N="keyboard");for(va in gc)if(N==va){Ha=gc[va];wa=!!(a.da&Ha);break}if(!Ha){a.u("unknown message category: "+N);break a}}if(Ha)if("on"==
k[2])a.da|=Ha,wa=!0;else if("off"==k[2]&&(a.da&=~Ha,wa=!1,1073741824==Ha)){for(var Dg=1E3<=a.R.length?a.R.length-1E3:0;Dg<a.R.length;)a.u(a.R[Dg++]);a.R=[]}}var ni=0,Ob="";for(va in gc)if(!N||N==va){var oi=!!(a.da&gc[va]);if(null===wa||wa==oi)Ob&&(Ob+=","),++ni%10||(Ob+="\n\t"),"key"==va&&(va="keys"),Ob+=va}void 0===N&&a.u("message commands:\n\tm [category] [on|off]\tturn categories on/off");a.u((null!==wa?wa?"messages on:  ":"messages off: ":"message categories:\n\t")+(Ob||"none"));kf(a)}break;case "p":if("print"==
k[0]){Mg(a,b.substr(5));break}var Eg=k[0],Fg="p"==Eg?0:"pr"==Eg?1:-1;if("?"==k[1]||0>Fg)a.u("step commands:"),a.u("\tp\tstep over instruction"),a.u("\tpr\tstep over instruction with register update");else if(a.O)a.u("step in progress");else{var Gg=Y(a.v.i);a.Ma(Gg);a.O?(a.Ra(a.i,Gg,!0),Hf(a)||(a.G&&pd(a.G),a.O=0)):Ng(a,Fg?"tr":"t")}break;case "r":if("reset"==b){a.G&&a.G.reset();break}Kf(a,k);break;case "s":a:switch(k[1]){case "base":if(k[2]){var ob=+k[2];if(2==ob||8==ob||10==ob||16==ob)a.T=ob;else{a.u("invalid base: "+
ob);break}}a.u("default base: "+a.T);break;case "cs":var Pb;void 0!==k[3]&&(Pb=+k[3]);switch(k[2]){case "int":a.v.pa=Pb;break;case "start":a.v.Ha=Pb;break;case "stop":a.v.ua=Pb;break;default:a.u("unknown cs option");break a}void 0!==Pb&&hd(a.v);a.u("checksums "+(a.v.A.Ta?"enabled":"disabled"));break;case "sp":void 0!==k[2]&&(md(a.v,+k[2])||a.u("warning: using 1x multiplier, previous target not reached"));a.u("target speed: "+(a.v.ca.toFixed(2)+"Mhz")+" ("+a.v.ha+"x)");break;default:if(k[1]){a.u("unknown option: "+
k[1]);break}case "?":a.u("debugger options:"),a.u("\tbase #\t\tset default base to #"),a.u("\tcs int #\tset checksum cycle interval to #"),a.u("\tcs start #\tset checksum cycle start count to #"),a.u("\tcs stop #\tset checksum cycle stop count to #"),a.u("\tsp #\t\tset speed multiplier to #")}break;case "t":Ng(a,k[0],k[1]);break;case "u":Lf(a,k[1],k[2],8);break;case "v":if("var"==k[0]){Kg(a,b.substr(3))||(d=!1);break}if("ver"==k[0]){a.u((Wb||"PDP10")+" version 1.36.0 ("+a.v.jb+",RELEASE)");a.u(window?
window.navigator.userAgent:"");break}f=!0;break;case "?":if(k[1]){Mg(a,b.substr(1));break}var ge="commands:",he;for(he in Pg)ge+="\n"+Da(he,9)+Pg[he];Ad(a)||(ge+="\nnote: history disabled if no exec breakpoints");a.u(ge);break;default:f=!0}f&&(a.u("unknown command: "+b),d=!1)}}catch(Ig){a.u("Debugger "+(Ig.stack||Ig.message)),d=!1}return d}function kd(a,b,c){null!=b&&(a.Ga=Te(a,b,c));for(;b=a.Ga.shift();)if(!Zf(a,b))return!1;return!0}
var Pg={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},Sf=20,Tf=".WORD HLL HLLZ HLLO HLLE HRL HRLZ HRLO HRLE HRR HRRZ HRRO HRRE HLR HLRZ HLRO HLRE MOVE MOVS MOVN MOVM EXCH BLT PUSH POP LDB DPB IBP ILDB IDPB SETZ SETO SETA SETCA SETM SETCM AND ANDCA ANDCM ANDCB IOR ORCA ORCM ORCB XOR EQV LSH LSHC ROT ROTC ADD SUB MUL IMUL DIV IDIV ASH ASHC FSC FADR FSBR FMPR FDVR DFN UFA FAD FSB FMP FDV AOBJP AOBJN CAI CAM JUMP SKIP AOJ AOS SOJ SOS TR TL TD TS XCT JFFO JFCL JSR JSP JRST JSA JRA PUSHJ POPJ BLKI DATAI BLKO DATAO CONO CONI CONSZ CONSO UUO JOV JCRY0 JCRY1 JCRY JFOV HALT JRSTF JEN".split(" "),
wf=0,xf=1,yf=2,zf=3,Af=4,Bf=5,Cf=6,Df=7,Ef=8,Ff=9,vf="PC RA EA PS OV C0 C1 BI ND PD".split(" "),Qg={},Of=(Qg[28672]={0:101},Qg[32704]={5632:64,5696:63,5760:58,5824:27,5888:28,5952:25,6016:29,6080:26,10240:56,10304:48,10368:46,10432:84,10496:57,10560:49,10624:47,10752:21,10816:22,10880:69,10944:70,11008:88,11072:85,11136:83,11264:91,11328:23,11392:24,11456:92,11520:86,11584:87,11648:89,11712:90},Qg[32512]={6144:65,6400:59,6656:66,6912:60,7168:67,7424:61,7680:68,7936:62,8192:17,8448:18,8704:19,8960:Sf,
9216:53,9472:52,9728:55,9984:54,11776:50,12032:51,16384:30,16640:36,16896:37,17152:34,17408:38,17664:32,17920:44,18176:40,18432:39,18688:45,18944:33,19200:41,19456:35,19712:42,19968:43,20224:31,20480:1,20736:5,20992:2,21248:6,21504:3,21760:7,22016:4,22272:8,22528:9,22784:13,23040:10,23296:14,23552:11,23808:15,24064:12,24320:16},Qg[32256]={12288:71,12800:72,13312:73,13824:74,14336:75,14848:76,15360:77,15872:78},Qg[29248]={24576:79,24640:80,25088:81,25152:82},Qg[28700]={28672:93,28676:94,28680:95,28684:96,
28688:97,28692:98,28696:99,28700:100},Qg),Pf=["","I","M","S"],Qf=" L E LE A GE N G".split(" "),Rf="N NE NA NN Z ZE ZA ZN C CE CA CN O OE OA ON".split(" "),Uf=[{0:85,8:102,4:103,2:104,6:105,1:106},{0:88,4:107,2:108,10:109}],Gf=1E3,Jf=">> ";bb(function(){for(var a=v(document,t,"debugger"),b=0;b<a.length;b++){var c=a[b],d=w(c),d=new hf(d);ub(d,c)}});function Hg(a){this.b=a}
function Rg(a,b,c,d){a.la=b;a.W=(c||"").toLowerCase();a.done=d;a.R=0;a.H=[];a.N=[];a.D=[];a.v={};a.K={};a.M=[];a.L=[];a.U=[];a.fa=[];a.Z=[];a.ia=0;a.V=0;a.ca=0;a.X=a.la||0;a.Da=-1;a.G=[];a.S=null;a.i=0;a.I=null;a.C=a.O="";a.ha=/^[ \t]*([A-Z$%.?][0-9A-Z$%.]*:|)[ \t]*([A-Z$%.][0-9A-Z$%.]*|)([ \t]*)([^;]+|)(;?[\s\S]*)/i;a.j=null;a.w=null;a.F="";a.J=null}
function Jg(a,b,c,d,e){d&&0<=d.indexOf("s")?(Rg(a,c,d,e),a.D=b.split(/(\r?\n)/),a.N.push(a.D.length),Sg(a),a.done&&a.done(a.V)):(Rg(a,c,d,e),a.H=b.split(";"),Tg(a))}
function Tg(a){if(a.R==a.H.length)Sg(a),a.done&&a.done(a.V);else{var b=a.H[a.R];a.u("loading "+ya(b));0>b.indexOf(":")&&0<=".MAC.KLM".indexOf(b.slice(-4).toUpperCase())&&(b+=".txt");La(b,null,!0,function(b,d,e){if(e)a.done&&a.done(e,b);else{e=d;if(Aa(b,".html")){e="";var c;for(b=/<pre>([\s\S]*?)<\/pre>/gi;c=b.exec(d);)c=c[1],0<=c.indexOf("&")&&(c=c.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")),e+=c;(c=e.match(/&[a-z]+;/i))&&Ug(a,"unrecognized HTML entity '"+c[0]+"'")}d=e.split(/(\r?\n)/);
if(d.length&1){if(c=d.pop())Ug(a,"unexpected line '"+c+"'"),d.push(c),d.push("")}else Ug(a,"unexpected number of lines ("+d.length+")");a.D=a.D.concat(d);a.N[a.R]=d.length>>1;a.R++;setTimeout(function(){Tg(a)},0)}})}}
function Sg(a){if(0<=a.W.indexOf("p"))a.u(a.D.join(""));else{var b=ff(a.b);Vg(a,"APR",0);Vg(a,"PI",4);try{for(var c=0;c<a.D.length;c+=2){a.ia++;0<=a.W.indexOf("l")&&a.u(Wg(a)+": "+a.D[c]);if(!Xg(a,a.D[c]+"\r\n"))break;if(null!==a.J)break}a.i&&a.error("open block",a.v[a.I].ia);a.G.length&&a.error("open scope",a.G[0].ia);Yg(a);Zg(a);a.fa.forEach(function(b,c){b=$g(a,b,void 0,c,a.Z[c]);void 0!==b&&(b+=a.U[c],a.U[c]=ah(a,b,c))})}catch(d){a.u(d.message),a.V=-1}0>a.W.indexOf("d")&&(a.b.b=b)}}
function Xg(a,b,c,d,e){var f,g;null!=a.w&&(b=bh(a,b));for(var h=!0,k="";h;){g=b.match(a.ha);if(!g||g[5]&&";"!=g[5].slice(0,1))return a.error("failed to parse line '"+b+"'"),!1;h=!1;k=g[2].toUpperCase();if(k==ch||k==dh)c=null;if(c){for(f=0;f<c.length;f++){var l=c[f],p=a.v[a.I];if(!(p&&0<=p.Pa.indexOf(l)))for(var p=d[f]||e[f]||"",u=0,B=b.length-g[5].length;u<B;){var z=b.indexOf(l,u);if(0>z)break;var u=z+1,J=z+l.length,Mc="",ra="";z&&(Mc=b[z-1]).match(/[0-9A-Z$%.]/i)||!(J>=b.length)&&(ra=b[J]).match(/[0-9A-Z$%.]/i)||
("'"==Mc&&z--,"'"==ra&&J++,b=b.substr(0,z)+p+b.substr(J),u=z+p.length,h=!0)}}c=null}if(a.i&&(1==a.i&&(f=b.indexOf(a.C),0<=f?(a.i++,b=b.substr(f+1)):a.error("expected "+a.S+" definition in '"+b+"'")),1<a.i&&(b=eh(a,b),h=!0),a.i))return!0}d=g[1];b=g[3];c=g[4].trim();g=g[4]+g[5];d&&(d=d.slice(0,-1),Vg(a,d,a.X,fh));var I;k&&(I=c.match(/^([=:]+)(.*)/))&&(e=0,d=k,k=I[1],c=I[2],"=="==k?e|=gh:"=:"==k&&(e|=hh),Vg(a,d,c,e),k=c="");if(!k&&!c)return!0;a.S=k;if(I=ih(a,c))c=c.replace(I,jh(a,kh,ih(a,g))),b||(b=
"\t");for(;I=lh(a,c);)c=c.replace(I,I.slice(0,-1));if(!mh(a,k,c))switch(k){case nh:case oh:case ph:bh(a,g);break;case qh:k=c;I=$g(a,k);void 0!==I&&0<=I&&262143>=I?a.X+=I:a.error("unrecognized BLOCK expression '"+k+"'");break;case rh:k=c;b=g=0;for(c=36;I=sh(a,k);){k=k.substr(I.length).trim();d=I;if(e=I.match(/^\((.*)\)\s*(.*)$/))e[1]&&(g=$g(a,"^D"+e[1])),d=e[2];if(g){d=d?$g(a,d):0;if(void 0===d||0>g||36<g){a.error("unexpected BYTE operand: "+I);break}d=X(a.b,d,g,!0);c<g&&(th(a,b),b=0,c=36);b+=d*Math.pow(2,
c-g);c-=g}else th(a,0)}36>c&&th(a,b);break;case uh:(k=c)?(a.J=$g(a,k),void 0===a.J&&a.error("unrecognized END expression '"+k+"'")):a.J=a.la;break;case vh:wh(a,c);break;case xh:Yg(a);break;case yh:a.X=$g(a,c)||0;break;case zh:Zg(a);break;case Ah:wh(a,c.replace(",",",,"));break;case Bh:case Ch:case Dh:case Eh:case Fh:case Gh:case Hh:case Ih:case Jh:case Kh:case Lh:case Mh:case ch:case dh:case Nh:case Oh:jh(a,k,g);break;case Ph:k=Qh(a,c);for(I=0;I<k.length;I++)delete a.b.b[k[I]],delete a.K[k[I]];break;
case Rh:case Sh:case Th:case Uh:case Vh:case Wh:case Xh:case Yh:break;default:wh(a,k,b,c)}return!0}
function mh(a,b,c){var d=a.v[b];if(!d)return!1;if(null!=c){if(d.Ea==Zh){var e=a.X;Z(a,d.ka);if(e<a.X){if(!c)return!0;$h(a);Z(a,c);var d=a.U[0],f=a.fa[0];ai(a);if(void 0!==d)return a.U[e]+=d&130023423,a.U[e]+=d&4194304,f&&(a.fa[e]=a.fa[e]?a.fa[e]+("+"+f):f),!0}a.error("OPDEF '"+b+"' ("+c+") failed");return!1}b=a.j;a.j=d;d.Qa=Qh(a,c,!0);Z(a,d.ka,d.Pa,d.Qa,d.Ab);a.j=b;return!0}if("?"!=b[0])return!1;switch(b.substr(1)){case Fh:case Eh:case Mh:d.Ea||Z(a,d.ka);break;case Gh:0<d.Ea&&Z(a,d.ka);break;case Hh:0<=
d.Ea&&Z(a,d.ka);break;case Jh:0>d.Ea&&Z(a,d.ka);break;case Kh:0>=d.Ea&&Z(a,d.ka);break;case Ch:case Lh:case Dh:case Ih:d.Ea&&Z(a,d.ka);break;case ch:case dh:for(b=0;b<d.Qa.length;b++)Z(a,d.ka,d.Pa,[d.Qa[b]],[]);break;case Oh:for(;0<d.Ea--;)Z(a,d.ka);break;default:c=d.ka,$h(a,b),Z(a,c),ai(a)}return!0}function Z(a,b,c,d,e){b=b.split(/\r?\n/);for(var f=0;f<b.length&&Xg(a,b[f]+"\r\n",c,d,e);f++);}
function $h(a,b){a.G.push({name:b,U:a.U,fa:a.fa,X:a.X,Da:a.Da,ia:a.ia});a.U=[];a.fa=[];0>a.Da&&(a.Da=a.X);a.X=0}function ai(a){if(a.G.length){var b=a.G[a.G.length-1].name;b&&a.M.push({name:b,U:a.U,fa:a.fa});b=a.G.pop();a.U=b.U;a.fa=b.fa;a.X=b.X;a.Da=b.Da;a.G.length||-1==a.Da||a.error("scope restore error")}else a.error("scope nesting error")}
function sh(a,b){var c;c=void 0===c?",":c;for(var d=0,e=!1,f=null,g=0;d<b.length;){var h=b[d++];if('"'==h)e=!e;else if(!e){if(!g&&0<=c.indexOf(h)){d--;break}if("<"==h)g++;else if(">"==h&&0>--g){a.error("missing bracket(s) in '"+b+"'");break}}}g?0<g&&a.error("extra bracket(s) in '"+b+"'"):f=b.substr(0,d);return f}
function $g(a,b,c,d,e){var f=-1;void 0===d&&(d=0<=a.Da?a.Da:a.X);var g=b.replace(/SIXBIT\s*(\S)(.*?)\1/g,"'$2'").replace(/ASCII\s*(\S)(.*?)\1/g,'"$2"');if(c){var h="",k=g;if(f=g.match(/^([^\s]+)\s*(.*?)\s*$/))h=f[1],k=f[2];f=Vf(a.b,h,k,d,c)}0>f&&(g=g.replace(/\.([^0-9]|$)/g,L(a.b,d,-1)+"$1"),f=df(a.b,g,c),void 0===f&&a.error("unable to parse expression '"+b+"'",e));return f}
function ih(a,b){for(var c=0,d="",e=0,f=-1,g=b.length;e<b.length;){var h=b[e];if(";"==h)break;"["==h&&(c++||(f=e));e++;if("]"==h&&0>=--c){g=e;break}}0>c&&a.error("missing bracket(s) in '"+b+"'");0<=f&&(d=b.substr(f,g-f));return d}function Wg(a,b){b=void 0===b?a.ia:b;for(var c=0;b>a.N[c];)if(b-=a.N[c],c<a.H.length-1)c++;else break;return ya(a.H[c]+" line "+b)}
function lh(a,b){var c=null;if(b=b.match(/([A-Z$%.][0-9A-Z$%.]*)#/i)){c=b[0];b=b[1];var d="?"+b;if(!a.v[d]){var e,f,g;e=f=g=[];a.v[d]={name:d,Ea:bi,Pa:e,Ab:f,Qa:g,ka:b+": 0",ia:a.ia};a.L.push(d)}}return c}
function Qh(a,b,c){var d=[];for(c&&(b=b.replace(/^\(?(.*?)\)?$/,"$1"));b;){b=b.trim();c=sh(a,b);if(!c)break;var e=c;if("\\"==c[0]){var f=1,g=0;"'"==c[1]?(f++,g=6):'"'==c[1]&&(f++,g=7);var e=a,f=c.substr(f),g=void 0===g?0:g,h=$g(e,f);if(void 0!==h){var k=5;switch(g){case 0:f=L(e.b,h,-1);break;case 6:k++;case 7:for(;h&&k--;)h=Math.trunc(h/Math.pow(2,g))}}e=f}d.push(e);b=b.substr(c.length+1)}return d}
function bh(a,b){var c=b;null==a.w&&(a.w=a.F="",b&&(a.w=b[0],c=b=b.substr(1)));if(a.w){var d=b.indexOf(a.w);0>d?c="":(c=b.substr(d+1),b=b.substr(0,d),a.w=null);a.F+=b}if(null==a.w){var d=b=0,e,f,g=a.F.length;a.S==oh&&g++;for(var h=0;h<g;h++){b||(d=0,f=29,e=7,a.S==ph&&(e--,f++));var k=a.F.charCodeAt(h)&127;6==e&&(97<=k&&122>=k&&(k-=32),k=k+32&63);d+=k*Math.pow(2,f);f-=e;b++;0>f&&(th(a,d),b=0)}b&&th(a,d)}return c}
function jh(a,b,c){var d,e,f,g,h,k;a.C="<";a.O=">";g=h=k=[];if(b==Bh){e=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*(\([^)]*\)|)\s*,?\s*(<|)([\s\S]*)/i);if(!e)return a.error("unrecognized "+b+" in '"+c+"'"),c;f=e[1];if(e[2]&&","!=e[2]){h=g=Qh(a,e[2],!0);b=[];for(c=0;c<h.length;c++)if(d=h[c].indexOf("<"),0<=d){var l=h[c].lastIndexOf(">");0>l&&(l=h[c].length);b[c]=h[c].substr(d,l-d);h[c]=h[c].substr(0,d)}h=b}d=ci;b=3}else if(b==Nh){a.C="[";a.O="]";e=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*(\[)([\s\S]*)/i);if(!e)return a.error("unrecognized "+
b+" in '"+c+"'"),c;f=e[1];d=Zh;b=2}else if(b==kh)a.C="[",a.O="]",f="?"+xa(++a.ca,5),a.v[f]&&a.error("literal symbol '"+f+"' redefined"),e=[c[0],c.substr(1)],d=di,b=0;else if(b==ch||b==dh){a.j||a.error(b+" outside of macro");e=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*,\s*(<|)([\s\S]*)/i);if(!e)return a.error("unrecognized "+b+" operands '"+c+"'"),c;for(d=0;d<a.j.Pa.length&&e[1]!=a.j.Pa[d];d++);if(d==a.j.Pa.length)return a.error("invalid "+b+" parameter '"+e[1]+"'"),c;f="?"+b;g=[e[1]];b==dh?k=a.j.Qa[d].split(""):
k=Qh(a,a.j.Qa[d]);d=k.length;b=2}else{if(b==Ch)d=1,","==c[0]&&(c=c.substr(1).trim());else{e=sh(a,c);if(!e)return a.error("missing "+b+" expression '"+c+"'"),c;c=c.substr(e.length+1);e=e.trim();if(b==Eh||b==Ih){f=sh(a,c);if(!f)return a.error("missing second "+b+" expression '"+c+"'"),c;c=c.substr(f.length+1)}d=b==Dh||b==Mh?a.v[e]||a.K[e]||void 0!==a.b.b[e]?1:0:$g(a,e)||0}e=c.match(/\s*(<|)([\s\S]*)/i);f="?"+b;b=1}f=f.toUpperCase();a.i=1;a.I=f;a.v[f]={name:f,Ea:d,Pa:g,Ab:h,Qa:k,ka:"",ia:a.ia};e[b]&&
(a.i=2,eh(a,e[b+1]));return f}function eh(a,b){for(var c="",d=0;d<b.length;d++)if(b[d]==a.C)a.i++;else if(b[d]==a.O&&(a.i--,1==a.i)){a.i=0;c=b.substr(d+1);b=b.substr(0,d);break}d=a.I||"";a.v[d].ka+=b;a.i||(a.I=null,mh(a,d));return c}
function Vg(a,b,c,d){d=void 0===d?0:d;b=b.toUpperCase().substr(0,6);if(d&fh&&a.K[b])a.error("redefined label '"+b+"'");else{var e=void 0;if("string"==typeof c){var e=[],f=$g(a,c,e);if(void 0===f){a.error("invalid symbol '"+b+"': "+c);return}1<e.length&&a.error("too many undefined symbols in '"+b+"': "+e.join());c=f;e=e[0]}(f=a.K[b])?(f.value=c,f.Yb=d,f.ia=a.ia):a.K[b]={name:b,value:c,Yb:d,ia:a.ia};a.b.b[b]={value:c,Mb:e}}}
function wh(a,b,c,d){var e=[];b=(b+(void 0===c?"":c)+(void 0===d?"":d)).trim();c=$g(a,b,e);void 0!==c?e.length?1==e.length?th(a,c,e[0]):th(a,0,b):th(a,c):a.error("unrecognized word expression '"+b+"'")}
function Yg(a){for(var b=a.X,c={},d=0;d<a.M.length;c={U:c.U,Sa:c.Sa,za:c.za},d++){c.za=a.M[d];c.U=[];c.Sa=0;c.za.U.forEach(function(a){return function(b,c){c===a.U.length&&a.U.push(b);a.Sa++}}(c));if(c.Sa==c.U.length)for(var e=b;e+c.Sa<=a.X;e++){for(var f=void 0,f=0;f<c.Sa&&c.U[f]===a.U[e+f]&&c.za.fa[f]==a.fa[e];f++);if(f==c.Sa){Vg(a,c.za.name,e,fh);c.za=null;break}}if(c.za){var g=a;Vg(a,c.za.name,a.X,fh);c.za.U.forEach(function(a){return function(b,c){th(g,b,a.za.fa[c])}}(c))}}a.M=[]}
function Zg(a){for(var b=0;b<a.L.length;b++){var c=a.L[b],d=a.v[c];d?Z(a,d.ka):a.error("missing definition for variable '"+c+"'")}a.L=[]}function th(a,b,c){a.U[a.X]=ah(a,b);void 0!==c&&(a.fa[a.X]=c);a.Z[a.X]=a.ia;a.X++}function ah(a,b,c){c=void 0===c?a.X:c;var d=X(a.b,b||0,36,!0);(b<-C||b>=E)&&Ug(a,"truncated value "+qa(b)+" at location "+qa(c)+" to "+qa(d));return d}Hg.prototype.error=function(a,b){throw Error("error in "+Wg(this,b)+": "+a);};
function Ug(a,b){a.u("warning in "+Wg(a,void 0)+": "+b)}Hg.prototype.u=function(a){this.b?this.b.u(a):console.log(a)};
var fh=1,gh=2,hh=4,nh="ASCII",oh="ASCIZ",qh="BLOCK",rh="BYTE",Bh="DEFINE",uh="END",vh="EXP",Ch="IF1",Dh="IFDEF",Eh="IFDIF",Fh="IFE",Gh="IFG",Hh="IFGE",Ih="IFIDN",Jh="IFL",Kh="IFLE",Lh="IFN",Mh="IFNDEF",ch="IRP",dh="IRPC",Rh="LALL",xh="LIT",kh="LITERAL",Sh="LIST",yh="LOC",Th="NOSYM",Nh="OPDEF",Uh="PAGE",Ph="PURGE",Oh="REPEAT",ph="SIXBIT",Vh="SUBTTL",Wh="TITLE",zh="VAR",Xh="XALL",Ah="XWD",Yh="XLIST",ci=-1,Zh=-2,di=-3,bi=-4;
function pi(a,b,c){r.call(this,"Computer",a,33554432);this.A.ba=!1;this.S=null;qi(this,b);this.O=fd(this,"autoPower",a,6);this.w=0;this.Z=+a.busWidth||+a.buswidth;this.M=this.I=this.N=null;this.L=this.W=!1;this.K=this.C=null;this.V=this.R=!1;this.ca=fd(this,"url")||"";(Math.random()+.1).toString(36);this.i=ri(this);if(this.v=xb("CPU",this.id)){this.D=xb("Debugger",this.id);this.H=new Fc({id:this.$a+".bus",busWidth:this.Z},this.v,this.D);var d,e=vb(this.id);if(this.F=(this.j=xb("Panel",this.id))&&
this.j.J.print)for(b=0;b<e.length;b++)d=e[b],d.ja=this.j.ja,d.print=this.j.print,d.u=this.j.u;this.u(Wb+" v1.36.0\nCopyright \u00a9 2012-2017 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");for(b=0;b<e.length;b++)d=e[b],d.La&&d.La(this,this.H,this.v,this.D);b=null;d=fd(this,"resume",a);void 0!==d&&(1<d.length?b=this.I=d:this.b=parseInt(d,10));var f;if(a=fd(this,"state")||(f=!0,a.state))this.N=b=a,f||(this.L=!0,this.b=si),this.b&&(this.K=new G(this,
"1.36.0"),ti(this.K)?b=null:delete this.K);!b&&this.b&&(b=ui(this))&&(this.L=!0);if(b){var g=this;La(b,null,!0,function(a,b,c){c?(g.I=null,g.L=!1,g.ja("Unable to load machine state from server (error "+c+(b?": "+Ea(b):"")+")")):(g.M=b,g.W=!0);Rb(g)})}else Rb(this);this.J.power||(this.O=!0);!c&&this.O&&vi(this,this.Va)}else q("Unable to find CPU component")}la(pi,r);
function qi(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){q(d.message+" ("+c+")")}}a.S=b}function fd(a,b,c,d){var e=b.toLowerCase(),e=Xa(b)||Xa(e);void 0===e&&a.S&&(e=a.S[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);void 0===e&&(e=void 0);if("string"==typeof e&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e="true"==e}return e}
function vi(a,b,c){for(var d=vb(a.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:a;if(!Qb(f)){Qb(f,function(){vi(a,b,c)});return}}b.call(a,c)}function wi(a,b){var c=new G(a,"1.36.0",xi);if(ti(c)&&yi(c)){var d=c.get(zi),e=b?b.get(zi):"unknown";d!=e&&(a.ja("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}m=pi.prototype;
m.Va=function(a){void 0===a&&(a=this.b||(this.M?Ai:si));if(!this.w){this.w++;var b=!1,c=!1;this.R=!1;var d=this.K||new G(this,"1.36.0");if(a==Bi)b=!0;else if(a>si){if(ti(d,this.M)){this.C=new G(this,"1.36.0",Ci);ti(this.C)&&(Di(this,d),a=Ei,Fi(this.C));this.C.set(zi,Ia());Gi(this.C);var e=this.b&&!this.L;if(a==Ai||sb("Click OK to restore the previous "+Wb+" machine state, or CANCEL to reset the machine.")){if(c=yi(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?ti(d,g):("error"==f&&"no machine state"!=
g?(this.ja("Error: "+g),"unable to verify user"==g&&(Va(Hi,""),this.i=null)):this.u(f+": "+g),Fi(d),ti(d)?(c=yi(d),e=!0):c=!1))}e&&wi(this,c?d:null)}else a==Ei&&d.clear()}else wi(this);delete this.M;delete this.K}e=vb(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.v&&(c=Ii(this,g,d,b,c));b=[d,a,c];a!=Bi?vi(this,this.Hb,b):this.Hb(b)}};
function Ii(a,b,c,d,e){if(!b.A.ba){b.A.ba=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/[a-z0-9]\./i,".")))),"string"===typeof f&&(f=null),!b.Aa(f,d)&&f&&(q("Unable to restore state for "+b.type),a.N&&!a.W?(c.clear(),a.b=si,window&&window.location.reload()):a.R=!0,b.Aa(null),e=!1),!d&&b.Cb){var g=b.Cb.split("|");for(a=0;a<g.length;a++)b.status(g[a])}}catch(h){q("Error restoring state for "+b.type+" ("+h.message+")")}}return e}
m.Hb=function(a){var b=a[0],c=0>a[1];a=a[2];this.V=!0;this.A.ba=!0;var d=this.J.power;d&&(d.textContent="Shutdown");this.v&&(Ii(this,this.v,b,c,a),K(this,-2),this.v.ga());this.R&&(Di(this,b),b.clear());!c&&this.C&&(this.C.clear(),delete this.C);this.w=0};
function Di(a,b){if(sb("There may be a problem with your "+Wb+" machine.\n\nTo help us diagnose it, click OK to send this "+Wb+" machine state to http://www.pcjs.org.")){var c=a.ca;a=a.i||"";b=b.toString();var d={};d.app=Wb;d.ver="1.36.0";d.url=c;d.user=a;d.type="bug";d.data=b;La("http://www.pcjs.org/api/v1/report",d,!0)}}
function Og(a,b,c){var d,e="none";if(a.w)return null;a.w--;var f=new G(a,"1.36.0"),g=new G(a,"1.36.0",xi),h=Ia();g.set(zi,h);f.set(zi,h);f.set(Ji,"1.36.0");f.set(Ki,window?window.location.href:null);f.set(Li,window?window.navigator.userAgent:"");a.v&&a.v.ra&&(c&&(b&&(a.v.A.ga=a.v.A.P),a.v.Y()),d=a.v.ra(b,c),"object"===typeof d&&f.set(a.v.id,d),c&&(a.v.A.ba=!1,!1===d&&(e=null)));for(var h=vb(a.id),k=0;k<h.length;k++){var l=h[k];l.A.ba&&(l.ra&&(d=l.ra(b,c),"object"===typeof d&&f.set(l.id,d)),c&&(l.A.ba=
!1,!1===d&&(e=null)))}e&&(c?(h=d=!1,b?(a.i&&Mi(a,a.i,f.toString()),Gi(g)&&Gi(f)||(e=null,d=h=!0)):a.b&&(d=!0,h=a.b==Ni),d&&f.clear(h)):e=f.toString());c&&(a.A.ba=!1,b=a.J.power)&&(b.textContent="Power");a.w=0;return e}
m.reset=function(){this.A.reset=!0;this.H&&this.H.reset&&(Vb(this,"Resetting "+this.H.type),this.H.reset());this.v&&this.v.reset&&(Vb(this,"Resetting "+this.v.type),this.v.reset());for(var a=vb(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.H&&c!==this.v&&c.reset&&(Vb(this,"Resetting "+c.type),c.reset())}this.A.reset=!1;K(this,-1)};m.start=function(a,b){for(var c=vb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}K(this,-1)};
m.stop=function(a,b){for(var c=vb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}K(this,-1)};
function K(a,b){if(a.v){var c=a.v,d=b||0,e=c.J.speed;e&&(0>=d||30<=(c.hb+=d))&&(e.textContent=c.A.P?c.Z.toFixed(2)+"Mhz":"Stopped",c.hb=0)}if(a.j&&(a=a.j,b=b||0,a.L)){c=a.v.A.P;d=!!(a.v.C&8);if(0>=b||60<=(a.K+=b)){e=a.v.i;if(a.J.PC){var f=a.D&&a.D.T||8,e=e||0,e=8==f?qa(e,void 0):n(e,void 0);a.J.PC.textContent!=e&&(a.J.PC.textContent=e)}a.K=0}-1>b?a.i=a.v.i:0<b&&c&&!d&&(a.i=a.v.Ba);pc(a,a.i);jc(a,a.w)}}
m.sa=function(a,b,c){var d=this;switch(b){case "power":return this.J[b]=c,c.onclick=function(){d.w||(d.A.ba?Og(d,!1,!0):vi(d,d.Va))},!0;case "reset":return this.J[b]=c,c.onclick=function(){if(d.A.ba&&!d.w)if(d.b&&!d.I){var a=sb("Click OK to save changes to this "+Wb+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");Og(d,a,!0);!a&&d.N?window&&window.location.reload():d.Va(si)}else d.reset(),d.v&&!d.D&&d.v.ga()},!0;case "save":if(Aa(Na(),"pcjs.org"))c.parentNode.removeChild(c);
else return this.J[b]=c,c.onclick=function(){var a=ri(d,!0);if(a){var b=!!(d.b&&!d.I||d.N),c=Og(d,b);b?Mi(d,a,c):d.ja("Resume disabled, machine state not saved")}},!0}return!1};
function ri(a,b){var c=a.i;c||((c=Ua(Hi),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Oi(a,c))||a.ja("The user ID is invalid.")):b&&a.ja("Browser local storage is not available"));return c}
function Oi(a,b){a.i=null;b=La(Na()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(Va(Hi,b.data),a.i=b.data)}catch(d){q(d.message+" ("+c+")")}return a.i}function ui(a){var b=null;a.i&&(b=Na()+"/api/v1/user?req=load&user="+a.i+"&state="+Pi(a,"1.36.0"));return b}
function Mi(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=Pi(a,"1.36.0");d.data=c;b=La(Na()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.ja("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.ja(c),Va(Hi,""),a.i=null)}}
function pd(a,b){if(a.F){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.F.focus();!b&&window&&window.scrollTo(c,d)}}var Ci="failsafe",xi="validate",zi="timestamp",Ji="version",Ki="url",Li="browser",Hi="user",Bi=-1,si=0,Ai=1,Ei=2,Ni=3;bb(function(){for(var a=v(document,t+"-machine"),b=0;b<a.length;b++)for(var c=a[b],d=w(c),c=v(c,t,"computer"),e=0;e<c.length;e++){var f=c[e],g=w(f),g=new pi(g,d,!0);ub(g,f);g.O&&vi(g,g.Va)}});
cb.show.push(function(){for(var a=v(document,t,"computer"),b=0;b<a.length;b++){var c=w(a[b]);if(c=xb("Computer",c.id))c.A.ub=!1,c.V&&!c.A.ba&&c.Va(Bi)}});cb.exit.push(function(){for(var a=v(document,t,"computer"),b=0;b<a.length;b++){var c=w(a[b]);if(c=xb("Computer",c.id))c.A.ub=!0,c.A.ba&&Og(c,!(!c.b||c.I),!0)}});function G(a,b,c){this.id=a.id;this.i="";this.b={};this.v=this.j=!1;this.key=Pi(a,b,c);Fi(this,a.Vb)}m=G.prototype;m.set=function(a,b){try{this.b[a]=b}catch(c){}};
m.get=function(a){return this.b[a]||null};m.data=function(){return this.b};function ti(a,b){return b?(a.i=b,a.v=!0,a.j=!1,!0):a.v?!0:Oa()&&(b=Ua(a.key))?(a.i=b,a.v=!0):!1}function yi(a){var b=!0;if(!a.j)try{a.b=JSON.parse(a.i),a.j=!0}catch(c){q(c.message||c),b=!1}return b}function Gi(a){var b=!0;if(Oa()){var c=JSON.stringify(a.b);Va(a.key,c)||(q("Unable to store "+c.length+" bytes in browser local storage"),b=!1)}return b}m.toString=function(){return this.b?JSON.stringify(this.b):this.i};
function Fi(a,b){a.i="";a.b={};a.v=a.j=!1;b&&a.set("parms",b)}m.clear=function(a){Fi(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function Pi(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Qi=0;
function Ri(a,b,c,d,e,f,g){f("Loading "+a+"...");La(a,null,!0,function(h,k,l){l?(k||(k="unable to load "+a+" ("+l+")"),g(k,null)):Si(k,a,b,c,d,e,f,g)})}
function Si(a,b,c,d,e,f,g,h){function k(a,g){if(g)h(g,null);else{c&&(pb(c,b,a),(g=b)&&0>g.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(g=window.location.pathname+g),e?"}"==e.slice(-1)?(e=e.slice(0,-1),1<e.length&&(e+=",")):e='{state:"'+e+'",':e="{",e+='url:"'+g+'"}',"object"==typeof resources&&(g=null),e=e.replace(/\$/g,"$$$$"),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(e?" parms='"+e+"'":"")+(g?' url="'+g+'"':"")));f||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,
"$1PDPjs$2"),a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1"+d+"$2"));g=null;if("<"==a.charAt(0))try{f||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(g=new window.ActiveXObject("Microsoft.XMLDOM"),g.async=!1,g.loadXML(a)):g=(new window.DOMParser).parseFromString(a,"text/xml")}catch(u){g=null,a=u.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);h(a,g)}}a?f?Ti(a,g,k):k(a,null):h("no data"+(b?" for file: "+
b:""),null)}
function Ti(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");La(e,null,!0,function(f,g,h){if(h||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+h+")");else{if(f=d[3])if(h=g.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var k=h[0],l,p=/( [a-z]+=)(['"])(.*?)\2/gi;l=p.exec(f);)k=0>k.toLowerCase().indexOf(l[1].toLowerCase())?k.replace(">",l[0]+">"):k.replace(new RegExp(l[1]+"(['\"])(.*?)\\1"),l[0]);h[0]!=k&&(g=g.replace(h[0],k))}else{c(a,"missing <"+d[1]+
"> in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,"");a=a.replace(d[0],g);Ti(a,b,c)}})}else c(a,null)}
function Ui(a,b,c,d,e){function f(a){if(void 0===k){var b=h&&v(h,"machine-warning");k=b&&b[0]||h}k&&(k.innerHTML=Ba(a))}function g(a){f("Error: "+a);l&&(--Qi||fb(!0));l=!1}var h,k,l=!0;Qi++;qb[b]={};try{if(h=document.getElementById(b)){var p;if("object"==typeof resources&&(p=resources.css)){var u=document.head||document.getElementsByTagName("head")[0],B=document.createElement("style");B.type="text/css";B.styleSheet?B.styleSheet.cssText=p:B.appendChild(document.createTextNode(p));u.appendChild(B)}d||
(p=a,"pdp"==a.substr(0,3)&&(p="pdpjs"),d="/versions/"+p+"/1.36.0/components.xsl");p=function(e,k){k?Ri(d,null,a,null,!1,f,function(a,e){e?(pb(b,d,a),f("Processing "+c+"..."),window.ActiveXObject||"ActiveXObject"in window?(e=k.transformNode(e))?(h.outerHTML=e,--Qi||fb(!0)):g("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(a=new XSLTProcessor,a.importStylesheet(e),(e=a.transformToFragment(k,document))?h.parentNode?(h.parentNode.replaceChild(e,h),--Qi||
fb(!0)):g("invalid machine element: "+b):g("transformToFragment failed")):g("unable to transform XML: unsupported browser")):g(a)}):g(e)};"<"!=c.charAt(0)?Ri(c,b,a,e,!0,f,p):Si(c,null,b,a,e,!1,f,p)}else g("missing machine element: "+b)}catch(z){g(z.message)}return l}window.embedPDP10=function(a,b,c,d){fb(!1);return Ui("pdp10",a,b,c,d)};window.embedPDP11=function(a,b,c,d){fb(!1);return Ui("pdp11",a,b,c,d)};
window.commandMachine=function(a,b,c,d,e,f){if("script"==e){d=!1;c+=".machine";if(!f)delete zb[c],d=!0;else if("string"==typeof f&&!zb[c]){d=!0;e=zb;for(var g=c,h=f.length,k=[],l=[],p="",u=null,B=0;B<h;B++){var z=f[B];if('"'==z||"'"==z)u&&z!=u?p+=z:(u?u=null:u=z,p&&(l.push(p),p=""));else{if(!u){if("\r"==z||"\n"==z)z=";";if(" "==z||"\t"==z||";"==z){p&&(l.push(p),p="");";"==z&&l.length&&(k.push(l),l=[]);continue}}p+=z}}p&&l.push(p);l.length&&k.push(l);e[g]=k;yb(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(g=xb(d,c+".machine"))&&(h=g.exports)&&(h=h[e]))return h.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};window.enableEvents=fb;window.sendEvent=hb;})();//# sourceMappingURL=/versions/pdpjs/1.36.0/pdp10-dbg.map
