(function(){/*
 http://pcjs.org/modules/shared/lib/diskapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rk11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rl11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/rx11.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/serial.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/disk.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/drive.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2017
*/
var h,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function ca(){ca=function(){};ba.Symbol||(ba.Symbol=da)}var ea=0;function da(a){return"jscomp_symbol_"+(a||"")+ea++}
function fa(){ca();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ga(this)}});fa=function(){}}function ga(a){var b=0;return ha(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ha(a){fa();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}function ia(a){fa();ca();fa();var b=a[Symbol.iterator];return b?b.call(a):ga(a)}
function p(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function ja(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}
ja("Math.trunc",function(a){return a?a:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||!a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b}});ja("Math.log2",function(a){return a?a:function(a){return Math.log(a)/Math.LN2}});ja("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});
var ka={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],10653696:[306,4,17],21411840:[615,4,17],256256:[77,1,26,128],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},la={Ci:0,Fe:1,Ji:2,Ki:3,Li:4,Mi:5,Ni:6,Oi:7,Od:8,Pi:9,Ge:10,Qi:11,Ri:12,He:13,Si:14,Ti:15,Ui:16,Vi:17,Wi:18,Xi:19,Yi:20,Zi:21,$i:22,aj:23,bj:24,cj:25,dj:26," ":32,"!":33,'"':34,"#":35,$:36,
"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,Kd:65,yi:66,Ei:67,ej:68,E:69,kj:70,nj:71,zj:72,Bj:73,Cj:74,Dj:75,Ej:76,Hj:77,Jj:78,Qj:79,Tj:80,Q:81,Vj:82,Yj:83,gk:84,ik:85,kk:86,lk:87,rk:88,sk:89,yf:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,tk:97,vk:98,yk:99,d:100,e:101,zk:102,Ak:103,Bk:104,Ck:105,Hk:106,k:107,Ik:108,Jk:109,n:110,Kk:111,p:112,q:113,r:114,Lk:115,t:116,Ok:117,
Pk:118,Qk:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,ac:127};
function ma(a,b){var c;if(a){b||(b=10);var d,e,f=0<a.indexOf(",");f&&(a=a.replace(/,/g,""));d=e=a.charAt(0);"#"==e?(b=8,e=""):"$"==e&&(b=16,e="");d!=e?a=a.substr(1):(d=e=a.substr(0,2),"0b"==e&&f||"^B"==e?(b=2,e=""):"0o"==e||"^O"==e?(b=8,e=""):"^D"==e?(b=10,e=""):"0x"==e&&(b=16,e=""),d!=e&&(a=a.substr(2)));d=e=a.slice(-1);"Y"==e||"y"==e?(b=2,e=""):"."==e?(b=10,e=""):"H"==e||"h"==e?(b=16,e=""):"K"==e?e="000":"M"==e?e="000000":"G"==e&&(e="000000000");d!=e&&(a=a.slice(0,-1)+e);var g;d=0;10>=b&&(e=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=e[1],d=35-((e[2]||35)&255));e=a;((f=b)&&10!=f?16==f?e.match(/^-?[0-9a-f]+$/i):8==f?e.match(/^-?[0-7]+$/):2==f&&e.match(/^-?[01]+$/):e.match(/^-?[0-9]+$/))&&!isNaN(g=parseInt(a,b))&&(d&&(0>g&&(g+=Math.pow(2,36)),g=0<d?g*Math.pow(2,d):Math.trunc(g/Math.pow(2,-d))),c=g)}return c}
function na(a,b,c,d,e){e=void 0===e?0:e;var f="";isNaN(a)?a=null:null!=a&&(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(b,c)),a>=Math.pow(b,c)&&(c=Math.ceil(Math.log(a)/Math.log(b))));for(var g=e||-1;0<c--;){g||(f=","+f,g=e);if(null==a)f="?"+f;else{var k=a%b,k=k+(0<=k&&9>=k?48:55),f=String.fromCharCode(k)+f;a=Math.trunc(a/b)}g--}return(void 0===d?"":d)+f}function pa(a,b,c){b?36<b&&(b=36):(b=Math.abs(a),b=255>=b?8:262143>=b?18:36);return na(a,2,b,"",c)}
function u(a,b,c){b?12<b&&(b=12):(b=Math.abs(a),b=262143>=b?6:16777215>=b?8:12);return na(a,8,b,c?"0o":"")}function qa(a,b){b?11<b&&(b=11):b=99999>=Math.abs(a)?5:11;return na(a,10,b)}function v(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);return na(a,16,b,c?"0x":"")}function ra(a){return v(a,4,!0)}function ta(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}
function ua(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function va(a,b){return-1!==a.indexOf(b,a.length-b.length)}function wa(a){return a.replace(/[&<>"']/g,function(a){return xa[a]})}function ya(a,b){return(a+"                                        ").slice(0,b)}function za(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}
var xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},Aa={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US"};function Ba(a,b,c){var d=0,e=a.length,f=0;for(c||(c=function(a,b){return a>b?1:a<b?-1:0});d<e;){var g=d+e>>1,k;k=c(b,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}
function Da(){function a(a){return(10>a?"0":"")+a}var b=new Date;return b.getFullYear()+"-"+a(b.getMonth()+1)+"-"+a(b.getDate())+" "+a(b.getHours())+":"+a(b.getMinutes())+":"+a(b.getSeconds())}
function Ea(a,b,c,d){c=void 0===c?!1:c;var e=0,f=null,g=null;if("object"==typeof resources&&(f=resources[a]))return d&&d(a,f,e),[f,e];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),g;var k=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(k.onreadystatechange=function(){4===k.readyState&&(f=k.responseText,200==k.status||!k.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(e=k.status||-1),d&&d(a,
f,e))});if(b&&"object"==typeof b){var l="",m;for(m in b)b.hasOwnProperty(m)&&(l&&(l+="&"),l+=m+"="+encodeURIComponent(b[m]));l=l.replace(/%20/g,"+");k.open("POST",a,c);k.setRequestHeader("Content-type","application/x-www-form-urlencoded");k.send(l)}else k.open("GET",a,c),"bytes"==b&&k.overrideMimeType("text/plain; charset=x-user-defined"),k.send();c||(f=k.responseText,200!=k.status&&(e=k.status||-1),d&&d(a,f,e),g=[f,e]);return g}
function Fa(a,b){var c,d={aa:null,ia:null,Aa:null,za:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f,g;if("<"==b.substr(0,1))throw Error(b);g=0>b.indexOf("0x")&&0>b.indexOf("0o")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.Aa=g.load;d.za=g.exec;if(e=g.bytes)d.aa=e;else if(e=g.words)for(d.aa=Array(2*e.length),f=c=0;c<e.length;c++)d.aa[f++]=e[c]&255,d.aa[f++]=e[c]>>8&255;else if(e=g.longs)for(d.aa=Array(4*e.length),f=c=0;c<e.length;c++)d.aa[f++]=
e[c]&255,d.aa[f++]=e[c]>>8&255,d.aa[f++]=e[c]>>16&255,d.aa[f++]=e[c]>>24&255;else(e=g.data)?d.uk=e:d.aa=g;d.aa&&(d.aa.length?1==d.aa.length&&(w(d.aa[0]),d=null):(w("Empty resource: "+a),d=null));d.ia=g.symbols}catch(k){w("Resource data error ("+a+"): "+k.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){w("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.aa=e)}return d}
function Ga(){return"http://"+(window?window.location.host:"www.pcjs.org")}function Ha(){if(null==Ja){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}Ja=a}return Ja}function Ka(a){var b;if(window)try{b=window.localStorage.getItem(a)}catch(c){}return b}
function La(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Ma(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}
function Na(a){if(!Oa){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}Oa=c}return Oa[a]||Oa[a.toLowerCase()]}function Pa(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function Qa(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function Ra(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function Sa(a){Ta.init.push(a)}
function Ya(a){if(Za)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){w(""+("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks."))}}function $a(a){!Za&&a?(Za=!0,ab&&bb("init"),cb&&bb("show")):Za=a}function bb(a){Ta[a]&&Ya(Ta[a])}var Oa=null,Ta={init:[],show:[],exit:[]},ab=!1,cb=!1,Za=!0,Ja=null;Ra("onload",function(){ab=!0;Ya(Ta.init)});Ra("onpageshow",function(){cb=!0;Ya(Ta.show)});
Ra(Ma("iOS")?"onpagehide":Ma("Opera")?"onunload":"onbeforeunload",function(){Ya(Ta.exit)});function x(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Vd=b.comment;this.wf=b;this.exports={};this.H=this.bindings={};a=this.id.indexOf(".");0>a?this.Xc=this.id:(this.ub=this.id.substr(0,a),this.Xc=this.id.substr(a+1));this.A={ready:!1,cb:!1,wd:!1,Gk:!1,ca:!1,Id:!1,error:!1};this.Mc=null;this.A.error=!1;this.ja=c||0;this.D=this.f=this.F=this.J=null;db.push(this)}
function eb(a,b,c){fb[a]&&b&&(fb[a][b]=c)}function gb(){return Date.now()||+new Date}function w(a){window&&window.alert(a)}function hb(a){var b=!1;window&&(b=window.confirm(a));return b}function ib(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function jb(a,b){var c=y;b=A(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var k=g.getAttribute("class");if(k)for(var l=k.split(" "),m=0;m<l.length;m++)switch(k=l[m],k){case c+"-binding":(k=kb(g))&&k.binding&&a.wa(k.type,k.binding,g,k.value),m=l.length}}}}function ob(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<db.length;b++){var d=db[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function pb(a){if(void 0!==a){var b;for(b=0;b<db.length;b++)if(db[b].id===a)return db[b]}return null}function qb(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<db.length;d++)if(c)c==db[d]&&(c=null);else if(!(a!=db[d].type||b&&db[d].id.indexOf(b)))return db[d]}return null}function kb(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){w(c.message+" ("+a+")")}return b}
function A(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function rb(a){for(var b=!0,c=sb[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0],f=null;0<=tb.indexOf(e)&&(f=function(){return function(){rb(a)}}());var g=ub[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{var b=!1,k=qb(d[1],a);if(k)if(g=vb[e])b=g(k,d[2],d[3]);else{var l=k.exports;if(l&&(g=l[e]))if(b=!0,!f)b=g.call(k,d[2],d[3]);else if(!g.call(k,f,d[2],d[3]))break}}if(!b){w("Script error: '"+e+(g?" failed":" unrecognized"));break}}c&&!c.length&&delete sb[a];return b}h=x.prototype;
h.toString=function(){return this.name?this.name:this.id||this.type};
h.wa=function(a,b,c){switch(b){case "clear":return this.H[b]||(this.H[b]=c,c.onclick=function(a){return function(){a.H.print&&(a.H.print.value="")}}(this)),!0;case "print":return this.H[b]||(this.H[b]=c,this.T=function(a){this.v(a,this.type);return!0},c.value="",this.print=function(a){return function(b){ib(a,b)}}(c),this.v=function(a,b){return function(a,c){a||(a="");if(c!=Cb.Ue||"..."!=a.slice(-3))c&&(a=c+": "+a),ib(b,a+"\n");else{c=b.value;var d=c.lastIndexOf(a);0>d?c+=a+"\n":c=c.substr(0,d)+(a+
".")+c.substr(d+a.length);8192<c.length&&(c=c.substr(c.length-4096));b.value=c;b.scrollTop=b.scrollHeight}}}(this,c)),!0;default:return!1}};h.log=function(){};h.print=function(){};h.v=function(){};h.status=function(a){this.v(this.type+": "+a)};h.T=function(a,b,c){if(!b){var d=qb("Computer",this.id);if(d&&d.A.Id)return console.log("ignoring notice during unload: "+a),!1}c=c||this.type;b||w((c?c+": ":"")+a);return!0};function Db(a,b){a.A.error=!0;a.T(b)}
function Eb(a){return a.A.error?(a.v(a.toString()+" error"),!0):!1}function Fb(a,b){b&&(a.A.ready?b():a.Mc=b);return a.A.ready}function D(a,b){a.A.error||(a.A.ready=!1!==b,a.A.ready&&(b=a.Mc,a.Mc=null,b&&b()))}function Gb(a,b){a.A.cb&&(b?a.A.wd=!0:void 0===b&&a.v(a.toString()+" busy"));return a.A.cb}function Hb(a,b){if(a.A.wd)return a.A.cb=!1,a.A.wd=!1;if(a.A.error)return a.v(a.toString()+" error"),!1;a.A.cb=b;return a.A.cb}h.Da=function(){return this.A.ca=!0};
h.Ca=function(a,b){b&&(this.A.ca=!1);return!0};function E(a,b){if(a.D){a===a.D?b|=0:b=b||a.ja;var c=a.D.ja&b;return!!b&&c===b||!!(c&a.D.ke)}return!1}function F(a,b,c,d){a.D&&(!0===c||E(a,c|0))&&a.D.message(b,d)}var Cb={ERROR:"error",Lj:"notice",Ue:"progress",SCRIPT:"script",mk:"warning"};window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var fb=window?window.PCjs.Machines:{},db=window?window.PCjs.Components:[],sb=window?window.PCjs.Commands:{},tb=["hold","sleep","wait"],ub={alert:function(a){w(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},vb={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var Ib="undefined"!==typeof ArrayBuffer,y="pdp11",Jb="PDPjs",Kb=!1,Lb=Ib,Mb=!0,Nb=!0,Ob="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),Pb={qd:5,ud:144,Zc:8,Gc:{qf:15,Zj:16,qk:32,$d:64,Fa:128,de:256,ck:512,ij:1024,Fc:2048,hj:4096,jd:57344,na:{jd:13}},cf:{ge:1,Ii:2,rf:3,Jb:28,Ec:32,Dc:64,Ud:128,hk:256,Ie:512,cc:1024,Uj:2048,ce:4096,nk:8192,Sj:16384,Je:32768,dd:32736},af:{bc:1,xa:14,Ib:48,Hb:64,Za:128,fk:256,jj:512,lj:1024,Qe:2048,sd:8192,dd:16384,gb:32768,Jb:4608,
dc:61438,Ta:3967,na:{xa:1,Ib:4}},bf:{rd:15,gd:16,$b:8160,rb:57344,na:{gd:4,$b:5,rb:13}},xa:{Ee:0,fc:2,sb:4,vd:6,Jc:8,Ve:10,Ke:12,pk:14}},Qb={qd:5,ud:112,Zc:4,Te:"DY",hf:{Fa:1,xa:14,Ya:48,Hb:64,Za:128,rb:768,Rd:15360,gj:16384,gb:32768,Fi:16254,bk:128,dc:65535,Ta:1022,na:{xa:1,Ya:4,rb:8}},ff:{Ta:65534},jf:{sf:1,tf:4,uf:16,$j:65408,ae:63,Ic:64,ec:65408,Me:3,sj:8,na:{Ic:6,ec:7}},Hc:{Pe:{Fj:0,ek:1,Di:2,Gj:3,Jc:4,Re:5,jk:6,dk:7},Sd:8,Oe:16,pj:32,rj:64,Ne:128,qj:256,vj:512,xj:1024,uj:2048,tj:4096,yj:8192,
oj:16384,wj:32768},gf:{ab:63},Rd:{Rj:1024,fj:2048,ge:2048,Aj:3072,Ie:4096,$a:5120,cc:8192,Ij:9216},xa:{Kj:0,vd:2,vf:4,Jc:6,Ze:8,xf:10,We:12,Wj:14}},Rb={qd:5,ud:180,Zc:2,Te:"DX",lf:{bc:1,xa:14,td:16,DONE:32,Hb:64,bb:128,INIT:16384,gb:32768,Jb:16128,dc:32992,Ta:16479},Xj:{},pf:{ab:127},nf:{ab:31},mf:{Nd:1,Xd:2,jd:4,ac:64,Fa:128},xa:{ad:0,EMPTY:2,fc:4,sb:6,Jb:8,Ye:10,Kc:12,Xe:14},ERROR:{ed:8,fd:16,zi:24,Se:32,mj:40,ak:48,pd:56,Pj:72,Oj:80,Nj:88,Hi:96,Bi:104,Mj:112,od:120,Gi:128,Ai:136}},Sb={48:"DL11R",
52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11",180:"RX11"};Rb.kf=["DX",77,1,26,128,1,0,0,128,0];Pb.Fc=["RK",203,2,12,512,0,0,0,512,Pb.Gc.Fc|Pb.Gc.de|Pb.Gc.$d];Qb.df=["RL",512,2,40,256,0,0,0,256,Qb.Hc.Pe.Re|Qb.Hc.Sd|Qb.Hc.Oe];
var y="pdp11",Jb="PDPjs",Kb=!1,Lb=Ib,Nb=Mb=!0,Tb={cpu:1,trap:2,fault:4,"int":8,bus:16,memory:32,mmu:64,rom:128,device:256,panel:512,keyboard:1024,key:2048,pc11:4096,paper:4096,disk:8192,read:16384,write:32768,rk11:65536,rl11:131072,rx11:262144,dl11:1048576,serial:1048576,kw11:2097152,timer:2097152,speaker:16777216,computer:33554432,log:268435456,warn:536870912,buffer:1073741824,halt:-2147483648};
function Ub(a,b){x.call(this,"Panel",a,512);this.j=this.u=0;this.M=b;this.ga=this.g=this.Wa=this.Db=0;this.B=this.C=-1;this.G=this.I=this.w=!1;this.K=Vb;this.i={};this.b={START:[1,1,!0,!1,this.Uf],STEP:[1,1,!1,!1,this.Vf],ENABLE:[1,1,!1,!1,this.Pf],CONT:[1,1,!0,!1,this.Nf],DEP:[0,0,!0,!1,this.Of],EXAM:[1,1,!0,!1,this.Qf],LOAD:[1,1,!0,!1,this.Sf],TEST:[0,0,!0,!1,this.Rf]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.Tf,a];this.D=this.f=this.F=this.J=null;this.exports={hold:this.If,toggle:this.nh,
reset:this.hh,set:this.mh};D(this)}p(Ub,x);function Wb(a,b){return Xb(a,a.Db=b)}h=Ub.prototype;h.reset=function(a){this.stop();a&&Wb(this,0)};
h.wa=function(a,b,c,d){if(this.J&&this.J.wa(a,b,c,d)||this.f&&this.f.wa(a,b,c,d)||this.D&&this.D.wa(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.H[b]=c,this.u++,!0;default:return"led"==a||"rled"==a?(this.H[b]=c,this.i[b]=d?1:0,this.u++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.H[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,
b){return function(){Yb(a,b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){ec(a,b)}}(this,b),a.ontouchstart=function(a,b){return function(c){Yb(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){ec(a,b)}}(this,b),!0):x.prototype.wa.call(this,a,b,c,d)}};h.Ba=function(a,b,c,d){this.J=a;this.F=b;this.f=c;this.D=d;fc(b,this,gc);hc(b,this.reset.bind(this));ic(this);jc(this)};
h.Da=function(a,b){if(!b)if(this.M&&kc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};h.Ca=function(a){return a?this.save():!0};h.save=function(){var a=new G(this);a.set(0,[this.ga,this.Db,this.Wa]);return a.data()};h.restore=function(a){if(a=a[0])lc(this,this.ga=a[0]),Wb(this,a[1]),mc(this,a[2]);return!0};h.hh=function(){for(var a in this.b){var b=this.b[a];b[1]=b[0]}jc(this);return!0};function nc(a,b,c){if(a=a.H[b])a.style.backgroundColor=c?"#ff0000":"#000000"}
function ic(a,b){for(var c in a.i)nc(a,c,null!=b?b:a.i[c])}function oc(a,b,c){if(a=a.H[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function jc(a){for(var b in a.b)oc(a,b,a.b[b][1])}function pc(a,b,c,d){if(a.H[b]){var e=a.D&&a.D.W||8;c=c||0;c=8==e?u(c,d):v(c,d);a.H[b].textContent!=c&&(a.H[b].textContent=c)}}h.If=function(a,b,c){if(Yb(this,b)){if(c){var d=this;setTimeout(function(){ec(d,b);a&&a()},+c);return!1}ec(this,b)}return!0};
h.mh=function(a,b){if("SR"==a)return mc(this,ma(b,8));var c=this.b[a];return c?(c[1]=+b?1:0,oc(this,a,c[1]),!0):!1};h.nh=function(a){return Yb(this,a)?(ec(this,a),!0):!1};function Yb(a,b){var c=a.b[b];return c?(oc(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b!=qc&&(a.G=b==rc,a.I=b==sc),!0):!1}function ec(a,b){var c=a.b[b];c&&(c[2]&&c[3]&&(oc(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}
h.Uf=function(a){a||this.f.A.V||(tc(this.f,this.ga),a=this.f,a.F.reset(),uc(a),this.b[vc]&&this.b[vc][1]&&wc(this.f))};h.Vf=function(){};h.Pf=function(a){a||this.f.da()};h.Nf=function(a){if(!a&&!this.f.A.V)if(this.b[vc]&&this.b[vc][1])wc(this.f);else{if((a=this.D)&&!Gb(a,!0))Hb(a,!0),xc(a,0,null),Hb(a,!1);else try{var b=this.f.Ac(1);0<b&&(yc(this.f,b),zc(this.f,b,!0),Ac(this.f,b))}catch(c){"number"!=typeof c&&Db(this.f,c.stack||c.message)}this.stop();this.J&&H(this.J)}};
h.Of=function(a){if(a&&!this.f.A.V)if(this.G&&Bc(this),a=Wb(this,this.Wa),this.K==Vb)Cc(this.F,this.ga,a);else{var b=this.f,c=this.ga;b.qa++;b.F.Zb(Dc(b,c,4),a);b.qa--}};h.Qf=function(a){a||this.f.A.V||(this.I&&Bc(this),a=this.K==Vb?Ec(this.F,this.ga):Fc(this.f,this.ga),Wb(this,a))};h.Sf=function(a){a||this.f.A.V||lc(this,this.Wa)};h.Rf=function(a){a?(this.w=!0,ic(this,!0)):(this.w=!1,ic(this),mc(this,0))};h.Tf=function(a,b){this.Wa=a?this.Wa|1<<b:this.Wa&~(1<<b)};
function Bc(a){var b=1140>=a.f.ka?8:16,c=65472<=a.ga&&a.ga<65472+b,b=c?1:2,c=c?15:a.F.I;a.b[qc]&&a.b[qc][1]||(b=-b);lc(a,a.ga&~c|a.ga+b&c)}function lc(a,b){a.ga=b&a.F.I;if(a.B!==a.ga){a.B=a.ga;b=a.B;for(var c=0;22>c;c++)Gc(a,"A"+c,b&1<<c)}}function Xb(a,b){a.g=b&65535;if(a.C!==a.g){a.C=a.g;b=a.C;for(var c=0;16>c;c++)Gc(a,"D"+c,b&1<<c)}return a.g}function Gc(a,b,c){a.i[b]=c;a.w||nc(a,b,c)}function mc(a,b){a.Wa=b|0;for(b=0;22>b;b++)a.b["S"+b][1]=a.Wa&1<<b?1:0;jc(a);return!0}
h.stop=function(){lc(this,this.f.g[7])};h.Gd=function(a){this.ga=a};h.setData=function(a,b){b?this.Db=a:this.g=a};h.$f=function(a,b){return(b?this.Db:this.Wa)&65535};h.th=function(a){this.Db=a};function kc(){for(var a=A(document,y,"panel"),b=0;b<a.length;b++){var c=a[b],d=kb(c),e=pb(d.id);e||(e=new Ub(d,!0));jb(e,c)}}var Vb=7,rc="DEP",vc="ENABLE",sc="EXAM",qc="STEP",Hc={},gc=(Hc[65400]=[null,null,Ub.prototype.$f,Ub.prototype.th,"CNSW"],Hc);Sa(kc);
function Ic(a,b,c){x.call(this,"Bus",a,16);this.f=b;this.D=c;this.U=+a.busWidth||16;this.M=1<<this.U;this.I=this.M-1;this.j=Jc;this.g=Math.log2(this.j);this.R=this.j>>2;this.i=this.j-1;this.G=this.M/this.j|0;this.S=this.G-1;this.Qa=[];this.oa=0;this.C=!1;this.N=[];this.zf=[Kc,Lc,Mc,Yc];this.b=this.u=[];this.B=this.K=this.w=this.O=this.P=0;a=new I(this);Zc(a,this.D);this.b=Array(this.G);this.u=Array(this.G);for(b=0;b<this.G;b++)this.b[b]=this.u[b]=a;this.B=this.M-Jc;$c(this,this.B,Jc,ad,this);this.P=
this.O=(this.B&this.I)>>>this.g;this.K=0;this.w=this.I;D(this)}p(Ic,x);function bd(a,b){if(b!=a.K){for(var c=0;c<a.G;c++)a.u[c]=a.b[c];a.K=0;a.w=a.I;b&&(a.K=b,b=1<<b,a.w=b-1,b-=Jc,a.P=(b&a.w)>>>a.g,a.u[a.P]=a.b[a.O])}}h=Ic.prototype;h.reset=function(){for(var a=0;a<this.N.length;a++)this.N[a]();bd(this,16)};h.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Ca=function(a){return a?this.save():!0};h.save=function(){var a=new G(this);a.set(0,cd(this));return a.data()};
h.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&d.length<this.R){for(var e=0,f=Array(this.R),g=0;g<d.length-1;)for(var k=d[g++],l=d[g++];k--;)f[e++]=l;d=f}e=this.b[c];if(!e||!e.restore(d)){w("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function $c(a,b,c,d,e){for(var f=b,g=c,k=f>>>a.g;0<g&&k<a.b.length;){var l=a.b[k],m=k*a.j,n=a.j-(f-m);n>g&&(n=g);if(!e&&l&&l.size){if(l.type==d){if(f+g<=l.L)return l.Vb+=l.L-f,l.L=f,!0;if(f>=l.L+l.Vb){n=l.size-(f-m);n>g&&(n=g);l.Vb=f-l.L+n;f=m+a.j;g-=n;k++;continue}}return dd(ed,f,g)}f=new I(a,f,n,a.j,d,e);Zc(f,a.D,l);a.b[k++]=f;f=m+a.j;g-=n}return 0>=g?(a.status("Added "+(c>>10)+"Kb "+fd[d]+" at "+u(b)),!0):dd(gd,b,c)}h.Ld=function(a){return this.u[(a&this.w)>>>this.g].Cb(a&this.i,a)};
h.zc=function(a){var b=a&this.i,c=(a&this.w)>>>this.g;return Nb||b!=this.i?this.u[c].pa(b,a):this.u[c++].Cb(b,a)|this.u[c&this.S].Cb(0,a+1)<<8};h.Md=function(a,b){this.u[(a&this.w)>>>this.g].Fb(a&this.i,b,a)};h.Zb=function(a,b){var c=a&this.i,d=(a&this.w)>>>this.g;Nb||c!=this.i?this.u[d].Gb(c,b,a):(this.u[d++].Fb(c,b&255,a),this.u[d&this.S].Fb(0,b>>8&255,a+1))};function hd(a,b){return a.b[(b&a.I)>>>a.g]}
function Ec(a,b){var c;a.C=!1;a.oa++;var d=b&a.i,e=hd(a,b);Nb||d!=a.i?c=e.B(d,b):c=e.j(d,b)|hd(a,b+1).j(0,b+1)<<8;a.oa--;return c}function id(a,b,c){a.C=!1;a.oa++;hd(a,b).F(b&a.i,c&255,b);a.oa--}function Cc(a,b,c){a.C=!1;a.oa++;var d=b&a.i,e=hd(a,b);Nb||d!=a.i?e.C(d,c&65535,b):(e.F(d,c&255,b),hd(a,b+1).F(0,c>>8&255,b+1));a.oa--}
function cd(a){for(var b=0,c=[],d=0;d<a.G;d++){var e=a.b[d];if(e.eb||e.Gf){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,k=0,l=[];g<e.length;){for(var m=e[g],n=g+1;n<e.length&&e[n]===m;)n++;l[k++]=n-g;l[k++]=m;g=n}l.length<e.length&&(e=l)}c[f]=e}}return c}function jd(a){for(var b=kd,c=0,d=0;d<a.b.length;d++){var e=a.b[d];e.type==b&&(c=e.L+e.Vb)}return c}
function ld(a,b,c,d,e,f,g,k,l){for(var m=b==c?-1:0;b<=c;b+=2){var n=b&md;if(void 0!==a.Qa[n])return w("I/O address already registered: "+v(b,8,!0)),!1;var r=l||"unknown";r&&0<=m&&(r+=m++);a.Qa[n]=[d,e,f,g,r,k||16,!1]}return!0}
function fc(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.f.ka)){var k=g[0]?g[0].bind(b):null,l=g[1]?g[1].bind(b):null,m=g[2]?g[2].bind(b):null,n=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!k&&m&&(k=function(a){return function(b){return a(b)&255}.bind(b)}(m)),!l&&n&&(l=function(a){return function(b,c){return a(b,c)}.bind(b)}(n)));for(var r=g[4],t=g[5]||1,q=0;q<t;q++,f+=2)if(r&&1<t&&(r=g[4]+q),!ld(a,f,f,k,l,m,n,g[7]||b.ja,r||b.Xc))return!1}}return!0}
function hc(a,b){a.N.push(b)}h.Oa=function(a,b,c){this.C=!0;this.oa||(this.D&&E(this.D,4)&&F(this.D,"memory fault ("+c+") on "+K(this.D,a),!0,!0),b&&(this.f.P|=b),this.f.sa(4,0,a))};function nd(a){var b=a.C;a.C=!1;return b}function dd(a,b,c){w("Memory block error ("+a+": "+v(b)+","+v(c)+")");return!1}var Jc=8192,md=Jc-1,ed=1,gd=2;
function Kc(a,b){var c=-1,d=this.controller,e=d.Qa[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Qa[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return this.f&&E(this.f,16|e[5])&&F(this.f,e[4]+".readByte("+K(this.f,b)+"): "+K(this.f,c),!0,!d.oa),c;d.Oa(b,16,3);c=255;this.f&&E(this.f,16)&&F(this.f,"warning: unconverted read access to byte @"+K(this.f,b)+": "+K(this.f,c),!0,!d.oa);return c}
function Lc(a,b,c){var d=!1,e=this.controller,f=e.Qa[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Qa[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d?this.f&&E(this.f,16|f[5])&&F(this.f,f[4]+".writeByte("+K(this.f,c)+","+K(this.f,b)+")",!0,!e.oa):(e.Oa(c,16,5),this.f&&E(this.f,16)&&F(this.f,"warning: unconverted write access to byte @"+K(this.f,c)+": "+K(this.f,
b),!0,!e.oa))}function Mc(a,b){var c=-1,d=this.controller;a=d.Qa[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return this.f&&E(this.f,16|a[5])&&F(this.f,a[4]+".readWord("+K(this.f,b)+"): "+K(this.f,c),!0,!d.oa),c;d.Oa(b,16,2);c=65535;this.f&&E(this.f,16)&&F(this.f,"warning: unconverted read access to word @"+K(this.f,b)+": "+K(this.f,c),!0,!d.oa);return c}
function Yc(a,b,c){var d=!1,e=this.controller;a=e.Qa[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d?this.f&&E(this.f,16|a[5])&&F(this.f,a[4]+".writeWord("+K(this.f,c)+","+K(this.f,b)+")",!0,!e.oa):(e.Oa(c,16,4),this.f&&E(this.f,16)&&F(this.f,"warning: unconverted write access to word @"+K(this.f,c)+": "+K(this.f,b),!0,!e.oa))}function L(a){x.call(this,"Device",a,256);this.b={fb:128,Hd:-1}}p(L,x);h=L.prototype;
h.Ba=function(a,b,c,d){this.F=b;this.J=a;this.f=c;this.D=d;var e=this;this.b.Hd=od(c,function(){e.b.fb|=128;e.b.fb&64&&pd(e.f,e.b.Ra);e.J&&H(e.J,1);qd(e.f,e.b.Hd,1E3/60)});this.b.Ra=rd(c,64,6,2097152);fc(b,this,sd);hc(b,this.reset.bind(this));d&&td(d,64,function(a){var b=e.f;ud(e,"KIPDR",b.B[0],0,a[0]);ud(e,"KDPDR",b.B[0],8,a[0]);ud(e,"KIPAR",b.M[0],0,a[0]);ud(e,"KDPAR",b.M[0],8,a[0],!0);ud(e,"SIPDR",b.B[1],0,a[0]);ud(e,"SDPDR",b.B[1],8,a[0]);ud(e,"SIPAR",b.M[1],0,a[0]);ud(e,"SDPAR",b.M[1],8,a[0],
!0);ud(e,"UIPDR",b.B[3],0,a[0]);ud(e,"UDPDR",b.B[3],8,a[0]);ud(e,"UIPAR",b.M[3],0,a[0]);ud(e,"UDPAR",b.M[3],8,a[0],!0);b.X&32&&ud(e,"UNIMAP",b.Ha,-1,a[0])});D(this)};function ud(a,b,c,d,e,f){a=a.D;if(!(e&&0>b.indexOf(e.toUpperCase()))){e=0;var g=8,k="",l=!1,m=8;0>d&&(e=22,g=c.length,d=0,l=!0,m=4);for(var n=0;n<g;n++)n%m||(k&&(k+="\n"),k+=b+(l?"["+qa(n,2)+"]":"")+":"),k+=" "+K(a,c[d+n],e);a.v(k+(f?"\n":""))}}h.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};
h.Ca=function(a){return a?this.save():!0};h.reset=function(){this.b.fb=128;qd(this.f,this.b.Hd,1E3/60,!0)};h.save=function(){var a=new G(this);a.set(0,[this.b.fb]);return a.data()};h.restore=function(a){a=ia(a[0]);this.b.fb=a.next().value;return!0};h.gg=function(){return this.b.fb};h.Ah=function(a){this.b.fb=a&192;this.b.fb&64||vd(this.f,this.b.Ra)};h.ig=function(){return wd(this.f)};h.Ch=function(a){xd(this.f,a&-129|this.f.S&128)};h.jg=function(){return yd(this.f)};h.kg=function(){return zd(this.f)};
h.lg=function(){return this.f.X};h.Dh=function(a){Ad(this.f,a)};h.Xg=function(a){a=a>>1&63;var b=this.f.Ha[a>>1];return a&1?b>>16:b&65535};h.oi=function(a,b){b=b>>1&63;var c=b>>1;this.f.Ha[c]=b&1?this.f.Ha[c]&65535|(a&63)<<16:this.f.Ha[c]&-65536|a&65534};h.Qg=function(a){return this.f.B[1][a>>1&7]};h.hi=function(a,b){this.f.B[1][b>>1&7]=a&65295};h.Og=function(a){return this.f.B[1][(a>>1&7)+8]};h.fi=function(a,b){this.f.B[1][(b>>1&7)+8]=a&65295};h.Pg=function(a){return this.f.M[1][a>>1&7]};
h.gi=function(a,b){b=b>>1&7;this.f.M[1][b]=a;this.f.B[1][b]&=65295};h.Ng=function(a){return this.f.M[1][(a>>1&7)+8]};h.ei=function(a,b){b=(b>>1&7)+8;this.f.M[1][b]=a;this.f.B[1][b]&=65295};h.fg=function(a){return this.f.B[0][a>>1&7]};h.zh=function(a,b){this.f.B[0][b>>1&7]=a&65295};h.dg=function(a){return this.f.B[0][(a>>1&7)+8]};h.xh=function(a,b){this.f.B[0][(b>>1&7)+8]=a&65295};h.eg=function(a){return this.f.M[0][a>>1&7]};h.yh=function(a,b){b=b>>1&7;this.f.M[0][b]=a;this.f.B[0][b]&=65295};
h.cg=function(a){return this.f.M[0][(a>>1&7)+8]};h.wh=function(a,b){b=(b>>1&7)+8;this.f.M[0][b]=a;this.f.B[0][b]&=65295};h.Wg=function(a){return this.f.B[3][a>>1&7]};h.ni=function(a,b){this.f.B[3][b>>1&7]=a&65295};h.Ug=function(a){return this.f.B[3][(a>>1&7)+8]};h.li=function(a,b){this.f.B[3][(b>>1&7)+8]=a&65295};h.Vg=function(a){return this.f.M[3][a>>1&7]};h.mi=function(a,b){b=b>>1&7;this.f.M[3][b]=a;this.f.B[3][b]&=65295};h.Tg=function(a){return this.f.M[3][(a>>1&7)+8]};
h.ki=function(a,b){b=(b>>1&7)+8;this.f.M[3][b]=a;this.f.B[3][b]&=65295};h.Tb=function(a){a&=7;return this.f.w&2048?this.f.ua[a]:this.f.g[a]};h.Xb=function(a,b){b&=7;this.f.w&2048?this.f.ua[b]=a:this.f.g[b]=a};h.sg=function(){return this.f.w&49152?this.f.Y[0]:this.f.g[6]};h.Kh=function(a){this.f.w&49152?this.f.Y[0]=a:this.f.g[6]=a};h.vg=function(){return this.f.g[7]};h.Nh=function(a){this.f.g[7]=a};h.Ub=function(a){a&=7;return this.f.w&2048?this.f.g[a]:this.f.ua[a]};
h.Yb=function(a,b){b&=7;this.f.w&2048?this.f.g[b]=a:this.f.ua[b]=a};h.tg=function(){return 1==(this.f.w&49152)>>14?this.f.g[6]:this.f.Y[1]};h.Lh=function(a){1==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.Y[1]=a};h.ug=function(){return 3==(this.f.w&49152)>>14?this.f.g[6]:this.f.Y[3]};h.Mh=function(a){3==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.Y[3]=a};h.bg=function(a){return this.f.vc[a-65504>>1]};h.vh=function(a,b){this.f.vc[b-65504>>1]=a};h.xe=function(a){return 65520==a?(jd(this.F)>>6)-1:0};
h.Ce=function(){};h.Sg=function(){return 1};h.ji=function(){};h.ag=function(){return this.f.P};h.uh=function(){this.f.P=0};h.hg=function(){return this.f.sc};h.Bh=function(a,b){b&1||(a&=255);this.f.sc=a};h.mg=function(a,b){return b?0:this.f.nb};h.Eh=function(a){Bd(this.f,a)};h.Rg=function(a,b){return b?0:this.f.Ga&65280};h.ii=function(a){this.f.Ga=a|255};h.rg=function(){return Cd(this.f)};h.Jh=function(a){Dd(this.f,a)};h.Be=function(a,b){E(this)&&F(this,"writeIgnored("+u(b)+"): "+u(a),!0,!0)};
var M={},sd=(M[61568]=[null,null,L.prototype.Xg,L.prototype.oi,"UNIMAP",64,1170],M[62592]=[null,null,L.prototype.Qg,L.prototype.hi,"SIPDR",8,1145,64],M[62608]=[null,null,L.prototype.Og,L.prototype.fi,"SDPDR",8,1145,64],M[62624]=[null,null,L.prototype.Pg,L.prototype.gi,"SIPAR",8,1145,64],M[62640]=[null,null,L.prototype.Ng,L.prototype.ei,"SDPAR",8,1145,64],M[62656]=[null,null,L.prototype.fg,L.prototype.zh,"KIPDR",8,1140,64],M[62672]=[null,null,L.prototype.dg,L.prototype.xh,"KDPDR",8,1145,64],M[62688]=
[null,null,L.prototype.eg,L.prototype.yh,"KIPAR",8,1140,64],M[62704]=[null,null,L.prototype.cg,L.prototype.wh,"KDPAR",8,1145,64],M[62798]=[null,null,L.prototype.lg,L.prototype.Dh,"MMR3",1,1145,64],M[65382]=[null,null,L.prototype.gg,L.prototype.Ah,"LKS"],M[65402]=[null,null,L.prototype.ig,L.prototype.Ch,"MMR0",1,1140,64],M[65404]=[null,null,L.prototype.jg,L.prototype.Be,"MMR1",1,1145,64],M[65406]=[null,null,L.prototype.kg,L.prototype.Be,"MMR2",1,1140,64],M[65408]=[null,null,L.prototype.Wg,L.prototype.ni,
"UIPDR",8,1140,64],M[65424]=[null,null,L.prototype.Ug,L.prototype.li,"UDPDR",8,1145,64],M[65440]=[null,null,L.prototype.Vg,L.prototype.mi,"UIPAR",8,1140,64],M[65456]=[null,null,L.prototype.Tg,L.prototype.ki,"UDPAR",8,1145,64],M[65472]=[null,null,L.prototype.Tb,L.prototype.Xb,"R0SET0"],M[65473]=[null,null,L.prototype.Tb,L.prototype.Xb,"R1SET0"],M[65474]=[null,null,L.prototype.Tb,L.prototype.Xb,"R2SET0"],M[65475]=[null,null,L.prototype.Tb,L.prototype.Xb,"R3SET0"],M[65476]=[null,null,L.prototype.Tb,
L.prototype.Xb,"R4SET0"],M[65477]=[null,null,L.prototype.Tb,L.prototype.Xb,"R5SET0"],M[65478]=[null,null,L.prototype.sg,L.prototype.Kh,"R6KERNEL"],M[65479]=[null,null,L.prototype.vg,L.prototype.Nh,"R7KERNEL"],M[65480]=[null,null,L.prototype.Ub,L.prototype.Yb,"R0SET1",1,1145],M[65481]=[null,null,L.prototype.Ub,L.prototype.Yb,"R1SET1",1,1145],M[65482]=[null,null,L.prototype.Ub,L.prototype.Yb,"R2SET1",1,1145],M[65483]=[null,null,L.prototype.Ub,L.prototype.Yb,"R3SET1",1,1145],M[65484]=[null,null,L.prototype.Ub,
L.prototype.Yb,"R4SET1",1,1145],M[65485]=[null,null,L.prototype.Ub,L.prototype.Yb,"R5SET1",1,1145],M[65486]=[null,null,L.prototype.tg,L.prototype.Lh,"R6SUPER",1,1145],M[65487]=[null,null,L.prototype.ug,L.prototype.Mh,"R6USER",1,1145],M[65504]=[null,null,L.prototype.bg,L.prototype.vh,"CTRL",8,1170],M[65520]=[null,null,L.prototype.xe,L.prototype.Ce,"LSIZE",1,1170],M[65522]=[null,null,L.prototype.xe,L.prototype.Ce,"HSIZE",1,1170],M[65524]=[null,null,L.prototype.Sg,L.prototype.ji,"SYSID",1,1170],M[65526]=
[null,null,L.prototype.ag,L.prototype.uh,"ERR",1,1170],M[65528]=[null,null,L.prototype.hg,L.prototype.Bh,"MBR",1,1170],M[65530]=[null,null,L.prototype.mg,L.prototype.Eh,"PIR"],M[65532]=[null,null,L.prototype.Rg,L.prototype.ii,"SLR"],M[65534]=[null,null,L.prototype.rg,L.prototype.Jh,"PSW"],M);
Sa(function(){for(var a=A(document,y,"device"),b=0;b<a.length;b++){var c,d=a[b];c=kb(d);switch(c.type){case "default":c=new L(c);jb(c,d);break;case "pc11":c=new Ed(c);jb(c,d);break;case "rl11":c=new Gd(c);jb(c,d);break;case "rk11":c=new N(c);jb(c,d);break;case "rx11":c=new Hd(c),jb(c,d)}}});
function I(a,b,c,d,e,f){this.D=a;this.id=Id+=2;this.b=null;this.L=b;this.Vb=c;this.size=d||0;this.type=e||Jd;this.J=e==Kd;this.f=this.controller=null;this.Cb=this.j=this.Cd;this.pa=this.B=this.Dd;this.Fb=this.F=this.Wb;this.Gb=this.C=this.Vc;this.H=this.i=0;Zc(this);this.eb=this.Gf=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.b=a[0],Ld(this,f.zf);else if(Ib)this.u=new ArrayBuffer(this.size),this.w=new DataView(this.u,0,this.size),this.g=new Uint8Array(this.u,0,this.size),this.G=new Uint16Array(this.u,
0,this.size>>1),this.b=new Int32Array(this.u,0,this.size>>2),Ld(this,Md?Nd:Wd);else{a=this.b=Array(this.size>>2);for(f=0;f<a.length;f++)a[f]=0;Ld(this,Xd)}else Ld(this)}h=I.prototype;h.save=function(){var a,b;if(this.controller)a=null;else if(Ib)for(a=Array(this.size>>2),b=0;b<a.length;b++)a[b]=this.w.getInt32(b<<2,!0);else a=this.b;return a};
h.restore=function(a){if(this.controller)return!a;if(a&&this.size==a.length<<2){var b;if(Ib)for(b=0;b<a.length;b++)this.w.setInt32(b<<2,a[b],!0);else this.b=a;return this.eb=!0}return!1};function Ld(a,b){b||(b=Yd);Zd(a,b,void 0);$d(a,b,void 0)}function Zd(a,b,c){c&&a.H||(a.Cb=b[0]||a.Cd,a.pa=b[2]||a.Dd);if(c||void 0===c)a.j=b[0]||a.Cd,a.B=b[2]||a.Dd}function $d(a,b,c){c&&a.i||(a.Fb=!a.J&&b[1]||a.Wb,a.Gb=!a.J&&b[3]||a.Vc);if(c||void 0===c)a.F=b[1]||a.Wb,a.C=b[3]||a.Vc}
h.Ab=function(a,b){b?this.i++||$d(this,ae,!1):this.H++||Zd(this,ae,!1)};function be(a,b){b?--a.i||(a.Fb=a.J?a.Wb:a.F,a.Gb=a.J?a.Vc:a.C):--a.H||(a.Cb=a.j,a.pa=a.B)}function Zc(a,b,c){a.f=b;a.H=a.i=0;c&&((a.H=c.H)&&Zd(a,ae,!1),(a.i=c.i)&&$d(a,ae,!1))}h.Cd=function(a,b){this.f&&E(this.f,32)&&F(this.f,"attempt to read invalid address "+K(this.f,b),!0);this.D.Oa(b,32,2);return 255};
h.Wb=function(a,b,c){this.f&&E(this.f,32)&&F(this.f,"attempt to write "+K(this.f,b)+" to invalid addresses "+K(this.f,c),!0);this.D.Oa(c,32,4)};h.Dd=function(a,b){return this.Cb(a++,b++)|this.Cb(a,b)<<8};h.Vc=function(a,b,c){this.Fb(a++,b&255,c++);this.Fb(a,b>>8,c)};h.Zf=function(a){return this.b[a>>2]>>>((a&3)<<3)&255};h.dh=function(a,b){Mb&&a&1&&this.D.Oa(b,64,2);b=a>>2;a=(a&3)<<3;var c=this.b[b]>>a;return 24>a?c&65535:c&255|(this.b[b+1]&255)<<8};
h.sh=function(a,b){var c=a>>2;a=(a&3)<<3;this.b[c]=this.b[c]&~(255<<a)|b<<a;this.eb=!0};h.ti=function(a,b,c){Mb&&a&1&&this.D.Oa(c,64,4);c=a>>2;a=(a&3)<<3;24>a?this.b[c]=this.b[c]&~(65535<<a)|b<<a:(this.b[c]=this.b[c]&16777215|b<<24,c++,this.b[c]=this.b[c]&-256|b>>8);this.eb=!0};h.Xf=function(a,b){this.f&&null!=this.L&&ce(this.f,this.L+a);return this.j(a,b)};h.Zg=function(a,b){this.f&&null!=this.L&&ce(this.f,this.L+a,2);return this.B(a,b)};
h.qh=function(a,b,c){this.f&&null!=this.L&&de(this.f,this.L+a);this.J?this.Wb(0,b,c):this.F(a,b,c)};h.ri=function(a,b,c){this.f&&null!=this.L&&de(this.f,this.L+a,2);this.J?this.Wb(0,b,c):this.C(a,b,c)};h.Wf=function(a){return this.g[a]};h.Yf=function(a,b){a=this.g[a];this.f&&E(this.f,32)&&F(this.f,"Memory.readByte("+K(this.f,b)+"): "+K(this.f,a),!0);return a};h.Yg=function(a,b){Mb&&a&1&&this.D.Oa(b,64,2);return this.w.getUint16(a,!0)};
h.bh=function(a,b){Mb&&a&1&&this.D.Oa(b,64,2);a=!Nb&&a&1?this.g[a]|this.g[a+1]<<8:this.G[a>>1];this.f&&E(this.f,32)&&F(this.f,"Memory.readWord("+K(this.f,b)+"): "+K(this.f,a),!0);return a};h.ph=function(a,b){this.g[a]=b;this.eb=!0};h.rh=function(a,b,c){this.g[a]=b;this.eb=!0;this.f&&E(this.f,32)&&F(this.f,"Memory.writeByte("+K(this.f,c)+","+K(this.f,b)+")",!0)};h.pi=function(a,b,c){Mb&&a&1&&this.D.Oa(c,64,4);this.w.setUint16(a,b,!0);this.eb=!0};
h.si=function(a,b,c){Mb&&a&1&&this.D.Oa(c,64,4);!Nb&&a&1?(this.g[a]=b,this.g[a+1]=b>>8):this.G[a>>1]=b;this.eb=!0;this.f&&E(this.f,32)&&F(this.f,"Memory.writeWord("+K(this.f,c)+","+K(this.f,b)+")",!0)};var Jd=0,kd=1,Kd=2,ad=4,fd=["NONE","RAM","ROM","VID","H/W"],Id=0,Yd=[],Xd=[I.prototype.Zf,I.prototype.sh,I.prototype.dh,I.prototype.ti],ae=[I.prototype.Xf,I.prototype.qh,I.prototype.Zg,I.prototype.ri];
if(Ib)var Wd=[I.prototype.Wf,I.prototype.ph,I.prototype.Yg,I.prototype.pi],Nd=[I.prototype.Yf,I.prototype.rh,I.prototype.bh,I.prototype.si];var ee;if(Ib){var fe=new ArrayBuffer(2);(new DataView(fe)).setUint16(0,256,!0);ee=256===(new Uint16Array(fe))[0]}else ee=!1;var Md=ee;
function ge(a,b){x.call(this,"CPU",a,1);b=+a.cycles||b;var c=+a.multiplier||1;this.$c=0;this.Yc=b;this.lb=c;this.ld=Math.round(this.Yc/1E4)/100;this.wb=this.ld*this.lb;this.md=this.oc=this.zb=this.xc=0;this.A.V=this.A.Rc=!1;this.A.ra=a.autoStart;"string"==typeof this.A.ra&&(this.A.ra="true"==this.A.ra);this.A.Mb=!1;this.mc=this.Nb=0;this.nc=+a.csStart;this.Lb=+a.csInterval;this.Pb=+a.csStop;this.ha=[];this.Zd=this.ih.bind(this);this.mb=this.Ka=this.kb=this.b=this.ma=this.Ja=this.lc=this.jb=this.Qb=
this.nd=this.vb=0;this.ta=null;D(this)}p(ge,x);h=ge.prototype;h.Ba=function(a,b,c,d){this.J=a;this.F=b;this.D=d;this.ta=a.i;for(a=0;a<he.length;a++)(b=this.H[he[a]])&&this.J.wa(null,he[a],b);D(this)};h.reset=function(){};h.save=function(){return null};h.restore=function(){return!1};
h.Da=function(a,b){var c=ie(this.J,"autoStart");null!=c?this.A.ra="true"==c?!0:"false"==c?!1:!!c:null==this.A.ra&&(this.A.ra=!this.D&&void 0===this.H.run);if(!b){if(a){je(this);if(!this.restore(a))return!1;ke(this)}else this.reset();this.D?(a=this.D,b=this.A.ra,a.Ha=!0,a.v("Type ? for help with PDPjs Debugger commands"),le(a),b||me(a),a.ya&&(b=a.ya,a.ya=null,ne(a,b))):this.status("No debugger detected");this.A.ra||this.v("CPU will not be auto-started "+(this.ta?"(click Run to start)":"(type 'go' to start)"))}return!0};
h.Ca=function(a){return a?this.save():!0};h.ra=function(){return this.A.V?!0:this.A.ra?(wc(this),!0):!1};h.qe=function(){return 0};function ke(a){void 0===a.nc&&(a.nc=0);void 0===a.Lb&&(a.Lb=-1);void 0===a.Pb&&(a.Pb=-1);a.A.Mb=0<=a.nc&&0<a.Lb;a.A.Mb&&(a.mc=0,a.Nb=a.nc-a.mb)}function Ac(a,b){if(a.A.Mb){var c=!1;a.mc=a.mc+a.qe()|0;a.Nb-=b;0>=a.Nb&&(a.Nb+=a.Lb,c=!0);0<=a.Pb&&a.Pb<=oe(a)&&(a.Lb=a.Pb=-1,ke(a),a.da(),c=!0);c&&a.v(oe(a)+" cycles: checksum="+v(a.mc))}}
h.wa=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.H[b]=c,!0;case "run":return this.H[b]=c,c.onclick=function(){var a;if(a=d.J)if(a=d.J,a.A.ca)a=!0;else{var b=null,c,k=ob(a.id);for(c=0;c<k.length&&(b=k[c],b===a||b.A.ready);c++);if(c==k.length)for(c=0;c<k.length&&(b=k[c],b===a||b.A.ca);c++);c==k.length&&(b=a);w("The "+b.type+" component ("+b.id+") is not "+(b.A.ready?"powered yet":"ready yet"+(b.Mc?" (waiting for notification)":""))+".");a=!1}a&&(d.A.V?d.da():wc(d))},!0;
case "speed":return this.H[b]=c,!0;case "setSpeed":return this.H[b]=c,c.onclick=function(){pe(d,d.lb<<1,!0)},c.textContent=this.wb.toFixed(2)+"Mhz",!0}return!1};function zc(a,b,c){a.mb+=b;c&&(a.kb=a.b=a.ma=0)}function qe(a,b){var c=1;b&&1<a.lb&&a.vb&&(c=a.vb/a.ld);a.md=Math.round(1E3/re);a.oc=Math.floor(a.Yc/re*c);b||(a.zb=a.oc);a.xc=0}function oe(a){return a.mb+a.Ka+a.kb-a.b}function je(a){a.vb=0;a.nd=0;a.mb=a.Ka=a.kb=a.b=a.ma=0;ke(a);pe(a,1)}
function pe(a,b,c){var d=!1;if(void 0!==b){.8>a.vb/a.wb?b=1:d=!0;a.lb=b;b=a.ld*a.lb;if(a.wb!=b){a.wb=b;b=a.wb.toFixed(2)+"Mhz";var e=a.H.setSpeed;e&&(e.textContent=b);a.v("target speed: "+b)}c&&a.J&&se(a.J)}zc(a,a.Ka);a.Ka=0;a.Ja=gb();a.jb=0;qe(a);return d}function od(a,b){var c=a.ha.length;a.ha.push([-1,b]);return c}function qd(a,b,c,d){0<=b&&b<a.ha.length&&(d||0>a.ha[b][0])&&(c=a.Yc*a.lb/1E3*c|0,a.A.V&&(c+=te(a)),a.ha[b][0]=c)}
function ue(a,b){for(var c=a.ha.length-1;0<=c;c--){var d=a.ha[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function ve(a){for(var b=[],c=0;c<a.ha.length;c++)b.push(a.ha[c][0]);return b}function yc(a,b){for(var c=a.ha.length-1;0<=c;c--){var d=a.ha[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function te(a,b){var c=a.kb-=a.b;a.b=a.ma=0;b&&(a.kb=0);return c}
h.ih=function(){if(this.A.V){this.xc>=this.Yc&&qe(this,!0);this.Qb=0;this.lc=gb();if(this.jb){var a=this.lc-this.jb;a>this.md&&(this.Ja+=a,this.Ja>this.lc&&(this.Ja=this.lc))}try{do{var b=ue(this,this.A.Mb?1:this.oc);try{this.Ac(b)}catch(e){if("number"!=typeof e)throw e;}b=te(this,!0);this.Qb+=b;this.Ka+=b;Ac(this,b);yc(this,b);this.zb-=b;if(0>=this.zb){this.zb+=this.oc;++this.nd>=we&&(this.J&&H(this.J,void 0),this.nd=0);break}}while(this.A.V)}catch(e){this.da();this.J&&this.J.stop(gb(),oe(this));
Db(this,e.stack||e.message);return}if(this.A.V){a=setTimeout;b=this.Zd;this.jb=gb();var c=this.md;this.Qb&&(c=Math.round(c*this.Qb/this.oc));var c=c-(this.jb-this.lc),d=this.jb-this.Ja;d&&(this.vb=Math.round(this.Ka/(10*d))/100,864E5<=d&&(this.mb=0,pe(this)));if(0>c||this.vb<this.wb)-1E3>c&&(this.Ja-=c),c=0;this.xc+=this.Qb;this.jb+=c;a(b,c)}}};
function wc(a,b){if(!Eb(a))if(a.A.V)a.v(a.toString()+" busy");else{pe(a);a.A.V=!0;a.A.Rc=!0;var c=a.H.run;c&&(c.textContent="Halt");a.J&&(b&&se(a.J,!0),a.J.start(a.Ja,oe(a)));a.D||a.status("Started");setTimeout(a.Zd,0)}}h.Ac=function(){return 0};h.da=function(a){var b=!1;if(this.A.V){te(this);zc(this,this.Ka);this.Ka=0;this.A.V=!1;if(b=this.H.run)b.textContent="Run";this.J&&this.J.stop(gb(),oe(this));b=!0;this.D||this.status("Stopped")}this.A.complete=a;return b};var re=30,we=15,he=["power","reset"];
function xe(a){var b=+a.model||1170;ge.call(this,a,6666667);this.ka=b;this.Tc=+a.addrReset||0;this.La=this.w=this.N=this.C=this.G=this.K=this.I=0;this.g=this.ua=this.Y=[];this.M=this.B=this.Ha=this.vc=[];this.hb=this.O=this.Td=this.xb=this.yb=this.qb=this.ib=this.P=this.sc=this.nb=this.Ga=this.S=this.tc=this.uc=this.X=this.i=0;this.Wd=[4,2,0,1];this.yc=0;this.Yd=255;1120>=this.ka?(this.be=ye.bind(this),this.Kb=this.Df,this.yc=8,this.Yd=-1,this.fe=255,this.ee=0):(this.be=ze.bind(this),this.Kb=this.Ef,
this.fe=~(1792|(1140>=this.ka?2048:0))&65535,this.ee=1140<this.ka?2048:0);this.Cc=this.Bc=this.qa=0;this.R=null;this.kc=[];this.hc=this.bd=this.pe;this.ic=this.cd=this.te;this.Sc=this.hd=this.ze;this.jc=this.kd=this.Ae;this.Ia=this.tb=this.pc=this.rc=0;this.ya=this.se;this.pa=this.Ed;this.Gb=this.Jd;this.u=this.j=this.Wc=this.U=this.Z=0;this.A.complete=!1}p(xe,ge);h=xe.prototype;
h.Ba=function(a,b,c,d){ge.prototype.Ba.call(this,a,b,c,d);this.bd=b.Ld.bind(b);this.cd=b.zc.bind(b);this.hd=b.Md.bind(b);this.kd=b.Zb.bind(b)};h.Da=function(a,b){for(var c=192,d=0;d<this.kc.length;d++){var e=this.kc[d];0>e.Eb&&(e.Eb=c,c+=4)}return ge.prototype.Da.call(this,a,b)};
h.reset=function(){this.status("Model "+this.ka);this.A.V&&this.da();this.C=65536;this.G=32768;this.K=65535;this.I=32768;this.w=15;this.g=[0,0,0,0,0,0,0,this.Tc,-1,-2,-3,-4,-5,-6,-7,-8];this.ua=[0,0,0,0,0,0];this.Y=[0,0,0,0];this.M=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.B=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,
65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.Ha=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.vc=[0,0,0,0,0,0,0,0];this.N=0;this.La=-1;this.u=this.j=this.Wc=this.U=this.Z=this.i=this.sc=0;uc(this);je(this);this.A.error=!1;ge.prototype.reset.call(this)};function uc(a){a.S=0;a.tc=0;a.uc=0;a.X=0;a.P=0;a.nb=0;a.Ga=255;a.xb=0;a.yb=0;a.qb=0;a.ib=262143;a.hb=a.g[7];a.O=0;a.R=null;a.F&&(Ae(a),a.Td=jd(a.F))}
function Ae(a){a.hc=a.bd;a.ic=a.cd;a.Sc=a.hd;a.jc=a.kd;a.pc&&(a.hc=a.pe,a.ic=a.te);a.rc&&(a.Sc=a.ze,a.jc=a.Ae);a.xb?(a.Ia=65536,a.tb=a.X&16?4186112:253952,a.ya=a.se,a.pa=a.pc?a.ah:a.Ed,a.Gb=a.rc?a.vi:a.Jd,bd(a.F,a.X&16?22:18)):(a.Ia=0,a.tb=57344,a.ya=a.Hf,a.pa=a.pc?a.$g:a.ye,a.Gb=a.rc?a.ui:a.De,bd(a.F,16))}function wd(a){var b=a.S;b&57344||(b=b&-3199|a.yb<<5|a.qb<<1);return b}
function xd(a,b){b&=-3073;if(a.S!=b){b&57344&&!(a.S&57344)&&(a.tc=a.O>>16&65535,a.uc=a.O&65535);a.S=b;a.yb=(b&96)>>5;a.qb=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.xb!=c&&(a.xb=c,Ae(a))}}function yd(a){a.S&57344||(a.tc=a.O>>16&65535);a=a.tc;a&65280&&(a=(a<<8|a>>8)&65535);return a}function zd(a){a.S&57344||(a.uc=a.O&65535);return a.uc}function Ad(a,b){1170>a.ka&&(b&=-49);a.X!=b&&(a.X=b,a.ib=b&16?4194303:262143,Ae(a))}
function Be(a,b,c,d){a.Tc=b;tc(a,b);Dd(a,0);a.F.reset();uc(a);if(c){a.g[0]=d||0;for(b=1;5>=b;b++)a.g[b]=0;a.g[6]=1024;a.A.ca?a.A.V||wc(a):a.A.ra=!0}else a.D&&a.A.ca?a.da()||a.J.A.reset||(le(a.D),H(a.J,-1)):!1===c&&a.da();!a.A.V&&a.ta&&a.ta.stop()}h.qe=function(){return 0};
h.save=function(){var a=new G(this);a.set(0,[this.g,this.ua,this.Y,this.M,this.B,this.Ha,this.vc,this.P,this.sc,this.nb,this.Ga,this.yb,this.qb,this.hb,this.i,this.O,this.La,this.Bc,this.Cc,this.Tc]);a.set(1,[Cd(this),wd(this),yd(this),zd(this),this.X]);a.set(2,[this.mb,this.lb,this.A.ra]);a.set(3,Ce(this));a.set(4,ve(this));return a.data()};
h.restore=function(a){var b=ia(a[0]);this.g=b.next().value;this.ua=b.next().value;this.Y=b.next().value;this.M=b.next().value;this.B=b.next().value;this.Ha=b.next().value;this.vc=b.next().value;this.P=b.next().value;this.sc=b.next().value;this.nb=b.next().value;this.Ga=b.next().value;this.yb=b.next().value;this.qb=b.next().value;this.hb=b.next().value;this.i=b.next().value;this.O=b.next().value;this.La=b.next().value;this.Bc=b.next().value;this.Cc=b.next().value;this.Tc=b.next().value;b=a[1];Dd(this,
b[0]);xd(this,b[1]);this.tc=b[2];this.uc=b[3];Ad(this,b[4]);b=a[2];this.mb=b[0];pe(this,b[1]);this.A.ra=b[2];for(var b=a[3],c=b.length-1;0<=c;c--){var d;a:{for(d=0;d<this.kc.length;d++){var e=this.kc[d];if(e.Eb===b[c]){d=e;break a}}d=null}d&&(d.next=this.R,this.R=d)}a=a[4];for(b=0;b<this.ha.length&&b<a.length;b++)this.ha[b][0]=a[b];return!0};function De(a){return a.C&65536?1:0}function Ee(a){return a.G&32768?2:0}function Fe(a){return a.K&65535?0:4}function Ge(a){return a.I&32768?8:0}
function He(a,b){var c=a.g[7];a.g[7]=c+b&65535;return c}function Ie(a,b,c){c&&(tc(a,a.g[7]+(b<<24>>23)),a.b-=2);a.b-=3}function tc(a,b){a.g[7]=b&65535}function rd(a,b,c,d){b={Eb:b,ob:c,message:d||0,name:Sb[b],next:null};a.kc.push(b);return b}function Je(a,b){var c=a.R;if(c==b)a.R=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.R&&(a.i|=1)}
function pd(a,b){if(b){if(b!=a.R){var c=a.R;if(!c||c.ob<=b.ob)b.next=c,a.R=b;else{do{var d=c.next;if(!d||d.ob<=b.ob){b.next=d;c.next=b;break}c=d}while(c)}}a.i|=1;b.message&&E(a,b.message|8)&&F(a,"setIRQ(vector="+u(b.Eb)+",priority="+b.ob+")",!0,!0)}}function vd(a,b){b&&(Je(a,b),b.message&&E(a,b.message|8)&&F(a,"clearIRQ(vector="+u(b.Eb)+",priority="+b.ob+")",!0,!0))}function Ce(a){var b=[];for(a=a.R;a;)b.push(a.Eb),a=a.next;return b}
function Ke(a){return a.i&64?(a.sa(168,64,-6),!0):a.i&32?(a.sa(4,32,-5),!0):a.i&16?(a.sa(12,16,-7),!0):!1}function Cd(a){return a.w=a.w&63728|Ge(a)|Fe(a)|Ee(a)|De(a)}function Dd(a,b){b&=a.fe;a.I=b<<12;a.K=~b&4;a.G=b<<14;a.C=b<<16;if((b^a.w)&a.ee)for(var c=a.ua.length;0<=--c;){var d=a.g[c];a.g[c]=a.ua[c];a.ua[c]=d}a.N=b>>14&3;c=a.w>>14&3;a.N!=c&&(a.Y[c]=a.g[6],a.g[6]=a.Y[a.N]);a.w=b;a.i&=-3;a.i|=a.R?2:1}function Bd(a,b){if(b&=65024){var c=b>>9;do b+=34;while(c>>=1);a.i|=1}a.nb=b}
h.Ea=function(a){this.I=this.K=a;this.G=0};h.pb=function(a,b){this.I=this.K=this.C=a;this.G=b||0};function Le(a,b){a.I=a.K=a.C=b;a.G=a.I^a.C>>1}function Me(a,b,c,d){a.I=a.K=a.C=b;a.G=(c^d)&(d^b)}
h.sa=function(a,b,c){if(!this.qa){0>this.La?this.La=Cd(this):this.N||(c=-4);-4==c&&(this.i&256&&(c=-1),this.i|=256,this.P|=4,this.g[6]=a=4);if(-1!=c){this.O=a|4143316992;this.N=0;var d=this.pa(a|this.Ia),e=this.pa(a+2&65535|this.Ia);Dd(this,e&-12289|this.La>>2&12288);Ne(this,this.La);Ne(this,this.g[7]);tc(this,d)}this.b-=5;this.i&=~(b|19);this.i|=129;this.La=-1;this.Bc=c;this.Cc=a;-1==c&&this.da();if(-4<=c)throw a;}};
function Oe(a){var b=Pe(a),c=Pe(a);a.w&49152&&(c=c&-225|a.w&63712);tc(a,b);Dd(a,c);a.i&=-17}function Qe(a,b){var c=b>>13&31;31>c&&(b=a.X&32?a.Ha[c]+(b&8191)&4194303:b&-3932161);return b}
function Re(a,b,c){var d=[];if(c){c=Qe(a,b);var e=b>>13&31;d.push(c);d.push(e);a.X&32&&(d.push(a.Ha[e]),d.push(b&8191))}else if(a.xb){var e=a.N<<1,f=b>>13;7<f&&(e|=1);a.X&a.Wd[a.N]||(f&=7);b&=8191;var g=a.M[a.N][f]<<6;c=g+b&a.ib;3932160<=c&&(c=Qe(a,c));d.push(c);d.push(b);d.push(e);d.push(f&7);d.push(g);d.push(a.ib)}else c=b&65535,57344<=c&&(c|=a.tb),d.push(c);return d}
function Dc(a,b,c){var d,e,f;if(!(c&a.xb))return f=b&65535,57344<=f&&(f|=a.tb),f;d=b>>13;a.X&a.Wd[a.N]||(d&=7);e=a.B[a.N][d];f=(a.M[a.N][d]<<6)+(b&8191)&a.ib;3932160<=f&&(f=Qe(a,f));if(a.qa)return f;f>=a.Td&&f<a.tb?(a.P|=32,a.sa(4,0,f)):f&1&&!(c&1)&&(a.P|=64,a.sa(4,0,f));var g=0;switch(e&7){case 1:g=4096;case 2:e|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:e|=c&4?192:128;break;default:g=32768}32512!=(e&32520)&&(e&8?e&32512&&(b&8128)<(e>>2&8128)&&(g|=16384):(b&8128)>(e>>2&8128)&&
(g|=16384));a.B[a.N][d]=e;if(f!=(4194170&a.ib)||a.N)a.yb=a.N,a.qb=d;g&&(g&57344&&(0<=a.La&&(g|=128),a.S&57344||(g|=a.S&4096|a.yb<<5|a.qb<<1,xd(a,a.S&-61695|g&61694)),a.sa(168,64,-2)),a.S&61440||!(f<(4191360&a.ib)||f>(4194239&a.ib))||(a.S|=4096,a.S&512&&(a.i|=64)));return f}function Pe(a){var b=a.pa(a.g[6]|a.Ia);a.g[6]=a.g[6]+2&65535;return b}function Ne(a,b){var c=a.g[6]-2&65535;a.g[6]=c;a.O=a.O&65535|(a.O&-65536)<<8|16121856;a.i&256||a.Kb(4,-2,c);a.Gb(c,b)}
function Se(a,b,c,d){var e,f,g=d&8?0:a.Ia;switch(b){case 0:return a.sa(4,0,-3),0;case 1:return 6==c&&a.Kb(d,0,a.g[6]),a.b-=3,7==c?a.g[c]:a.g[c]|g;case 2:f=2;e=a.g[c];6==c&&a.Kb(d,f,e);7!=c&&(e|=g,6>c&&d&1&&(f=1));a.b-=3;break;case 3:f=2;e=a.g[c];7!=c&&(e|=g);e=a.pa(e);e|=g;a.b-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);e=a.g[c]+f&65535;6==c&&a.Kb(d,f,e);7!=c&&(e|=g);a.b-=4;break;case 5:f=-2;e=a.g[c]-2&65535;7!=c&&(e|=g);e=a.pa(e)|g;a.b-=8;break;case 6:return e=a.pa(He(a,2)),e=e+a.g[c]&65535,6==c&&a.Kb(d,
0,e),a.b-=6,e|g;case 7:return e=a.pa(He(a,2)),e=e+a.g[c]&65535,e=a.pa(e|a.Ia),a.b-=10,e|g}a.g[c]=a.g[c]+f&65535;a.O=a.O&65535|(a.O&-65536)<<8|(f<<3&248|c)<<16;return e}h.Df=function(a,b,c){!this.N&&0>=b&&c<=this.Ga&&(this.i|=32)};h.Ef=function(a,b,c){this.N||(65534<=c&&(c|=-65536),a&4&&c<=this.Ga&&(c<=this.Ga-32?this.sa(4,0,-4):(this.P|=8,this.i|=32)))};h.pe=function(a){this.D&&ce(this.D,a,1);return this.bd(a)};h.te=function(a){this.D&&ce(this.D,a,2);return this.cd(a)};
h.ze=function(a,b){this.D&&de(this.D,a,1);this.hd(a,b)};h.Ae=function(a,b){this.D&&de(this.D,a,2);this.kd(a,b)};function Fc(a,b){a.qa++;b=a.F.zc(Dc(a,b,2));a.qa--;return b}function Te(a,b){(b?--a.rc:--a.pc)||Ae(a)}h.Hf=function(a,b,c){return Se(this,a,b,c)};h.se=function(a,b,c){return Dc(this,Se(this,a,b,c),c)};h.ye=function(a){return this.F.zc(this.hb=a)};h.$g=function(a){this.D&&ce(this.D,a,2);return this.ye(a)};h.Ed=function(a){return this.F.zc(this.hb=Dc(this,a,2))};
h.ah=function(a){this.D&&ce(this.D,a,2);return this.Ed(a)};h.De=function(a,b){this.F.Zb(this.hb=a,b)};h.ui=function(a,b){this.D&&de(this.D,a,2);this.De(a,b)};h.Jd=function(a,b){this.F.Zb(this.hb=Dc(this,a,4),b)};h.vi=function(a,b){this.D&&de(this.D,a,2);this.Jd(a,b)};function Ue(a,b,c){var d=a.j=b&7;(b=a.u=(b&56)>>3)?(d=Se(a,b,d,2),c&65536||61440!==(a.w&61440)&&(d&=65535),a.N=a.w>>12&3,c=a.pa(d|c&a.Ia),a.N=a.w>>14&3):c=6!=d||(a.w>>2&12288)===(a.w&12288)?a.g[d]:a.Y[a.w>>12&3];return c}
function Ve(a,b,c,d){a.O=a.O&65535|1441792;var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=Se(a,b,e,4),c&65536||(e&=65535),a.N=a.w>>12&3,e=Dc(a,e|c&65536,4),a.N=a.w>>14&3,a.jc(e,d)):6!=e||(a.w>>2&12288)===(a.w&12288)?a.g[e]=d:a.Y[a.w>>12&3]=d}function We(a,b){b>>=6;var c=a.Z=b&7;return(b=a.U=(b&56)>>3)?a.hc(a.ya(b,c,3)):a.g[c+a.yc]&a.Yd}function Xe(a,b){var c;b>>=6;var d=a.Z=b&7;(b=a.U=(b&56)>>3)?c=a.ic(a.ya(b,d,2)):c=a.g[d+a.yc];return c}function Ye(a,b){var c=a.j=b&7;b=a.u=(b&56)>>3;return Se(a,b,c,8)}
function Ze(a,b){var c=a.j=b&7;return(b=a.u=(b&56)>>3)?a.hc(a.ya(b,c,3)):a.g[c]&255}function $e(a,b){var c,d=a.j=b&7;(b=a.u=(b&56)>>3)?c=a.ic(a.ya(b,d,2)):c=a.g[d];return c}function af(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.Wc=a.ya(b,e,7),c=0>c?a.g[-c-1]&255:c,a.Sc(e,d.call(a,c,a.hc(e))),e&1&&a.b--):(b=a.g[e],c=0>c?a.g[-c-1]&255:c,a.g[e]=b&65280|d.call(a,c,b&255))}
function P(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.ya(b,e,6),a.jc(e,d.call(a,0>c?a.g[-c-1]:c,a.ic(e)))):a.g[e]=d.call(a,0>c?a.g[-c-1]:c,a.g[e])}function bf(a,b,c,d,e){var f=a.j=b&7;(b=a.u=(b&56)>>3)?(d=a.ya(b,f,5),e.call(a,(c=0>c?a.g[-c-1]&255:c)<<8),a.Sc(d,c),d&1&&a.b--):(c?(c=0>c?a.g[-c-1]&255:c,a.g[f]=a.g[f]&~d|c<<24>>24&d):a.g[f]&=~d,e.call(a,c<<8))}
function cf(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.ya(b,e,4),d.call(a,c=0>c?a.g[-c-1]:c),a.jc(e,c)):(a.g[e]=c=0>c?a.g[-c-1]:c,d.call(a,c))}
h.Ac=function(a){this.A.complete=!0;var b=this.D?df(this.D)?1:this.A.Rc?-1:0:0,c=a?this.A.Rc?0:1:-1;this.A.Rc=!1;this.kb=this.b=a;this.i=this.i&-5|(b?4:0);do{if(this.i){if(this.i&4){if(ef(this.D,this.g[7],c)){this.da();break}++b||(this.i&=-5);c||c++}if(a=this.i&11)if(a=!1,this.i&2){var d=160,e=(this.nb&224)>>5,f=this.R&&this.R.ob>e?this.R:null;f&&(d=f.Eb,e=f.ob);e>(this.w&224)>>5?(this.i&8&&(He(this,2),this.i&=-9),this.sa(d,0,-10),e=!0):e=!1;e&&(f&&Je(this,f),a=!0);this.R||this.nb||(this.i&=-3)}else this.i&
1&&this.i++;if(a){if(this.i&4&&ef(this.D,this.g[7],c)){this.da();break}if(0>c)break}if(this.i&112&&Ke(this)){if(this.i&4&&ef(this.D,this.g[7],c)){this.da();break}if(0>c)break}}this.i=this.i&15|this.w&16;a=this.O=this.g[7];f=this.pa(a);this.g[7]=a+2&65535;this.be(f)}while(0<this.b);return this.A.complete?this.kb-this.b:!1===this.A.complete?-1:0};Sa(function(){for(var a=A(document,y,"cpu"),b=0;b<a.length;b++){var c=a[b],d=kb(c),d=new xe(d);jb(d,c)}});
function ff(a,b){var c=b+a;this.I=this.K=this.C=c;this.G=(a^c)&(b^c);return c&65535}function Cf(a,b){var c=b+a,d=c<<8;this.I=this.K=this.C=d;this.G=(a<<8^d)&(b<<8^d);return c&255}function Df(a,b){a=b<<1;Le(this,a);return a&65535}function Ef(a,b){a=b<<1;Le(this,a<<8);return a&255}function Ff(a,b){a=b&32768|b>>1|b<<16;Le(this,a);return a&65535}function Gf(a,b){a=b&128|b>>1|b<<8;Le(this,a<<8);return a&255}function Hf(a,b){a=b&~a;this.Ea(a);return a}function If(a,b){a=b&~a;this.Ea(a<<8);return a}
function Jf(a,b){a|=b;this.Ea(a);return a}function Kf(a,b){a|=b;this.Ea(a<<8);return a}function Lf(a,b){a=~b|65536;this.pb(a);return a&65535}function Mf(a,b){a=~b|256;this.pb(a<<8);return a&255}function Nf(a,b){this.I=this.K=a=b-a;this.G=b&(b^a);return a&65535}function Of(a,b){a=b-a;var c=a<<8;b<<=8;this.I=this.K=c;this.G=b&(b^c);return a&255}function Pf(a,b){this.I=this.K=a=b+a;this.G=a&(b^a);return a&65535}function Qf(a,b){a=b+a;var c=a<<8;this.I=this.K=c;this.G=c&(b<<8^c);return a&255}
function Rf(a,b){a=-b;this.pb(a,a&b&32768);return a&65535}function Sf(a,b){a=-b;this.pb(a<<8,(a&b&128)<<8);return a&255}function Tf(a,b){a=b<<1|this.C>>16&1;Le(this,a);return a&65535}function Uf(a,b){a=b<<1|this.C>>16&1;Le(this,a<<8);return a&255}function Vf(a,b){a=(this.C&65536|b)>>1|b<<16;Le(this,a);return a&65535}function Wf(a,b){a=((this.C&65536)>>8|b)>>1|b<<8;Le(this,a<<8);return a&255}function Xf(a,b){var c=b-a;Me(this,c,a,b);return c&65535}
function Yf(a,b){var c=b-a;Me(this,c<<8,a<<8,b<<8);return c&255}function Zf(a,b){this.I=this.K=b&65280;this.G=this.C=0;return(b<<8|b>>8)&65535}function $f(a,b){a^=b;this.Ea(a);return a&65535}function ag(a){P(this,a,Xe(this,a),ff);this.b-=this.u?9+(this.Z&&6<=this.j?1:0):(this.U?5:3)+(7==this.j?2:0)}
function bg(a){var b=$e(this,a);a=a>>6&7;var c=this.g[a];c&32768&&(c|=4294901760);this.C=this.G=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.C=c<<17-b,c>>=b;else if(b)if(16<b)this.G=c,c=0;else{this.C=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.G=32768)}this.g[a]=c&65535;this.I=this.K=c;this.b-=(this.u?6:7)+b}
function cg(a){var b=$e(this,a);a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.C=this.G=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.C=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.C=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.G=32768)):d=c;this.g[a]=d>>16&65535;this.g[a|1]=d&65535;this.I=d>>16;this.K=d>>16|d;this.b-=(this.u?6:7)+b}function dg(a){Ie(this,a,!De(this))}function eg(a){Ie(this,a,De(this))}
function fg(a){P(this,a,Xe(this,a),Hf);this.b-=this.u?9+(this.Z&&6<=this.j?1:0):(this.U?5:3)+(7==this.j?2:0)}function gg(a){af(this,a,We(this,a),If);this.b-=this.u?9+(this.Z&&6<=this.j?1:0):(this.U?5:3)+(7==this.j?2:0)}function hg(a){P(this,a,Xe(this,a),Jf);this.b-=this.u?9+(this.Z&&6<=this.j?1:0):(this.U?5:3)+(7==this.j?2:0)}function ig(a){af(this,a,We(this,a),Kf);this.b-=this.u?9+(this.Z&&6<=this.j?1:0):(this.U?5:3)+(7==this.j?2:0)}
function jg(a){var b=Xe(this,a);a=$e(this,a);this.Ea((0>b?this.g[-b-1]:b)&a);this.b-=this.u?4+(this.Z&&6<=this.j?1:0):(this.U?4:3)+(7==this.j?2:0)}function kg(a){var b=We(this,a);a=Ze(this,a);this.Ea(((0>b?this.g[-b-1]&255:b)&a)<<8);this.b-=this.u?4+(this.Z&&6<=this.j?1:0):(this.U?4:3)+(7==this.j?2:0)}function lg(a){Ie(this,a,Fe(this))}function mg(a){Ie(this,a,!Ge(this)==!Ee(this))}function ng(a){Ie(this,a,!Fe(this)&&!Ge(this)==!Ee(this))}function og(a){Ie(this,a,!De(this)&&!Fe(this))}
function pg(a){Ie(this,a,Fe(this)||!Ge(this)!=!Ee(this))}function qg(a){Ie(this,a,De(this)||Fe(this))}function rg(a){Ie(this,a,!Ge(this)!=!Ee(this))}function sg(a){Ie(this,a,Ge(this))}function tg(a){Ie(this,a,!Fe(this))}function ug(a){Ie(this,a,!Ge(this))}function vg(){this.sa(12,0,-9)}function wg(a){Ie(this,a,!0)}function xg(a){Ie(this,a,!Ee(this))}function yg(a){Ie(this,a,Ee(this))}function zg(a){a&1&&(this.C=0);a&2&&(this.G=0);a&4&&(this.K=1);a&8&&(this.I=0);this.b-=5}
function Ag(a){var b=Xe(this,a);a=$e(this,a);var c=(b=0>b?this.g[-b-1]:b)-a;Me(this,c,a,b);this.b-=this.u?4+(this.Z&&6<=this.j?1:0):(this.U?4:3)+(7==this.j?2:0)}function Bg(a){var b=We(this,a);a=Ze(this,a);var c=(b=(0>b?this.g[-b-1]&255:b)<<8)-(a<<=8);Me(this,c,a,b);this.b-=this.u?4+(this.Z&&6<=this.j?1:0):(this.U?4:3)+(7==this.j?2:0)}
function Cg(a){var b=$e(this,a);if(b){a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.C=this.G=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.g[a]=d&65535,this.g[a|1]=c-d*b&65535,this.K=d>>16|d,this.I=d>>16):(this.G=32768,this.K=d>>15|d,this.I=c>>16,-1===b&&65534===this.g[a]&&(this.g[a]=this.g[a|1]=1));this.b-=53}else this.K=this.I=0,this.G=32768,this.C=65536,this.b-=7}function Dg(){this.sa(24,0,-9);this.b-=20}
function Eg(){this.w&49152?(this.P|=128,this.sa(4,0,-8)):(this.ta&&1120==this.ka&&this.ta.setData(this.g[0],!0),this.D?Fg(this.D):this.da());this.b-=7}function Gg(){this.sa(16,0,-9);this.b-=20}var Hg=[0,7,7,10,7,11,9,13];function Ig(a){this.ma=this.b;tc(this,Ye(this,a));this.b=this.ma-Hg[this.u]}var Jg=[0,14,14,17,14,18,16,20];function Kg(a){this.ma=this.b;var b=Ye(this,a);a=a>>6&7;Ne(this,this.g[a]);this.g[a]=this.g[7];tc(this,b);this.b=this.ma-Jg[this.u]}
var Lg=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];function Mg(a){var b=Xe(this,a);this.ma=this.b;cf(this,a,b,this.Ea);this.b=this.ma-Lg[(this.U?8:0)+this.u]+(7!=this.j||this.u?0:2)}function Ng(a){var b=We(this,a);bf(this,a,b,65535,this.Ea);this.b-=this.u?9+(this.Z&&6<=this.j?1:0):(this.U?5:3)+(7==this.j?2:0)}var Og=[7,13,13,17,14,18,17,21];
function Pg(a){var b=$e(this,a);a=a>>6&7;b=(b<<16>>16)*(this.g[a]<<16>>16);this.g[a]=b>>16&65535;this.g[a|1]=b&65535;b|=0;this.I=b>>16;this.K=this.I|b;this.G=0;this.C=-32768>b||32767<b?65536:0;this.b-=23}function Qg(){this.b-=5}function Rg(){this.w&49152||(this.F.reset(),uc(this),this.ta&&this.ta.setData(this.g[0],!0));this.b-=667}function Sg(a){if(a&8)Q.call(this,a);else{var b=Pe(this);a&=7;7==a?tc(this,b):(tc(this,this.g[a]),this.g[a]=b);this.b-=9}}function Tg(){Oe(this);this.b-=13}
function Ug(a){a&1&&(this.C=65536);a&2&&(this.G=32768);a&4&&(this.K=0);a&8&&(this.I=32768);this.b-=5}function Vg(a){var b=(a&448)>>6;if(this.g[b]=this.g[b]-1&65535)tc(this,this.g[7]-((a&63)<<1)),this.b+=1;this.b-=6}function Wg(a){P(this,a,Xe(this,a),Xf);this.b-=this.u?9+(this.Z&&6<=this.j?1:0):(this.U?5:3)+(7==this.j?2:0)}function Xg(a){P(this,a,0,Zf);this.b-=this.u?9:3+(7==this.j?2:0)}function Yg(){this.sa(28,0,-9)}
function Zg(){this.ta&&(this.ta.Gd(this.g[7],!0),this.ta.setData(this.g[0],!0));this.i|=8;He(this,-2);this.b-=3}function $g(a){P(this,a,this.g[(a>>6&7)+this.yc],$f);this.b-=this.u?9:3+(7==this.j?2:0)}function Q(a){var b;if(b=this.D)b=this.D,E(b,1)?(F(b,"undefined opcode "+K(b,a),!0,!0),b=Fg(b)):b=!1;b||this.sa(8,0,-9)}function ye(a){ah[a>>12].call(this,a)}function bh(a){ch[a>>6&3].call(this,a)}function dh(a){eh[a>>6&3].call(this,a)}function fh(a){gh[a>>6&3].call(this,a)}
function hh(a){ih[a&15].call(this,a)}function jh(a){kh[a&15].call(this,a)}function lh(a){mh[a>>6&3].call(this,a)}function nh(a){oh[a>>6&3].call(this,a)}function ph(a){qh[a>>6&3].call(this,a)}
var ah=[function(a){rh[a>>8&15].call(this,a)},Mg,Ag,jg,fg,hg,ag,Q,function(a){sh[a>>8&15].call(this,a)},Ng,Bg,kg,gg,ig,Wg,Q],rh=[function(a){th[a>>4&15].call(this,a)},wg,tg,lg,mg,rg,ng,pg,Kg,Kg,bh,dh,fh,Q,Q,Q],ch=[function(a){cf(this,a,0,this.pb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Lf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,1,Pf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,1,Nf);this.b-=this.u?9:3+(7==this.j?2:0)}],eh=[function(a){P(this,a,0,Rf);
this.b-=this.u?11:6},function(a){P(this,a,De(this)?1:0,ff);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,De(this)?1:0,Xf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=$e(this,a);this.pb(a);this.b-=this.u?4:3+(7==this.j?2:0)}],gh=[function(a){P(this,a,0,Vf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Tf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Ff);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Df);this.b-=this.u?9:3+(7==this.j?2:0)}],th=
[function(a){uh[a&15].call(this,a)},Q,Q,Q,Ig,Ig,Ig,Ig,Sg,Q,hh,jh,Xg,Xg,Xg,Xg],uh=[Eg,Zg,Tg,vg,Gg,Rg,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q],ih=[Qg,function(){this.C=0;this.b-=5},function(){this.G=0;this.b-=5},zg,function(){this.K=1;this.b-=5},zg,zg,zg,function(){this.I=0;this.b-=5},zg,zg,zg,zg,zg,zg,zg],kh=[Qg,function(){this.C=65536;this.b-=5},function(){this.G=32768;this.b-=5},Ug,function(){this.K=0;this.b-=5},Ug,Ug,Ug,function(){this.I=32768;this.b-=5},Ug,Ug,Ug,Ug,Ug,Ug,Ug],sh=[ug,sg,og,qg,xg,yg,dg,eg,Dg,Yg,lh,nh,
ph,Q,Q,Q],mh=[function(a){bf(this,a,0,255,this.pb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){af(this,a,0,Mf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){af(this,a,1,Qf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){af(this,a,1,Of);this.b-=this.u?9:3+(7==this.j?2:0)}],oh=[function(a){af(this,a,0,Sf);this.b-=this.u?11:6},function(a){af(this,a,De(this)?1:0,Cf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){af(this,a,De(this)?1:0,Yf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=Ze(this,
a);this.pb(a<<8);this.b-=this.u?4:3+(7==this.j?2:0)}],qh=[function(a){af(this,a,0,Wf);this.b-=this.u?9+(this.Wc&1):3+(7==this.j?2:0)},function(a){af(this,a,0,Uf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){af(this,a,0,Gf);this.b-=this.u?9+(this.Wc&1):3+(7==this.j?2:0)},function(a){af(this,a,0,Ef);this.b-=this.u?9:3+(7==this.j?2:0)}];function ze(a){vh[a>>12].call(this,a)}
var vh=[function(a){wh[a>>8&15].call(this,a)},Mg,Ag,jg,fg,hg,ag,function(a){xh[a>>8&15].call(this,a)},function(a){yh[a>>8&15].call(this,a)},Ng,Bg,kg,gg,ig,Wg,Q],wh=[function(a){zh[a>>4&15].call(this,a)},wg,tg,lg,mg,rg,ng,pg,Kg,Kg,bh,dh,fh,function(a){Ah[a>>6&3].call(this,a)},Q,Q],Ah=[function(a){a=this.g[7]+((a&63)<<1)&65535;var b=this.pa(a|this.Ia);tc(this,this.g[5]);this.g[6]=a+2&65535;this.g[5]=b;this.b-=8},function(a){a=Ue(this,a,0);this.Ea(a);Ne(this,a);this.b-=11},function(a){var b=Pe(this);
this.ma=this.b;this.Ea(b);Ve(this,a,0,b);this.b=this.ma-Og[this.u]},function(a){cf(this,a,Ge(this)?65535:0,this.Ea);this.b-=this.u?9:3+(7==this.j?2:0)}],zh=[function(a){Bh[a&15].call(this,a)},Q,Q,Q,Ig,Ig,Ig,Ig,Sg,function(a){!(a&8)||1145>this.ka?Q.call(this,a):(this.w&49152||(this.w=this.w&-225|(a&7)<<5,this.i|=1,this.i&=-3),this.b-=5)},hh,jh,Xg,Xg,Xg,Xg],Bh=[Eg,Zg,function(){Oe(this);this.i|=this.w&16;this.b-=13},vg,Gg,Rg,Tg,function(a){Q.call(this,a)},Q,Q,Q,Q,Q,Q,Q,Q],xh=[Pg,Pg,Cg,Cg,bg,bg,cg,cg,
$g,$g,Q,Q,Q,Q,Vg,Vg],yh=[ug,sg,og,qg,xg,yg,dg,eg,Dg,Yg,lh,nh,ph,function(a){1145>this.ka?Q.call(this,a):Ch[a>>6&3].call(this,a)},Q,Q],Ch=[function(a){Q.call(this,a)},function(a){a=Ue(this,a,65536);this.Ea(a);Ne(this,a);this.b-=11},function(a){var b=Pe(this);this.ma=this.b;this.Ea(b);Ve(this,a,65536,b);this.b=this.ma-Og[this.u]},function(a){Q.call(this,a)}];
function Dh(a){x.call(this,"ROM",a,128);this.ia=this.g=null;this.u=+a.addr;this.b=+a.size;this.w=!1;this.i=a.alias;"string"==typeof this.i&&(this.i=eval(this.i));this.j=a.file;this.B=ta(this.j);if(this.j){a=this.j;var b=ua(this.B);"json"!=b&&"hex"!=b&&(a=Ga()+"/api/v1/dump?file="+this.j+"&format=bytes&decimal=true");var c=this;Ea(a,null,!0,function(a,b,f){f?(c.T("Unable to load ROM resource (error "+f+": "+a+")"),c.j=null):(eb(c.ub,a,b),(a=Fa(a,b))?(c.g=a.aa,c.ia=a.ia):c.j=null);Eh(c)})}}p(Dh,x);
h=Dh.prototype;h.Ba=function(a,b,c,d){this.F=b;this.f=c;this.D=d;Eh(this)};h.Da=function(){this.ia&&(this.D&&Fh(this.D,this.id,this.u,this.b,this.ia),delete this.ia);return!0};h.Ca=function(){return!0};
function Eh(a){if(!Fb(a)){if(a.j){if(!a.g||!a.F)return;a.b||(a.b=a.g.length);if(a.g.length!=a.b)Db(a,"ROM size ("+v(a.g.length,8,!0)+") does not match specified size ("+v(a.b,8,!0)+")");else{var b;a:{b=a.u;if(57344<=b&&b<57344+Jc){var c={},c=(c[b]=[Dh.prototype.Kg,Dh.prototype.bi,null,null,null,a.b>>1],c);if(fc(a.F,a,c)){a.status("Added "+a.b+"-byte ROM at "+u(b));b=a.w=!0;break a}}else if($c(a.F,b,a.b,Kd)){for(c=0;c<a.g.length;c++)id(a.F,b+c,a.g[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.i?
b.push(a.i):null!=a.i&&a.i.length&&(b=a.i);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.F,g=d.b,k=[],l=d.u>>>f.g;0<g&&l<f.b.length;)k.push(f.b[l++]),g-=f.j;f=d.F;d=d.b;g=0;for(e>>>=f.g;0<d&&e<f.b.length;){l=k[g++];if(!l)break;f.b[e++]=l;d-=f.j}}a.w||delete a.g}}}D(a)}}h.Kg=function(a){return this.g[a-this.u]};h.bi=function(){};Sa(function(){for(var a=A(document,y,"rom"),b=0;b<a.length;b++){var c=a[b],d=kb(c),d=new Dh(d);jb(d,c)}});
function Gh(a){x.call(this,"RAM",a);this.ia=this.g=null;this.i=+a.addr;this.j=+a.size;this.Aa=a.load;this.za=a.exec;null!=this.Aa&&(this.Aa=+this.Aa);null!=this.za&&(this.za=+this.za);this.u=this.B=!1;this.b=a.file;this.w=ta(this.b);if(this.b){a=this.b;var b=ua(this.w);"json"!=b&&"hex"!=b&&(a=Ga()+"/api/v1/dump?file="+this.b+"&format=bytes&decimal=true");var c=this;Ea(a,null,!0,function(a,b,f){f?(c.T("Unable to load RAM resource (error "+f+": "+a+")"),c.b=null):(eb(c.ub,a,b),(a=Fa(a,b))?(c.g=a.aa,
c.ia=a.ia,null==c.Aa&&(c.Aa=a.Aa),null==c.za&&(c.za=a.za)):c.b=null);Hh(c)})}}p(Gh,x);Gh.prototype.Ba=function(a,b,c,d){this.F=b;this.f=c;this.D=d;Hh(this)};Gh.prototype.Da=function(a,b){this.ia&&(this.D&&Fh(this.D,this.id,this.i,this.j,this.ia),delete this.ia);b||this.reset();return!0};Gh.prototype.Ca=function(){return!0};
function Hh(a){if(a.F&&(!a.u&&a.j&&($c(a.F,a.i,a.j,kd)?a.u=!0:a.j=0),!Fb(a))){if(!a.u)w("No RAM allocated");else if(a.b){if(!a.g)return;Ih(a,a.g,a.Aa,a.za,a.i)?a.status('Loaded image "'+a.w+'"'):a.T('Error loading image "'+a.w+'"')}a.B=!0;D(a)}}
Gh.prototype.reset=function(){if(this.u&&!this.B){for(var a=this.F,b=this.i,c=this.j,d=b&a.i,b=b>>>a.g;0<c&&b<a.b.length;){var e=a.b[b],f=c,g=0,k,d=d||0,g=(g||0)&255;void 0===f&&(f=e.size);if(Ib&&e.g)for(k=d;f--&&k<e.g.length;k++)e.g[k]=g;else for(k=d;f--&&k<e.size;k++)e.F(d,g,e.L+d);c-=a.j;b++;d=0}this.g&&Ih(this,this.g,this.Aa,this.za,this.i,!this.D)}this.B=!1};
function Ih(a,b,c,d,e,f){var g=!1,k=!1;if(null==c)for(var l=0;l<b.length-1;){var m=b[l]&255|(b[l+1]&255)<<8;if(m)if(m&255){var n=l;if(1!=m){F(a,"invalid signature ("+ra(m)+") at offset "+ra(n),4096);break}if(l+6>=b.length){F(a,"invalid block at offset "+ra(n),4096);break}for(var l=l+2,r=b[l++]&255|(b[l++]&255)<<8,t=b[l++]&255|(b[l++]&255)<<8,m=m+((r&255)+(r>>8)+(t&255)+(t>>8)),q=l,z=r-=6;0<r&&l<b.length;)m+=b[l++]&255,r--;if(r||l>=b.length){F(a,"insufficient data for block at offset "+ra(n),4096);
break}m+=b[l++]&255;if(m&255){F(a,"invalid checksum ("+v(m,2,!0)+") for block at offset "+ra(n),4096);break}if(z)for(F(a,"loading "+ra(z)+" bytes at "+ra(t)+"-"+ra(t+z),4096);z--;)id(a.F,t++,b[q++]&255);else t&1?g=!0:null==d&&(d=t),null!=d&&F(a,"starting address: "+ra(d),4096);k=!0}else l++;else l+=2}if(!k&&(null==c&&(c=e),null!=c)){for(e=0;e<b.length;e++)id(a.F,c+e,b[e]);k=!0}if(k){if(null==d||g)a.f.da(),f=!1;null!=d&&Be(a.f,d,f)}return k}
Sa(function(){for(var a=A(document,y,"ram"),b=0;b<a.length;b++){var c=a[b],d=kb(c),d=new Gh(d);jb(d,c)}});function Jh(a){x.call(this,"Keyboard",a,1024);D(this)}p(Jh,x);Jh.prototype.wa=function(){return!1};Jh.prototype.Ba=function(a,b,c,d){this.J=a;this.f=c;this.D=d};Sa(function(){for(var a=A(document,y,"keyboard"),b=0;b<a.length;b++){var c=a[b],d=kb(c),d=new Jh(d);jb(d,c)}});
function Kh(a){x.call(this,"SerialPort",a,1048576);this.M=+a.adapter;this.S=+a.baudReceive||9600;this.Z=+a.baudTransmit||9600;this.K=a.upperCase;"string"==typeof this.K&&(this.K="true"==this.K);this.u=this.w=null;this.X=+a.tabSize;this.U=+a.charBOL;this.B=0;this.I=!0;this.P=this.N=null;this.R=this.Y=-1;this.C=this.b=this.g=0;this.i=[];var b=a.binding;if("console"==b)this.w="";else{var c;a=Lh;b&&(void 0===c&&(c="Panel"),(c=qb(c,this.id))&&(b=c.H[b])&&this.wa(null,a,b))}this.j=this.G=this.O=null;this.exports=
{connect:this.ue,receiveData:this.Nc,receiveStatus:this.gh,setConnection:this.lh}}p(Kh,x);h=Kh.prototype;
h.wa=function(a,b,c){var d=this;switch(b){case Lh:return this.H[b]=this.u=c,c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?la.Od:la.ac:46==c?b=la.Od:a.ctrlKey&&c>=la.Kd&&c<=la.yf&&(b=c-(la.Kd-la.Fe));b&&(a.preventDefault&&a.preventDefault(),d.Nc(b));return!0},c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==la.He&&(b=la.Ge);d.Nc(b);a.preventDefault&&a.preventDefault()}return!0},c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.Nc(a.getData("Text"))},c.removeAttribute("readonly"),!0}return!1};
h.Ba=function(a,b,c,d){this.J=a;this.F=b;this.f=c;this.D=d;var e=this;this.P=rd(this.f,this.M?-1:48,4,1048576);this.R=od(this.f,function(){var a;a=-1;e.i.length&&(a=e.i.shift()&255,F(e,"receiveByte("+v(a,2,!0)+")"),e.K&&97<=a&&122>a&&(a-=32),qd(e.f,e.R,1E3/Math.round(e.S/10)));0<=a&&(e.C=a,e.b&128?e.C|=49152:e.b|=128,e.b&64&&pd(c,e.P))});this.N=rd(this.f,this.M?-1:52,4,1048576);this.Y=od(this.f,function(){e.g|=128;e.g&64&&pd(c,e.N)});fc(b,this,Mh,this.M?64832+8*(this.M-1)-65392:0);hc(b,this.reset.bind(this));
D(this)};h.ue=function(a){if(!this.j){var b=ie(this.J,"connection");if(b){var c=b.split("->");if(2==c.length){var d=za(c[0]);if(d!=this.Xc)return;c=za(c[1]);if(this.j=pb(c)){var e=this.j.exports;if(e){var f=e.connect;f&&f.call(this.j,this.I);if(this.G=e.receiveData){this.I=a;this.O=e.receiveStatus;this.status("Connected "+this.ub+"."+d+" to "+c);return}}}}this.status("Unable to establish connection: "+b)}}};
h.Da=function(a,b){if(!b)if(this.ue(this.I),!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Ca=function(a){return a?this.save():!0};h.reset=function(){Nh(this)};h.save=function(){var a=new G(this);a.set(0,[this.C,this.b,this.g,this.i]);return a.data()};h.restore=function(a){return Nh(this,a[0])};function Nh(a,b){b||(b=[0,8192,128,a.i]);b=ia(b);a.C=b.next().value;a.b=b.next().value;a.g=b.next().value;a.i=b.next().value;return!0}
h.Nc=function(a){if("number"==typeof a)this.i.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.i.push(b)}else this.i=this.i.concat(a);qd(this.f,this.R,1E3/Math.round(this.S/10));return!0};h.gh=function(a){var b=this.b;this.b&=-12289;a&32&&(this.b|=8192);a&256&&(this.b|=4096);b!=this.b&&(this.b|=32768,this.b&32&&pd(this.f,this.P))};h.lh=function(a,b){return this.j?!1:(this.j=a,this.G=b,!0)};
h.xg=function(){var a=this.b&65534;this.b&=-32769;return a};h.Ph=function(a){var b=a^this.b;this.b=this.b&-112|a&111;this.O&&b&6&&(b=0,b=this.I?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.O.call(this.j,b))};h.wg=function(){this.b&=-129;return this.C};h.Oh=function(){};h.fh=function(){return this.g};h.xi=function(a){this.g&128&&(a&64?pd(this.f,this.N):vd(this.f,this.N));this.g=this.g&-70|a&69};h.eh=function(){return 0};
h.wi=function(a){a&=255;this.G&&this.G.call(this.j,a);a&=127;if(this.u)if(13==a)this.B=0;else if(8==a)this.u.value=this.u.value.slice(0,-1),0<this.B&&this.B--;else{if(a){var b;13!=a&&10!=a&&(b=Aa[a]);b=b?"<"+b+">":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.X||8,c=a-this.B%a,this.X&&(b=ya("",c)));this.U&&!this.B&&c&&(b=String.fromCharCode(this.U)+b);this.u.value+=b;this.u.scrollTop=this.u.scrollHeight;this.B+=c}}else if(null!=this.w){if(10==a||1024<=this.w.length)this.v(this.w),
this.w="";10!=a&&(this.w+=String.fromCharCode(a))}qd(this.f,this.Y,1E3/Math.round(this.Z/10));this.g&=-129};var Lh="buffer",Oh={},Mh=(Oh[65392]=[null,null,Kh.prototype.xg,Kh.prototype.Ph,"RCSR"],Oh[65394]=[null,null,Kh.prototype.wg,Kh.prototype.Oh,"RBUF"],Oh[65396]=[null,null,Kh.prototype.fh,Kh.prototype.xi,"XCSR"],Oh[65398]=[null,null,Kh.prototype.eh,Kh.prototype.wi,"XBUF"],Oh);Sa(function(){for(var a=A(document,y,"serial"),b=0;b<a.length;b++){var c=a[b],d=kb(c),d=new Kh(d);jb(d,c)}});
function Ed(a){x.call(this,"PC11",a,4096);this.N=Ph(this,a.autoMount);this.g=0;this.U=+a.baudReceive||3600;this.w=this.b=0;this.K=32768;this.i=this.R=0;this.C=[];this.B=Qh;this.j=Rh;this.M=this.u="";this.aa=this.Aa=this.za=null;this.P=-1;this.O=!Ma("Mobi")&&window&&"FileReader"in window;this.G=null;this.S=-1;this.I=null}p(Ed,x);function Ph(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){w(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=Ed.prototype;
h.wa=function(a,b,c){var d=this,e=Rh;switch(b){case "listTapes":return this.H[b]=c,c.onchange=function(){var a=d.H.descTape,b=c.options[c.selectedIndex];if(a&&b){var e={};if(b=b.getAttribute("data-value"))try{e=eval("("+b+")")}catch(l){w("PC11 option error: "+l.message)}b=e.desc;void 0===b&&(b="");e=e.href;void 0!==e&&(b='<a href="'+e+'" target="_blank">'+b+"</a>");a.innerHTML=b}},!0;case "descTape":return this.H[b]=c,!0;case "readTape":e=Sh;case "loadTape":return e||(e=Th),this.H[b]=c,c.onclick=
function(){var a=d.H.listTapes;a&&Uh(d,a.options[a.selectedIndex].text,a.value,e)},!0;case "mountTape":if(!this.O){c.parentNode.removeChild(c);break}this.H[b]=c;c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length});c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;Uh(d,ta(b,!0),b,Th,a)}return!1};return!0;case Vh:return this.H[b]=c,!0}return!1};
h.Ba=function(a,b,c,d){this.J=a;this.F=b;this.f=c;this.D=d;this.I=Wh(a);var e=this;if(a=Ph(this,ie(this.J,"autoMount")))for(var f in a)"PTR"==f&&(this.N[f]=a[f]);this.G=rd(this.f,56,4,4096);this.S=od(this.f,function(){1!=(e.b&32769)||e.b&128||(e.i<e.C.length?(e.w=e.C[e.i]&255,E(e)&&F(e,e.type+".advanceReader("+e.i+"): "+v(e.w,2,!0),!0),e.i++,Xh(e,e.i/e.C.length*100)):e.b|=32768,e.b|=128,e.b&=-2049,e.b&64&&pd(e.f,e.G))});fc(b,this,Yh);hc(b,this.reset.bind(this));Zh(this,"None",Qh,!0);this.O&&Zh(this,
"Local Tape",$h);Zh(this,"Remote Tape",ai);bi(this)||D(this)};h.Da=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Ca=function(a){return a?this.save():!0};h.reset=function(){this.b&=-2241;this.w=0};function bi(a){a.g=0;var b=a.N.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.H.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=ta(c,!0)}c&&b?ci(a,b,c,Th,!0):di(a)}return!!a.g}
function Uh(a,b,c,d,e){if(c)if(c==$h)a.T('Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==ai){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=ta(c);a.status("Attempting to load "+c+' as "'+b+'"');a.B=ai}else a.B=c;ci(a,b,c,d,!1,e)}else ei(a,!1)}
function ci(a,b,c,d,e,f){var g=-1;if(a.u.toLowerCase()!=c.toLowerCase()||a.j!=d)g++,ei(a,!0),a.A.cb?a.T("PC11 busy"):(e&&(a.g++,E(a)&&F(a,"auto-loading tape: "+b)),fi(a,b,c,d,f)?g++:a.A.cb=!0);g&&gi(a,a.M,a.u,a.j,a.aa,a.Aa,a.za)}
function fi(a,b,c,d,e){var f=c;if(e){var g=new FileReader;g.onload=function(){var e=g.result;e&&(e=new Uint8Array(e,0,e.byteLength),gi(a,b,c,d,e),a.B=$h);a.A.cb=!1;di(a)};g.readAsArrayBuffer(e);return!1}0>c.indexOf("/api/v1/dump")&&(e=ua(c),f="json"==e||"gz"==e?encodeURI(c):Ga()+"/api/v1/dump?path="+encodeURIComponent(c)+"&format=json");return!!Ea(f,null,!0,function(e,f,g){var k=0>g&&!!a.J&&!a.J.A.ca;g?a.T('Unable to load tape "'+b+'" (error '+g+": "+e+")",k):(eb(a.ub,e,f),(e=Fa(e,f))&&gi(a,b,c,d,
e.aa,e.Aa,e.za));a.A.cb=!1;a.g&&(a.g--,a.g||D(a));di(a)})}function Zh(a,b,c,d){if((a=a.H.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function di(a){var b=a.H.listTapes;if(b&&b.options){a=a.B||a.u;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}function Xh(a,b){b|=0;if(b!==a.P){var c=a.H[Vh];c&&(c=(c=A(c,hi))&&c[0])&&c.style&&(c.style.width=b+"%");a.P=b}}
function gi(a,b,c,d,e,f,g){a.M=b;a.u=c;a.j=d;a.aa=e;a.Aa=f;a.za=g;d==Sh?a.I&&Ih(a.I,e,f,g,null,!1)?a.status('Read tape "'+b+'"'):a.T('No valid memory address for tape "'+b+'"'):(a.i=0,a.C=e,a.b&=-32769,a.status('Loaded tape "'+b+'" ('+e.length+" bytes)"),Xh(a,0))}function ei(a,b){if(a.u||!1===b)a.M="",a.u="",b||(a.j&&a.status(a.j==Th?"tape detached":"tape unloaded"),a.B=Qh,a.j=Rh,di(a))}h.save=function(){return(new G(this)).data()};h.restore=function(){return!0};h.qg=function(){return this.b&65534};
h.Ih=function(a){a&1&&(this.b&32768?(a&=-2,this.b&64&&pd(this.f,this.G)):(this.b&=-129,this.b|=2048,this.w=0,qd(this.f,this.S,1E3/Math.round(this.U/10))));this.b=this.b&-66|a&65};h.pg=function(){this.b&=-129;this.b|=2048;return this.w};h.Hh=function(){};h.og=function(){return this.K};h.Gh=function(a){this.K=this.K&-65|a&64};h.ng=function(){return this.R};h.Fh=function(a){this.R=a&255};
var Qh="",$h="?",ai="??",Rh=0,Th=1,Sh=2,Vh="readProgress",hi="pcjs-progress-bar",ii={},Yh=(ii[65384]=[null,null,Ed.prototype.qg,Ed.prototype.Ih,"PRS"],ii[65386]=[null,null,Ed.prototype.pg,Ed.prototype.Hh,"PRB"],ii[65388]=[null,null,Ed.prototype.og,Ed.prototype.Gh,"PPS"],ii[65390]=[null,null,Ed.prototype.ng,Ed.prototype.Fh,"PPB"],ii);
function ji(a,b,c){x.call(this,"Disk",{id:a.ub+".disk"+v(++ki,4)},8192);this.controller=a;this.J=a.J;this.D=a.D;this.u=b;this.Xa=b.name;this.Pa=this.Fd="";this.zd=b.zd;this.ba=this.la=this.fa=this.va=this.mode=0;this.b=[];this.i=null;this.j=!1;li(this,c,b.ba,b.la,b.fa,b.va);this.g=this.w=null;D(this)}p(ji,x);h=ji.prototype;h.Ba=function(a,b,c,d){this.D=d};
function li(a,b,c,d,e,f){a.mode=b;a.ba=c;a.la=d;a.fa=e;a.va=f;a.b=[];if("preload"!=a.mode){b=Array(a.ba);for(c=0;c<b.length;c++){d=Array(a.la);for(e=0;e<d.length;e++){f=Array(a.fa);for(var g=1;g<=f.length;g++)f[g-1]=mi(null,c,e,g,a.va,0);d[e]=f}b[c]=d}a.b=b}a.i=null}
function ni(a,b,c,d,e){var f=c;if(a.g)return!0;a.Xa=b;a.Pa=c;a.Fd=ta(c);a.g=e;a.w=a.controller;if(d){var g=new FileReader;g.onload=function(){var b=g.result,c,d=b?b.byteLength:0,e=ka[d];if(e){a.ba=e[0];a.la=e[1];a.fa=e[2];a.va=e[3]||512;c=a.va>>2;var f=e=0,b=new DataView(b,0,d);a.b=Array(a.ba);for(d=0;d<a.b.length;d++)for(var t=a.b[d]=Array(a.la),q=0;q<t.length;q++)for(var z=t[q]=Array(a.fa),B=0;B<z.length;B++){for(var C=mi(null,d,q,B+1,a.va,0),J=C.data,wb=0;wb<c;wb++,f+=4)var Fd=J[wb]=b.getInt32(f,
!0),e=e+Fd&-1;C.Ma=c;z[B]=C}a.i=e;c=a}else a.T("Unrecognized disk format ("+d+" bytes)");a.g&&(a.g.call(a.controller,a.u,c,a.Xa,a.Pa),a.g=null)};g.readAsArrayBuffer(d);return!0}0>c.indexOf("/api/v1/dump")&&(b=ua(c),"json"==b||"gz"==b?f=encodeURI(c):(d="path",e="&mbhd=10",!c.indexOf("http:")||!c.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(b)?(d="disk",e="&mbhd=0"):va(c,"/")&&(d="dir"),f=Ga()+"/api/v1/dump?"+d+"="+encodeURIComponent(c)+(a.zd?"":e)+"&format=json"));return!!Ea(f,
null,!0,function(b,c,d){oi(a,b,c,d)})}
function oi(a,b,c,d){var e=null,f=0>d&&!!a.J&&!a.J.A.ca;a.j=!1;if(d)a.controller.T('Unable to load disk "'+a.Xa+'" (error '+d+": "+b+")",f);else{eb(a.controller.ub,b,c);try{if(0<ta(a.Fd,!0).toLowerCase().indexOf("-readonly"))a.j=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.j=!0)}var k;"<"==c.substr(0,1)?k=["Missing disk image: "+a.Xa]:k=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+
c+")");if(k.length)if(1==k.length)w(k[0]);else{a.ba=k.length;a.la=k[0].length;a.fa=k[0][0].length;var l=k[0][0][0];a.va=l&&l.length||512;for(d=c=0;d<a.ba;d++)for(f=0;f<a.la;f++)for(g=0;g<a.fa;g++)if(l=k[d][f][g]){var m=l.length;void 0===m&&(m=l.length=512);var m=m>>2,n=l.pattern;void 0===n&&(n=l.pattern=0);var r=l.data;if(void 0===r){var t=l.bytes;if(void 0!==t&&t.length){for(var q=m<<2,z=t.length;z<q;z++)t[z]=n;pi(l,t)}else r=[],n=l.pattern=n|n<<8|n<<16|n<<24,l.data=r;delete l.bytes}mi(l,d,f);for(q=
0;q<r.length;q++)c=c+r[q]&-1}a.b=k;a.i=c;e=a}else w("Empty disk image: "+a.Xa)}catch(B){w("Disk image error ("+b+"): "+B.message)}}a.g&&(a.g.call(a.w,a.u,e,a.Xa,a.Pa),a.g=null)}function mi(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.Dk=b;a.Ek=c;a.Va=a.Ma=0;a.eb=!1;return a}
h.seek=function(a,b,c,d,e){d=null;var f=this.u,g=this.b[a];if(g){var k=g[b];if(!k&&f.Af&&b<f.la)for(k=g[b]=Array(f.Bf),g=0;g<k.length;g++)k[g]=mi(null,a,b,g+1,f.ve,0);if(k){for(g=0;g<k.length;g++)if(k[g]&&k[g].sector==c){d=k[g];break}!d&&f.Af&&9==f.je&&(d=k[g]=mi(null,a,b,f.je,f.ve,0))}}e&&e(d,!1);return d};function pi(a,b){for(var c=0,d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e}
h.read=function(a,b){var c=-1;if(a&&b<a.length)var c=a.data,d=b>>2,c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255;return c};h.write=function(a,b,c){if(this.j)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.Ma?f<a.Va?(a.Ma+=a.Va-f,a.Va=f):f>=a.Va+a.Ma&&(a.Ma+=f-(a.Va+a.Ma)+1):(a.Va=f,a.Ma=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
function qi(a,b){var c=a.la*a.fa,d=b/c|0;return d<a.ba?(b%=c,a.seek(d,b/a.fa|0,b%a.fa+1)):null}function ri(a,b,c){for(var d=1,e=0,f=0;d--;){var g=a.read(b,c++);if(0>g)break;e|=g<<f;f+=8}return e}
h.save=function(){var a=0,b=[];b[a++]=[this.Pa,this.i,this.ba,this.la,this.fa,this.va];if(!this.j)for(var c=this.b,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.Ma){for(var k=[],l=0,m=g.Va,n=g.Va+g.Ma;m<n;)k[l++]=g.data[m++];b[a++]=[d,e,f,g.Va,k]}}return b};
h.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.b.length&&6<=e.length?li(this,"local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.i&&e[1]!=this.i&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.i+")",b=-2));for(this.b.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],k=g[f++],l=g[f++],m=g[f++];if(k>=this.b.length||l>=this.b[k].length||m>=this.b[k][l].length){c="sector (CHS="+k+":"+l+":"+m+") out of range ("+
b+" changes applied)";b=-1;break}if(this.j){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(k=this.b[k][l][m]){for(l=k.data.length;l<e;)k.data[l++]=k.pattern;l=0;k.Va=e;for(k.Ma=f.length;e<g;)k.data[e++]=f[l++];b++}}}0>b&&-2!=b&&this.controller.T("Unable to restore disk '"+this.Xa+": "+c);return b};
h.toJSON=function(){var a;a=0;for(var b;b=qi(this,a++);)si(b);a=JSON.stringify(this.b,function(a,b){if("file"!=a)return b});a=a.replace(/,"length":512/gm,"").replace(/,"pattern":0/gm,"");a=a.replace(/"(sector|length|data|pattern)":/gm,"$1:");a=a.replace(/,"[^"]*":([0-9]+|true|false)/gm,"");a=a.replace(/(sector|length|data|pattern):/gm,'"$1":');return a=a.replace(/([\]}]),/gm,"$1,\n")};
function si(a){var b=a.data,c=b.length;if(c<<2==a.length){for(var d=c-1,e=b[d],f=0;d--&&b[d]===e;)f++;f++&&(b.length=c-f,a.pattern=e)}}var ki=0;function ti(a,b,c,d,e,f){x.call(this,a,b,c);this.N=ui(this,b.autoMount);this.M=0;this.R=d;this.S=e;this.U=f;this.P=d.Zc;this.g=Array(this.P);this.O=!Ma("Mobi")&&window&&"FileReader"in window;this.B=[];this.Ra=null;this.exports={bootDisk:this.le,loadDisk:this.Bd,selectDrive:this.kh,wait:this.oh}}p(ti,x);
function ui(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){w(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=ti.prototype;
h.wa=function(a,b,c){var d=this;switch(b){case "listDisks":return this.H[b]=c,c.onchange=function(){vi(d)},!0;case "descDisk":case "listDrives":return this.H[b]=c,c.onchange=function(){var a=ma(c.value,10);null!=a&&wi(d,a)},!0;case "loadDisk":return this.H[b]=c,c.onclick=function(){d.Bd()},!0;case "bootDisk":return this.H[b]=c,c.onclick=function(){d.le()},!0;case "saveDisk":if(!this.O){c.parentNode.removeChild(c);break}this.H[b]=c;c.onclick=function(){var a=d.H.listDrives;if(a&&a.options&&d.g)if(a=
d.g[ma(a.value,10)||0])if(a=a.ea){var b;b="";for(var c=0,k;k=qi(a,c++);)for(var l=0,m=k.length;l<m;l++)b+=String.fromCharCode(ri(a,k,l));b=btoa(b);a=a.Fd.replace(".json",".img");c=null;b="data:application/octet-stream;base64,"+b;a&&(c=document.createElement("a"),"string"!=typeof c.download&&(c=null));c?(c.href=b,c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c),a="Check your Downloads folder for "+a+"."):(window.open(b),a="Check your browser for a new window/tab containing the requested data"+
(a?" ("+a+")":"")+".");w(a)}else d.T("No disk loaded in drive.");else d.T("No disk drive selected.")};return!0;case "mountDisk":if(this.O)return this.H[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;d.Bd(ta(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.Ba=function(a,b,c,d){this.J=a;this.F=b;this.f=c;this.D=d;if(a=ui(this,ie(this.J,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.N[e]=a[e]);this.reset();this.Ra=rd(this.f,this.R.ud,this.R.qd,this.ja);fc(b,this,this.U);hc(b,this.reset.bind(this));xi(this,"None",Ti,!0);this.O&&xi(this,"Local Disk",Vi);xi(this,"Remote Disk",Wi);Xi(this)||D(this)};
h.Da=function(a,b){if(!b){if(!a){if(this.reset(),this.J.N){this.B=[];for(a=0;a<this.g.length;a++)Yi(this,a,!0);Xi(this,!0)}}else if(!this.restore(a))return!1;if(a=this.H.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;b<this.P;b++){var c=document.createElement("option");c.value=b;c.text=this.g[b].Pc||"---";a.appendChild(c)}0<this.P&&(a.value="0",wi(this,0))}}return!0};h.Ca=function(a){return a?this.save():!0};h.reset=function(){this.Bb();Zi(this)};
h.save=function(){var a=new G(this);a.set(0,this.Qc());a.set(1,$i(this));a.set(2,aj(this));return a.data()};h.restore=function(a){var b=!0;this.Bb(a[0])||(b=!1);var c=a[1];c&&(this.B=c);Zi(this,a[2])||(b=!1);return b};h.Bb=function(){return!0};h.Qc=function(){return[]};
function Zi(a,b){for(var c=0;c<a.g.length;c++){var d=a.g[c];void 0===d&&(d=a.g[c]={});var e=a,f=d,d=c,g=a.S,k=b&&b[c],l=0;f.Rb=d;f.name=e.Xc;f.Lc=f.Ob=!1;f.gc=null;f.zd=!0;f.Pc=g[l++]+d;f.ba=g[l++];f.la=g[l++];f.fa=g[l++];f.va=g[l++];f.Jf=g[l++];f.Kf=g[l++];f.Lf=g[l++];f.Cf=g[l++];f.status=g[l];f.xk=0;f.wk=0;f.je=1;f.Bf=f.fa;f.ve=f.va;f.Fk=0;f.Nk=null;f.ea||(f.Pa="");k&&(l=k[1],g=k[2],k[0]?(f=l,k=g,g=e.g[d],Yi(e,d,!0),g.Ob=!0,d=new ji(e,g,"preload"),e.ne(g,d,f,k,!0)):bj(e,d,l,g,!0)?f.ea&&g&&cj(e,
l,g,f.ea):D(e,!1))}return!0}function aj(a){for(var b=[],c=0;c<a.g.length;c++){var d=a.g[c];b.push([d.Ob,d.Xa,d.Pa])}return b}function $i(a){for(var b=0;b<a.g.length;b++){var c=a.g[b];c.ea&&dj(a,c.Pa,c.ea)}return a.B}
function Xi(a,b){b||(a.M=0);for(var c in a.N){var d=a.N[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.H.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=ta(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.g.length)){!bj(a,g,f,e,!0)&&b&&D(a,!1);continue}a.T("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.M}
h.Bd=function(a,b,c){if(!a&&!b){var d=this.H.listDisks;d&&d.options&&(a=d.options[d.selectedIndex].text,b=d.value)}d=(d=this.H.listDrives)&&ma(d.value,10);if(void 0===d||0>d||d>=this.g.length)return this.T("Unable to load the selected drive"),!1;if(!b)return Yi(this,d),!0;if(b==Vi)return this.T('Use "Choose File" and "Mount" to select and load a local disk.'),!1;if(b==Wi){b=window.prompt("Enter the URL of a remote disk image.","")||"";if(!b)return!1;a=ta(b);this.status("Attempting to load "+b+' as "'+
a+'"')}bj(this,d,a,b,!1,c);return!0};h.le=function(){var a,b=this.H.listDrives,b=b&&ma(b.value,10);if(null==b||0>b||b>=this.g.length||!(a=this.g[b]))return this.T("Unable to boot the selected drive"),!1;if(!a.ea)return this.T("Load a disk into the drive first"),!1;Be(this.f,0,!0,b);return(a=this.Sb(a,a.Jf,a.Kf,a.Lf,a.Cf,0,2))?(this.T("Unable to read the boot sector ("+a+")"),!1):!0};
function bj(a,b,c,d,e,f){var g=-1,k=a.g[b];k.Pa.toLowerCase()!=d.toLowerCase()&&(g++,Yi(a,b,!0),k.Lc?a.T(a.type+" busy"):(k.Lc=!0,e&&(k.yd=!0,a.M++,E(a)&&F(a,"auto-loading disk: "+c)),k.Ob=!!f,ni(new ji(a,k,"preload"),c,d,f,a.ne)&&g++));return g}
h.ne=function(a,b,c,d,e){a.Lc=!1;b&&(b.ba>a.ba||b.la>a.la)&&(this.T('Disk "'+c+'" too large for drive '+(this.g[a.Rb].Pc||"---")),b=null);b?(a.ea=b,a.Xa=c,a.Pa=d,this.we(a.Rb),cj(this,c,d,b),this.T('Loaded disk "'+c+'" in drive '+(this.g[a.Rb].Pc||"---"),a.yd||e),this.J&&se(this.J)):a.Ob=!1;a.yd&&(a.yd=!1,--this.M||D(this));wi(this,a.Rb);a.gc&&(a.gc(),a.gc=null)};
function xi(a,b,c,d){if((a=a.H.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function wi(a,b,c){var d=!1;if(0<=b&&b<a.g.length){var e=a.g[b],f=a.H.listDisks;a=a.H.listDrives;if(f&&a&&f.options&&a.options){if(c)for(c=0;c<a.options.length;c++)if(ma(a.options[c].value,10)==e.Rb){a.selectedIndex!=c&&(a.selectedIndex=c);d=!0;break}c=ma(a.value,10);e=e.Ob?Vi:e.Pa;if(!isNaN(c)&&c==b){for(c=0;c<f.options.length;c++)if(f.options[c].value==e){f.selectedIndex!=c&&(f.selectedIndex=c);d=!0;break}c==f.options.length&&(f.selectedIndex=0)}}}return d}
h.kh=function(a){var b=this.H.listDrives;if(b&&b.options)for(var c=b.options.length,d=0;d<c;d++)if(b.options[d].textContent==a){var e=ma(b.options[d].value,10);if(0<=e)return wi(this,e,!0)}return!1};
function vi(a){var b=a.H.listDisks,c=a.H.descDisk,d=b.options&&b.options[b.selectedIndex];if(c&&d){b={};if(d=d.getAttribute("data-value"))try{b=eval("("+d+")")}catch(e){w(a.type+" option error: "+e.message)}a=b.desc;void 0===a&&(a="");b=b.href;void 0!==b&&(a='<a href="'+b+'" target="_blank">'+a+"</a>");c.innerHTML=a}}h.oh=function(a){for(var b=0;b<this.g.length;b++){var c=this.g[b];if(c&&c.Lc)return c.gc||(c.gc=a),!1}return!0};
function Yi(a,b,c){var d=a.g[b];if(d.ea||!1===c)dj(a,d.Pa,d.ea),d.Xa="",d.Pa="",d.ea=null,d.Ob=!1,c||(a.T("Drive "+(a.g[b].Pc||"---")+" unloaded",c),wi(a,b))}function cj(a,b,c,d){var e;for(e=0;e<a.B.length;e++)if(a.B[e][1]==c){d.restore(a.B[e][2]);return}a.B[e]=[b,c,[]]}function dj(a,b,c){var d;for(d=0;d<a.B.length;d++)if(a.B[d][1]==b){a.B[d][2]=c.save();break}}h.we=function(){};h.Sb=function(){return-1};h.Uc=function(){return-1};var Ti="",Vi="?",Wi="??";
function N(a){ti.call(this,"RK11",a,65536,Pb,Pb.Fc,ej);this.G=this.i=this.b=this.w=this.u=this.j=this.C=0}p(N,ti);h=N.prototype;h.Bb=function(a){a||(a=[fj.Fc|fj.de|fj.$d,0,R.Za,0,0,0,0]);a=ia(a);this.G=a.next().value;this.i=a.next().value;this.b=a.next().value;this.w=a.next().value;this.u=a.next().value;this.j=a.next().value;this.C=a.next().value;return!0};h.Qc=function(){return[this.G,this.i,this.b,this.w,this.u,this.j,this.C]};
h.Sb=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.ea;var n=null,r;a||(m=S.Ud,e=0);for(;e;){if(!n){if(b>=a.ba){m=S.Dc;break}n=a.seek(b,c,d+1);if(!n){m=S.ce;break}r=0;++d>=a.fa&&(d=0,++c>=a.la&&(c=0,++b))}var t,q;if(0>(t=a.read(n,r++))||0>(q=a.read(n,r++))){m=S.Ec;break}if(!k&&(Cc(this.F,Qe(this.f,f),t|q<<8),nd(this.F))){m=S.cc;break}r>=a.va&&(n=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.Uc=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.ea;var n=null,r;a||(m=S.Ud,e=0);for(;e;){var t=Ec(this.F,Qe(this.f,f));if(nd(this.F)){m=S.cc;break}if(!n){if(b>=a.ba){m=S.Dc;break}n=a.seek(b,c,d+1,!0);if(!n){m=S.ce;break}r=0;++d>=a.fa&&(d=0,++c>=a.la&&(c=0,++b))}if(k){var q,z;if(0>(q=a.read(n,r++))||0>(z=a.read(n,r++))){m=S.Ec;break}if(t!=(q|z<<8)){m=S.ge;break}}else if(!a.write(n,r++,t&255)||!a.write(n,r++,t>>8)){m=S.Ec;break}r>=a.va&&(n=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.$e=function(a,b,c,d,e,f){this.u=f&65535;this.b=this.b&~R.Ib|f>>16-R.na.Ib&R.Ib;this.w=65536-e&65535;this.j=this.j&~gj.rd|d&gj.rd;this.i|=a;hj(this);return!0};function hj(a){a.b&=~R.gb;a.i&&(a.i|=S.Je,a.b|=R.gb,a.i&S.dd&&(a.b|=R.dd),E(a)&&F(a,a.type+": ERROR: "+u(a.i)))}h.Cg=function(){return this.G};h.Uh=function(){};h.Dg=function(){return this.i};h.Vh=function(){};h.zg=function(){return this.b&R.dc};
h.Rh=function(a){this.b=this.b&~R.Ta|a&R.Ta;if(this.b&R.bc){a=!0;var b,c,d="",e=(this.j&gj.rb)>>gj.na.rb,f=this.g[e],g,k,l,m,n,r;this.b&=~(R.Za|R.sd);this.i&=~S.rf;switch(c=this.b&R.xa){case ij.Ee:E(this)&&F(this,this.type+": CRESET("+e+")",!0);this.i=this.j=0;this.b=R.Za;break;case ij.Ve:d="RCHK";case ij.sb:d||(d="READ"),b=this.Sb;case ij.vd:d||(d="WCHK");case ij.fc:d||(d="WRITE");b||(b=this.Uc);g=(this.j&gj.$b)>>gj.na.$b;k=(this.j&gj.gd)>>gj.na.gd;l=this.j&gj.rd;m=65536-this.w&65535;n=(this.b&R.Ib)<<
16-R.na.Ib|this.u;r=this.b&R.Qe?0:2;E(this)&&F(this,this.type+": "+d+"("+g+":"+k+":"+l+") "+u(n)+"--"+u(n+(m<<1)),!0,!0);if(g>=f.ba){this.i|=S.Dc;break}if(l>=f.fa){this.i|=S.Ec;break}a=b.call(this,f,g,k,l,m,n,r,c>=ij.vd,this.$e.bind(this));break;case ij.Jc:g=(this.j&gj.$b)>>gj.na.$b;E(this)&&F(this,this.type+": SEEK("+g+")",!0);g<f.ba?this.b|=R.sd:this.i|=S.Dc;break;case ij.Ke:E(this)&&F(this,this.type+": DRESET("+e+")");this.i=this.j=0;this.b=R.Za|R.sd;break;default:E(this)&&F(this,this.type+": UNSUPPORTED("+
c+")")}this.G=f.status|(f.ea?fj.Fa:0)|e<<fj.na.jd|this.j&fj.qf;hj(this);a&&(this.b&=~R.bc,this.b|=R.Za,this.b&R.Hb&&pd(this.f,this.Ra))}};h.Eg=function(){return this.w};h.Wh=function(a){this.w=a};h.yg=function(){return this.u};h.Qh=function(a){this.u=a};h.Ag=function(){return this.j};h.Sh=function(a){this.j=a};h.Bg=function(){return this.C};h.Th=function(a){this.C=a};
var fj=Pb.Gc,S=Pb.cf,R=Pb.af,gj=Pb.bf,ij=Pb.xa,jj={},ej=(jj[65280]=[null,null,N.prototype.Cg,N.prototype.Uh,"RKDS"],jj[65282]=[null,null,N.prototype.Dg,N.prototype.Vh,"RKER"],jj[65284]=[null,null,N.prototype.zg,N.prototype.Rh,"RKCS"],jj[65286]=[null,null,N.prototype.Eg,N.prototype.Wh,"RKWC"],jj[65288]=[null,null,N.prototype.yg,N.prototype.Qh,"RKBA"],jj[65290]=[null,null,N.prototype.Ag,N.prototype.Sh,"RKDA"],jj[65294]=[null,null,N.prototype.Bg,N.prototype.Th,"RKDB"],jj);
function Gd(a){ti.call(this,"RL11",a,131072,Qb,Qb.df,kj);this.b=this.C=this.i=this.j=this.w=this.u=0}p(Gd,ti);h=Gd.prototype;h.Bb=function(a){a||(a=[U.Fa|U.Za,0,0,0,0,0]);a=ia(a);this.b=a.next().value;this.C=a.next().value;this.i=a.next().value;this.j=a.next().value;this.w=a.next().value;this.u=a.next().value;return!0};h.Qc=function(){return[this.b,this.C,this.i,this.j,this.w,this.u]};
h.Sb=function(a,b,c,d,e,f,g,k,l){g=0;a=a.ea;k=null;var m;a||(g=lj.$a,e=0);for(;e;){if(!k){k=a.seek(b,c,d+1);if(!k){g=lj.$a;break}m=0}var n,r;if(0>(n=a.read(k,m++))||0>(r=a.read(k,m++))){g=lj.$a;break}Cc(this.F,Qe(this.f,f),n|r<<8);if(nd(this.F)){g=lj.cc;break}f+=2;e--;if(m>=a.va&&(k=null,++d>=a.fa&&(d=0,++c>=a.la&&(c=0,++b>=a.ba)))){g=lj.$a;break}}return l?l(g,b,c,d,e,f):g};
h.Uc=function(a,b,c,d,e,f,g,k,l){g=0;a=a.ea;k=null;var m;a||(g=lj.$a,e=0);for(;e;){var n=Ec(this.F,Qe(this.f,f));if(nd(this.F)){g=lj.cc;break}f+=2;e--;if(!k){k=a.seek(b,c,d+1,!0);if(!k){g=lj.$a;break}m=0}if(!a.write(k,m++,n&255)||!a.write(k,m++,n>>8)){g=lj.$a;break}if(m>=a.va&&(k=null,++d>=a.fa&&(d=0,++c>=a.la&&(c=0,++b>=a.ba)))){g=lj.$a;break}}return l?l(g,b,c,d,e,f):g};
h.ef=function(a,b,c,d,e,f){this.C=f&65535;this.b=this.b&~U.Ya|f>>16-U.na.Ya&U.Ya;this.u=f>>16&mj.ab;this.j=this.i=b<<nj.na.ec|(c?nj.Ic:0)|d&nj.ae;this.w=65536-e&65535;a&&(this.b=this.b|a|U.gb);return!0};h.Hg=function(){return this.b&U.dc};
h.Zh=function(a){this.b=this.b&~U.Ta|a&U.Ta;this.u=this.u&60|(a&U.Ya)>>U.na.Ya;if(!(this.b&U.Za)){a=!0;var b,c="",d=this.g[(this.b&U.rb)>>U.na.rb],e=d.ea,f,g,k;this.b&=~U.Fa;switch(this.b&U.xa){case oj.vf:this.w&pj.Sd&&(this.b&=U.Fa|U.xa|U.Ya);this.w=d.status|this.j&nj.Ic|(e&&512==e.ba?pj.Ne:0);break;case oj.Jc:(this.i&nj.Me)==nj.sf&&(b=this.i&nj.ec,c=(this.i&nj.uf)<<2,this.j=this.i&nj.tf?this.j+b:this.j-b,this.i=this.j=this.j&nj.ec|c);break;case oj.Ze:this.w=this.j;break;case oj.We:c="READ",b=this.Sb;
case oj.xf:c||(c="WRITE"),b||(b=this.Uc),f=this.i>>nj.na.ec,g=this.i&nj.Ic?1:0,k=this.i&nj.ae,!e||f>=e.ba||k>=e.fa?this.b=this.b|lj.$a|U.gb:(a=65536-this.w&65535,e=(this.u&mj.ab)<<16|this.C,E(this)&&F(this,this.type+": "+c+"("+f+":"+g+":"+k+") "+u(e)+"--"+u(e+(a<<1)),!0,!0),a=b.call(this,d,f,g,k,a,e,2,!1,this.ef.bind(this)))}a&&(this.b=this.b|U.Fa|U.Za,this.b&U.Hb&&pd(this.f,this.Ra))}};h.Fg=function(){return this.C};h.Xh=function(a){this.C=a&qj.Ta};h.Ig=function(){return this.i};
h.$h=function(a){this.i=a};h.Jg=function(){return this.w};h.ai=function(a){this.w=a};h.Gg=function(){return this.u};h.Yh=function(a){this.u=a&mj.ab;this.b=this.b&~U.Ya|(this.u&3)<<U.na.Ya};
var U=Qb.hf,qj=Qb.ff,nj=Qb.jf,pj=Qb.Hc,mj=Qb.gf,lj=Qb.Rd,oj=Qb.xa,rj={},kj=(rj[63744]=[null,null,Gd.prototype.Hg,Gd.prototype.Zh,"RLCS"],rj[63746]=[null,null,Gd.prototype.Fg,Gd.prototype.Xh,"RLBA"],rj[63748]=[null,null,Gd.prototype.Ig,Gd.prototype.$h,"RLDA"],rj[63750]=[null,null,Gd.prototype.Jg,Gd.prototype.ai,"RLMP"],rj[63752]=[null,null,Gd.prototype.Gg,Gd.prototype.Yh,"RLBE"],rj);
function Hd(a){ti.call(this,"RX11",a,262144,Rb,Rb.kf,sj);this.I=this.G=this.i=this.K=this.b=this.C=0;this.j=V.Jb;this.u=0;this.w=Array(128).fill(0)}p(Hd,ti);h=Hd.prototype;h.Bb=function(a){a?(a=ia(a),this.b=a.next().value,this.C=a.next().value,this.I=a.next().value,this.G=a.next().value,this.i=a.next().value,this.K=a.next().value,this.j=a.next().value,this.u=a.next().value,this.w=a.next().value):(this.C=this.b=0,this.G=this.I=1,this.K=this.i=0,this.j=V.sb,this.u=0,vd(this.f,this.Ra),tj(this));return!0};
h.Qc=function(){return[this.b,this.C,this.I,this.G,this.i,this.K,this.j,this.u,this.w]};h.we=function(a){a||this.Bb()};function uj(a,b){b&&(a.K=b,a.C=a.i,a.b|=W.gb);a.j=V.Jb;a.b|=W.DONE;a.b&W.Hb&&pd(a.f,a.Ra)}
h.Sb=function(a,b,c,d,e,f,g,k,l){k=0;var m=a.ea,n=null,r;E(this)&&F(this,this.type+".readData("+b+":"+c+":"+d+") "+u(f)+"--"+u(f+(e<<1)),!0,!0);m||(k=a.Rb?vj.fd:vj.ed,e=0);for(;e;){if(!n){if(b>=m.ba){k=vj.Se;break}n=m.seek(b,c,d+1);if(!n){k=vj.pd;break}r=0;++d>=m.fa&&(d=0,++c>=m.la&&(c=0,++b))}var t;if(0>(a=m.read(n,r++))||0>(t=m.read(n,r++))){k=vj.od;break}Cc(this.F,Qe(this.f,f),a|t<<8);r>=m.va&&(n=null);f+=g;e--}return l?l(k,b,c,d,e,f):k};
function tj(a){var b=0,c=a.b&W.td?1:0,d=a.g[c],d=d&&d.ea,e=a.I&wj.ab,f=a.G&xj.ab;a.i&=~(yj.Nd|yj.Xd|yj.ac|yj.Fa);if(d)if(a.i|=yj.Fa,E(a)&&F(a,a.type+".readSector("+e+":0:"+f+")",!0,!0),c=d.seek(e,0,f,!0)){e=0;for(f=a.w.length;e<f;){var g=d.read(c,e);if(0>g){b=vj.od;break}a.w[e++]=g}c.Ff&&(a.i|=yj.ac)}else b=vj.pd;else b=c?vj.fd:vj.ed;uj(a,b)}
h.Lg=function(a,b){a=this.b;if(!b)switch(a&=W.dc,this.j){case V.ad:case V.EMPTY:this.u<this.w.length&&(this.b|=W.bb);break;case V.sb:case V.fc:case V.Kc:2>this.u&&(this.b|=W.bb)}return a};
h.ci=function(a){this.b=this.b&~W.Ta|a&W.Ta;if(this.b&W.INIT)this.Bb();else if(this.b&W.bc&&this.j==V.Jb)switch(this.j=this.b&W.xa,this.b&=~(W.bc|W.bb|W.DONE|W.gb),vd(this.f,this.Ra),E(this)&&F(this,this.type+".processCommand("+zj[this.j>>1]+")",!0,!0),this.j){case V.ad:case V.EMPTY:case V.sb:case V.fc:case V.Kc:this.u=0;break;case V.Ye:a=this.g[this.b&W.td?1:0];this.i&=~yj.Fa;a&&a.ea&&(this.i|=yj.Fa);this.C=this.i;uj(this);break;case V.Xe:this.C=this.K,uj(this)}else this.b&W.Hb?this.b&W.DONE&&pd(this.f,
this.Ra):vd(this.f,this.Ra)};h.Mg=function(a,b){if(!b)switch(this.j){case V.EMPTY:this.b&W.bb&&(this.b&=~W.bb,this.C=this.w[this.u]&255,E(this)&&F(this,this.type+".readByte("+this.u+"): "+v(this.C,2,!0),!0,!0),++this.u>=this.w.length&&uj(this))}return this.C};
h.di=function(a){switch(this.j){case V.ad:this.b&W.bb&&(this.b&=~W.bb,this.w[this.u]=a&255,E(this)&&F(this,this.type+".writeByte("+this.u+","+v(a,2,!0)+")",!0,!0),++this.u>=this.w.length&&uj(this));break;case V.sb:case V.fc:case V.Kc:if(this.b&W.bb)switch(this.b&=~W.bb,this.u++){case 0:this.G=a;break;case 1:if(this.I=a,this.j==V.sb)tj(this);else{var b=this.j==V.Kc,c=0,d=this.b&W.td?1:0,e=this.g[d],e=e&&e.ea,f=this.I&wj.ab,g=this.G&xj.ab;this.i&=~(yj.Nd|yj.Xd|yj.ac|yj.Fa);if(e)if(this.i|=yj.Fa,E(this)&&
F(this,this.type+".writeSector("+f+":0:"+g+")",!0,!0),d=e.seek(f,0,g,!0))for(b&&(d.Ff=!0),b=0,f=this.w.length;b<f;){if(!e.write(d,b,this.w[b]&255)){c=vj.od;break}b++}else c=vj.pd;else c=d?vj.fd:vj.ed;uj(this,c)}}}this.C=a};var W=Rb.lf,wj=Rb.pf,xj=Rb.nf,yj=Rb.mf,V=Rb.xa,vj=Rb.ERROR,zj="FILL EMPTY WRITE READ UNUSED RDSTAT WRDEL RDERR".split(" "),Aj={},sj=(Aj[65144]=[null,null,Hd.prototype.Lg,Hd.prototype.ci,"RXCS"],Aj[65146]=[null,null,Hd.prototype.Mg,Hd.prototype.di,"RXDB"],Aj);
function Bj(a){x.call(this,"Debugger",a);this.W=+a.base||16;this.O=["{","}"];this.ka=["[","]"];this.B=0;this.R=!1;this.w=-1;this.u=[];this.i={}}p(Bj,x);Bj.prototype.re=function(){return-1};Bj.prototype.Ad=function(){};
function Cj(a,b,c,d){if(c)if(b){0>a.w&&a.u.length&&(a.w=0);if(0>a.w||b!=a.u[a.w])a.u.splice(0,0,b),a.w=0;a.w--}else a.R?b="end":b=a.u[a.w+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(za(b.substring(c,f))),c=f+1}}return a}
function Dj(a,b,c){var d=a;b=b||32;if(c)if(32==b)d=a>>>0;else if(32>b)d=a&(1<<b)-1;else{if(b=Math.pow(2,b),0>a||a>=b)d=a%b,0>d&&(d+=b)}else 32>=b?d=a<<32-b>>32-b:(b=Math.pow(2,b-1),a>=b?(d=a%b,(a/b|0)&1&&(d-=b)):a<-b&&(d=a%b,((-a-1)/b|0)&1?d&&(d+=b):d||(d-=b)));a!=d&&(a=d);return a}
function Ej(a,b,c){for(c=void 0===c?-1:c;c--&&b.length;){var d=b.pop();if(2>a.length)return!1;var e,f=a.pop();e=a.pop();switch(d){case "*":e*=f;break;case "/":if(!f)return!1;e=Math.trunc(e/f);break;case "^/":if(!f)return!1;e%=f;break;case "+":e+=f;break;case "-":e-=f;break;case "<<":e<<=f;break;case ">>":e>>=f;break;case ">>>":e>>>=f;break;case "<":e=e<f?1:0;break;case "<=":e=e<=f?1:0;break;case ">":e=e>f?1:0;break;case ">=":e=e>=f?1:0;break;case "==":e=e==f?1:0;break;case "!=":e=e!=f?1:0;break;case "&":e&=
f;break;case "!":case "|":e|=f;break;case "^!":e|=f;break;case "&&":e=e&&f?1:0;break;case "||":e=e||f?1:0;break;case ",,":e=Dj(e,18,!0)*Math.pow(2,18)+Dj(f,18,!0);break;case "_":case "^_":"^_"==d&&(f=35-(f&255));f&&(e=Dj(e,0,!0),e=0<f?e*Math.pow(2,f):Math.trunc(e/Math.pow(2,-f)));break;default:return!1}a.push(Dj(e))}return!0}
function Fj(a,b,c,d,e,f){var g,k,l,m=!1,n=0,r=[],t=[],q=a.W;for(a.W=e;c<d;){var z;k=b[c++].trim();l=c<d?b[c++]:"";if(k)z=Gj(a,k,null,f,n);else if("{"==l){k=1;for(z=c;c<d;)if(c++,l=c<b.length?b[c++]:"","{"==l)k++;else if("}"==l&&!--k)break;z=Fj(a,b,z,c-1,a.W,f);null!=z&&n&&(z=Hj(z,n));k=c<d?b[c++].trim():"";l=c<d?b[c++]:""}else{if(" "==l)continue;if("^B"==l){a.W=2;continue}if("^O"==l){a.W=8;continue}if("^D"==l){a.W=10;continue}if(!(n&-1073741824)){if("+"==l)continue;if("-"==l){n=n<<2|1;continue}if("~"==
l||"^-"==l){n=n<<2|2;continue}if("^L"==l){n=n<<2|3;continue}}m=!0;break}if(void 0===z)if(f)f.push(k),z=0;else{m=!0;f=[];break}r.push(Dj(z));if(" "==l)if(c<b.length-1&&!b[c])c++,l=b[c++];else{m=!0;break}if(!l)break;n="<"==a.O[0]?Ij:Jj;if(!n[l]){m=!0;break}t.length&&n[l]<=n[t[t.length-1]]&&Ej(r,t,1);t.push(l);a.W="^_"==l?10:e;n=0}if(m||!Ej(r,t)||1!=r.length)m=!0;m?f||a.v("parse error ("+(k||l)+")"):g=r.pop();a.W=q;return g}
function Kj(a,b,c,d,e){for(var f;0<=(f=b.indexOf(c));){for(var g=0,k=f+1,l=e;k<b.length;){var m=b[k++];if(m==c){l=-1;break}if(!l)break;l--;m=m.charCodeAt(0);7==d?m&=127:m=m-32&63;g=Dj(g*Math.pow(2,d)+m,d*e,!0)}if(0<=l){a.v("parse error ("+c+b+c+")");return}b=b.substr(0,f)+K(a,g,-1)+b.substr(k)}return b}
function Lj(a,b,c){var d=void 0,e=!1===c;c=Array.isArray(c)?c:void 0;if(b){"{"!=a.O[0]&&(b=b.split(a.O[0]).join("{").split(a.O[1]).join("}"));b=Kj(a,b,'"',7,5);if(!b)return d;b=Kj(a,b,"'",6,6);if(!b)return d;16!=a.W&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=Fj(a,b,0,b.length,a.W,c);void 0!==d&&e&&Mj(a,null,d)}return d}
function Hj(a,b){for(;b;){switch(b&3){case 1:a=-Dj(a);break;case 2:a|=-1;break;case 3:for(var c=35;0<=c&&!(a&Math.pow(2,c));)c--;a=35-c}b>>>=2}return a}
function Gj(a,b,c,d,e){e=void 0===e?0:e;var f,g=Array.isArray(d)?d:void 0;if(null!=b){f=a.re(b);if(0<=f)f=a.Ad(f);else if(f=b,a.i[f]?f=a.i[f].value:(f=f.substr(0,6),f=a.i[f]&&a.i[f].value),null!=f){var k=a.i[b]&&a.i[b].jh;k&&(g?g.push(k):(g=Lj(a,k,d),void 0!==g?f+=g:(d||a.v("undefined "+(c||"value")+": "+b+" ("+k+")"),f=void 0)))}else f=ma(b,1<b.length||10<a.W?a.W:10);null!=f?f=Dj(Hj(f,e)):d||a.v("invalid "+(c||"value")+": "+b)}else d||a.v("missing "+(c||"value"));return f}
function Mj(a,b,c){var d,e=!1;void 0!==c&&(e=!0,d=8==a.W?K(a,c,32,8,1)+"  "+c+".":K(a,c,32,16,1)+"  "+K(a,c,32,8,1)+"  "+K(a,c,32,2,8)+"  "+c+".",32<=c&&127>c&&(d+=" '"+String.fromCharCode(c)+"'"));a.v((null!=b?b+": ":"")+d);return e}function Nj(a,b){var c=0;if(a.i){if(b)return Mj(a,b,a.i[b]&&a.i[b].value);b=Object.keys(a.i);b.sort();for(var d=0;d<b.length;d++)Mj(a,b[d],a.i[b[d]].value),c++}return 0<c}
function K(a,b,c,d,e){c=void 0===c?0:c;e=void 0===e?0:e;switch((void 0===d?0:d)||a.W){case 2:a=pa(b,0<c?c:0,e);break;case 8:a=u(b,0<c?(c+2)/3|0:0,!!e);break;case 10:a=qa(b,0<c?Math.ceil(.3*c):0);break;default:a=v(b,0<c?c+3>>2:0,!!e)}0>c?c=a.replace(/^0+([0-9A-F]+)$/i,"$1"):c=a;return c}
var Jj={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},Ij={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,_:19,"^_":19,"{":20,"}":20};
function Oj(a){Bj.call(this,a);this.Ha=!1;this.O=["(",")"];this.ka=[];this.I=X();this.Ga=X();this.P=X();this.C=[];this.b=this.M=this.G=[];Pj(this);this.S=this.ha=0;this.j=[];this.ta=void 0;Qj(this);this.D=this;this.ma={};this.ja=this.ke=0;this.U=null;this.N=[];Rj(this,a.messages);this.ya=a.commands;this.Ka=Sj;this.Y=[];this.K=0;this.La=this.ua=null;this.B=this.Ja=this.Ia=this.Z=this.qa=0;this.g=this.X=null;var b=this;window?void 0===window[y]&&(window[y]=function(a){return ne(b,a)}):void 0===global[y]&&
(global[y]=function(a){return ne(b,a)})}p(Oj,Bj);function Tj(a){a=a&&a.L;null==a&&(a=-1);return a}function X(a,b,c){return{L:void 0===a?null:a,Na:void 0===b?!1:b,Ua:!1,W:c}}h=Oj.prototype;h.Gd=function(a,b){a.L=b;a.Ua=!1;a.W=void 0;return a};function Uj(a){return[a.L,a.Na,a.W,a.Ua,a.Oc]}function Vj(a,b){var c=X(b[0],b[1],b[2]);c.Ua=b[3];b[4]&&(c.he=Cj(a,c.Oc=b[4]));return c}
h.Ba=function(a,b,c,d){this.F=b;this.J=a;this.f=c;this.g=a.i;(a=ie(a,"messages"))&&Rj(this,a);1140>this.f.ka&&(this.Y=this.Y.concat(Wj));1145>this.f.ka&&(this.Y=this.Y.concat(Xj));td(this,16,function(a){a:{var b=d.F.b,c=a[0],e=a=0,l=b.length;if(c){a=Tj(Yj(d,c));if(-1===a){d.v("invalid address: "+c);break a}e=a>>>d.F.g;l=1}d.v("blockid   physical   blockaddr  used    size    type");d.v("--------  ---------  ---------  ------  ------  ----");for(var c=-1,m=0;l--;){var n=b[e];n.type==c?m++||d.v("..."):
(c=n.type,m=fd[c],n&&d.v(v(n.id,8)+"  %"+v(e<<d.F.g,8)+"  %"+v(n.L,8)+"  "+ra(n.Vb)+"  "+ra(n.size)+"  "+m),c!=Jd&&(c=-1),m=0);a+=d.F.j;e++}}});D(this)};
h.wa=function(a,b,c){var d=this;switch(b){case "debugInput":return this.X=this.H[b]=c,c.onkeydown=function(a){var b;if(13==a.keyCode)b=c.value,c.value="",ne(d,b,!0);else if(27==a.keyCode)c.value=b="";else if(38==a.keyCode?(b=null,d.w<d.u.length-1&&(b=d.u[++d.w])):40==a.keyCode&&(0<d.w?b=d.u[--d.w]:(b="",d.w=-1)),null!=b){var e=b.length;c.value=b;c.setSelectionRange(e,e)}null!=b&&a.preventDefault&&a.preventDefault()},!0;case "debugEnter":return this.H[b]=c,Qa(c,function(){if(d.X){var a=d.X.value;d.X.value=
"";ne(d,a,!0);return!0}return!1}),!0;case "step":return this.H[b]=c,Qa(c,function(a){var b=!1;Gb(d,!0)||(Hb(d,!0),b=xc(d,a?1:0,null),Hb(d,!1));return b}),!0}return!1};function me(a){if(a.X){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.X.focus();window&&window.scrollTo(b,c)}}h.Pd=function(a,b){var c=255,d=Tj(a);-1!==d&&(a.Na||65535<d?(c=this.F,d=Qe(this.f,d),c.C=!1,c.oa++,d=hd(c,d).j(d&c.i,d),c.oa--):(c=this.f,c.qa++,d=c.F.Ld(Dc(c,d,3)),c.qa--),c=d,b&&Zj(a,b));return c};
h.Sa=function(a,b){var c=65535,d=Tj(a);-1!==d&&(c=a.Na||65535<d?Ec(this.F,Qe(this.f,d)):Fc(this.f,d),b&&Zj(a,b));return c};h.Qd=function(a,b,c){var d=Tj(a);if(-1!==d){if(a.Na||65535<d)id(this.F,Qe(this.f,d),b);else{var e=this.f;e.qa++;e.F.Md(Dc(e,d,5),b);e.qa--}c&&Zj(a,c);H(this.J,-1)}};h.Le=function(a,b,c){var d=Tj(a);if(-1!==d){if(a.Na||65535<d)Cc(this.F,Qe(this.f,d),b);else{var e=this.f;e.qa++;e.F.Zb(Dc(e,d,4),b);e.qa--}c&&Zj(a,c);H(this.J,-1)}};
function Yj(a,b,c){var d;c=(c?a.I:a.Ga).L;var e,f;if(void 0!==b){a:{var g;d=a.O[0];c=a.O[1];g="("==d||"{"==d||"["==d?"\\":"";for(var k="["==d?"\\":"",k=new RegExp(g+d+"([^"+k+d+k+c+"]+)"+g+c);g=b.match(k);){var l=Lj(a,g[1]);if(void 0===l){b=void 0;break a}b=b.replace(d+g[1]+c,null!=l?K(a,l):"undefined")}if(a.ka.length)for(d=a.ka[0],c=a.ka[1],g="("==d||"{"==d||"["==d?"\\":"",k="["==d?"\\":"",k=new RegExp(g+d+"([^"+k+d+k+c+"]+)"+g+c);g=b.match(k);)b=b.replace("["+g[1]+"]","unimplemented");for(;d=b.match(/\$([a-z]+)/i);){c=
null;switch(d[1].toLowerCase()){case "ops":c=0}if(null==c)break;b=b.replace(d[0],c.toString())}}"%"==b.charAt(0)&&(e=!0,b=b.substr(1));d=b;var m,n;a:{c=a.F;g=d.toUpperCase();for(n in c.Qa)if(k=+n,c.Qa[k][4]==g){n=c.B+k;break a}n=null}if(null==n&&d.match(/^[a-z_][a-z0-9_]*$/i))for(d=d.toUpperCase(),c=0;c<a.C.length;c++)if(g=a.C[c].ia[d],null!=g){n=g.o;break}null!=n&&(m=X(n));if(d=m)return d;0<=b.indexOf("0x")?f=16:0<=b.indexOf("0o")?f=8:0<=b.indexOf(".")&&(f=10);c=Lj(a,b)}null!=c&&(d=X(c,e,f));return d}
function ak(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.he=Cj(a,b.Oc=c[2]))}function Zj(a,b){null!=a.L&&(a.L+=b||1)}function bk(a,b){return(b.Na?"%":"")+K(a,b.L)}
function Rj(a,b){a.D=a;a.ja=a.ke=536870912;a.U=null;a.N=[];b=Cj(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in Tb){var d;a:if(d=void 0,Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}0<=d&&(a.ja|=Tb[c],a.v(c+" messages enabled"))}}function td(a,b,c){for(var d in Tb)if(b==Tb[d]){a.ma[d]=c;break}}
h.re=function(a){a=a.toUpperCase();var b=ck[a];null==b&&(b=-1,"R"==a.charAt(0)&&(b=+a.charAt(1),0>b||7<b))&&(b=-1);return b};function dk(a,b){var c;if(b<ek||a.g)c=fk[b];return c||""}
h.Ad=function(a){var b;if(0<=a)if(8>a)b=this.f.g[a];else if(16>a)b=this.f.ua[a-8];else if(20>a)b=this.f.Y[a-16];else{var c=this.f,d=this.g;switch(a){case gk:b=Cd(this.f);break;case hk:b=c.nb;break;case ik:b=c.P;break;case jk:b=c.Ga&65280;break;case kk:b=wd(c);break;case lk:b=yd(c);break;case mk:b=zd(c);break;case nk:b=c.X;break;case ek:d&&(b=d.ga);break;case ok:d&&(b=d.Db);break;case pk:d&&(b=d.Wa)}}return b};
h.message=function(a,b){b&&(a+=" @"+bk(this,X(this.f.O&65535)));if(!this.U||a!=this.U)if(this.U=a,this.ja&1073741824)this.N.push(a);else{var c;if(this.ja&-2147483648&&this.f&&(c=this.f.A.V)||Gb(this,!0))this.da(),c&&(a+=" (cpu halted)");this.v(a);this.f&&(a=this.f,te(a),a.zb=0,a.J&&H(a.J,void 0))}};
function Qj(a){var b;if(!df(a))a.j&&a.j.length&&a.v("instruction history buffer freed"),a.S=0,a.j=[];else if(!a.j||!a.j.length){a.j=Array(qk);for(b=0;b<a.j.length;b++)a.j[b]=X();a.S=0;a.v("instruction history buffer allocated")}}function rk(a,b,c){if(!sk(a,c))return!1;wc(a.f,b);return!0}
function xc(a,b,c,d){if(!sk(a))return!1;var e="";null===c&&(e=(c=!a.ua||"tr"==a.ua)?"tr":"t");a.B=0;b||df(a)&&ef(a,a.f.g[7],0);try{b=ue(a.f,b);var f=a.f.Ac(b);0<f&&(yc(a.f,f),a.B+=f,zc(a.f,f,!0),Ac(a.f,f),a.Z++)}catch(g){"number"!=typeof g&&(a.B=0,Db(a.f,g.stack||g.message))}!1!==d&&(a.g&&a.g.stop(),H(a.J,-1));le(a,c||!1,e);return 0<a.B}h.da=function(a){this.f&&this.f.da(a)};
function le(a,b,c){if(a.Ha){void 0===b&&(b=!0);c&&a.v(tk+c);c=a.f;if(c=c.i&128?c.Cc|c.Bc<<8:0){var d=c>>8;a.v("trapped to "+K(a,c&255,8)+" ("+(0>d?Ob[-d]:K(a,d))+")")}a.I=X(a.f.g[7]);b&&1!=a.K?uk(a):vk(a)}}function sk(a,b){var c;(c=!a.f||!Fb(a.f))||(c=a.f,c.A.ca?c=!0:(c.v(c.toString()+" not powered"),c=!1),c=!c);return c||a.f.A.V?(b||a.v("cpu busy or unavailable, command ignored"),!1):!Eb(a.f)}h.Da=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};
h.Ca=function(a,b){b&&this.v(a?"suspending":"shutting down");return a?this.save():!0};h.reset=function(a){Qj(this);this.Z=0;this.U=null;this.B=0;this.I=X(this.f.g[7]);this.A.V=!1;wk(this);a||le(this)};h.save=function(){var a=new G(this);a.set(0,Uj(this.I));a.set(1,Uj(this.P));a.set(2,[this.u,this.R,this.ja]);a.set(3,this.C);return a.data()};
h.restore=function(a){var b=0;void 0!==a[2]&&(this.I=Vj(this,a[b++]),this.P=Vj(this,a[b++]),this.u=a[b][0],"string"==typeof this.u&&(this.u=[this.u]),this.R=a[b][1],this.ja|=a[b][2]);a[3]&&(this.C=a[3]);return!0};h.start=function(a,b){this.K||this.v("running");this.A.V=!0;this.Ia=a;this.Ja=b};
h.stop=function(a,b){if(this.A.V){this.A.V=!1;this.B=b-this.Ja;if(!this.K){b="stopped";if(this.B){a-=this.Ia;var c=0<a?Math.round(1E3*this.B/a):0;b+=" (";df(this)&&(b+=this.Z+" instructions, ",this.Z=0);b+=this.B+" cycles, "+a+" ms, "+c+" hz)"}else E(this,-2147483648)&&(b+=" (use the 't' command to execute blocked faults)");this.v(b)}le(this,!0);me(this);wk(this,this.f.g[7]);this.U=null}};function df(a){return 1<a.b.length||!!a.ha}
function ef(a,b,c){var d=-1;c||(d=Fc(a.f,b))||(a.f.O&65535)!=b||(b=He(a.f,2));if(0<c&&(a.ha&&!--a.ha||xk(a,b,1,a.b)))return!0;0<=c&&a.j.length&&(a.Z++,0>d&&(d=Fc(a.f,b)),65535!=(d&65535)&&(a.Gd(a.j[a.S],b),++a.S==a.j.length&&(a.S=0)));return!1}function Fg(a){var b=a.f;if(b.A.V)throw tc(b,a.f.O&65535),a.da(),-1;return!1}function ce(a,b,c){xk(a,b,c||1,a.M)&&a.da(!1)}function de(a,b,c){xk(a,b,c||1,a.G)&&a.da(!1)}
function Pj(a){var b,c,d;a.b=["bp"];if(a.M)for(b=1;b<a.M.length;b++)c=a.M[b],d=Tj(c),c.Na?(c=a.F,be(c.b[d>>>c.g],!1)):Te(a.f,!1);a.M=["br"];if(a.G)for(b=1;b<a.G.length;b++)c=a.G[b],d=Tj(c),c.Na?(c=a.F,be(c.b[d>>>c.g],!0)):Te(a.f,!0);a.G=["bw"];a.qa=0;a.ha=0}
h.Ab=function(a,b,c){var d=!0;c||yk(this,a,b,!1,!0);if(a!=this.b){var e=Tj(b);if(-1===e)this.v("invalid address: "+bk(this,b)),d=!1;else{var f=a==this.G;65535<e&&(b.Na=!0);if(b.Na){var g=this.F;g.b[e>>>g.g].Ab(e&g.i,f)}else e=this.f,(f?e.rc++:e.pc++)||Ae(e)}}d&&(a.push(b),c?b.Ua=!0:(zk(this,a,a.length-1,"set"),Qj(this)));return d};
function yk(a,b,c,d,e){var f=!1;c=Tj(c);for(var g=1;g<b.length;g++){var k=b[g];if(c==Tj(k)&&(!d||k.Ua)){f=!0;k.Ua||e||zk(a,b,g,"cleared");b.splice(g,1);b!=a.b&&(b=b==a.G,k.Na?(d=a.F,be(d.b[c>>>d.g],b)):Te(a.f,b));k.Ua||Qj(a);break}}return f}function Ak(a,b){for(var c=1;c<b.length;c++)zk(a,b,c);return b.length-1}function zk(a,b,c,d){c=b[c];a.v(b[0]+" "+bk(a,c)+(d?" "+d:c.Oc?' "'+c.Oc+'"':""))}
function wk(a,b){if(void 0!==b)xk(a,b,1,a.b,!0),a.K=0;else for(b=1;b<a.b.length;b++){var c=a.b[b];if(c.Ua){if(!yk(a,a.b,c,!0))break;b=0}}}
function xk(a,b,c,d,e){var f=!1;if(!a.qa++)for(var g=1;!f&&g<d.length;g++){var k=d[g];if(!e||k.Ua)for(var l=Tj(k)&(d==a.b?65535:-1),m=0;m<c;m++)if(b+m==l){var n,f=!0;k.Ua&&(yk(a,d,k,!0),e=!0);if(n=k.he){for(var f=!1,r=0;r<n.length;r++)if(!Bk(a,n[r],!0)){if(n[r].indexOf("if")){f=!0;break}for(var t=r+1;t<n.length&&n[t].indexOf("else");t++)r++;if(t==n.length){f=!0;break}}a.f.A.V||(f=!0)}if(f){e||zk(a,d,g,"hit");break}}}a.qa--;return f}
function Ck(a,b,c,d){var e=X(b.L),f=a.Sa(b,2),g,k;for(k in a.Ka)if(g=a.Ka[k][f&k])break;g||(g=Dk);var l=g[0];0<=a.Y.indexOf(l)&&(g=Dk,l=g[0]);var m=k="",n=Ek[l],r=g.length-1;l||r||(k=K(a,f));for(l=1;l<=r;l++){var t=g[l];if(void 0!==t){var q;q=a;var z=t,t=b,B="",C=z&Fk;if(C==Y)t=t.L+((f&255)<<24>>23)&65535,B=K(q,t);else if(C==Gk)t=t.L-((f&63)<<1)&65535,B=K(q,t);else if(C==Hk)B=K(q,f&7,3);else if(C==Ik)B=K(q,f&63,6);else if(C==Jk)B=K(q,f&255,8);else if(C=f&z,z&Kk&&(C>>=6,z>>=6),z&Z){var z=null,J=C&
Lk;switch(C&Mk){case 0:B=dk(q,J);break;case 8:B="@"+dk(q,J);z=Nk(q,q.f.g[J]);break;case 16:7>J?B="("+dk(q,J)+")+":(C=q.Sa(t,2),B="#"+K(q,C,-1));break;case 24:7>J?B="@("+dk(q,J)+")+":(C=q.Sa(t,2),B="@#"+K(q,C,-1),z=Nk(q,C));break;case 32:B="-("+dk(q,J)+")";break;case 40:B="@-("+dk(q,J)+")";break;case 48:C=q.Sa(t,2);B=K(q,C,-1)+"("+dk(q,J)+")";7==J&&(B=K(q,C=C+t.L&65535),z=Nk(q,C));break;case 56:C=q.Sa(t,2),B="@"+K(q,C)+"("+dk(q,J)+")",7==J&&(B="@"+K(q,C=C+t.L&65535),z=Nk(q,Fc(q.f,C)))}z&&(B=[B,z])}q=
B;if(!q||!q.length){k="INVALID";break}"string"!=typeof q&&(m=q[1],q=q[0]);0<k.length&&(k+=",");k+=q||"???"}}f="";g=bk(a,e)+":";if(-1!==e.L&&-1!==b.L){do if(f+=" "+K(a,a.Sa(e,2)),null==e.L)break;while(e.L!=b.L)}g+=ya(f,24);g+=ya(n,5);k&&(g+=" "+k);if(c||m)g=ya(g,60)+";"+(c||""),g=a.f.A.Mb?g+("cycles="+oe(a.f).toString()+" cs="+v(a.f.mc)):g+(null!=d?"="+d.toString():""),m&&(";"!=g.slice(-1)&&(g+=" "),g+=m);return g}
function Nk(a,b){b=Re(a.f,b)[0];b>=a.f.tb&&b<a.F.B&&(b=b-a.f.tb+a.F.B);var c=a.F;a=null;b>=c.B&&(b=c.Qa[b&md])&&(a=b[4]);return a}function Ok(a,b){switch(b){case "N":a=Ge(a.f);break;case "Z":a=Fe(a.f);break;case "V":a=Ee(a.f);break;case "C":a=De(a.f);break;default:a=0}return b.charAt(0)+(a?"1":"0")+" "}function Pk(a,b){var c=dk(a,b);c&&(c+="="+K(a,a.Ad(b))+" ");return c}
function Qk(a,b){var c,d="";for(c=0;6>c;c++)d+=Pk(a,c);d=d+"\n"+(Pk(a,6)+Pk(a,7));d+=Pk(a,gk)+Pk(a,hk)+Pk(a,jk);d+=Ok(a,"T")+Ok(a,"N")+Ok(a,"Z")+Ok(a,"V")+Ok(a,"C");b&&(b=d,c=""+(Pk(a,kk)+Pk(a,lk)),c+=Pk(a,mk)+Pk(a,nk)+Pk(a,ik),c=c+"\n"+(Pk(a,pk)+Pk(a,ek)+Pk(a,ok)),d=b+("\n"+c));return d}h.me=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function Fh(a,b,c,d,e){var f=[],g;for(g in e){var k=e[g];"number"==typeof k&&(e[g]=k={o:k});var l=k.o,m=k.a;if(void 0!==l){var n=f,l=[l>>>0,g],r=Ba(n,l,a.me);0>r&&n.splice(-(r+1),0,l)}m&&(k.a=m.replace(/''/g,'"'))}a.C.push({Mk:b,L:c,Mf:d,ia:e,ie:f})}function Rk(a,b,c){var d=[],e=Tj(b)>>>0;for(b=0;b<a.C.length;b++){var f=a.C[b],g=f.L>>>0,k=f.Mf;if(e>=g&&e<g+k){e=Ba(f.ie,[e-g],a.me);0<=e?Sk(a,b,e,d):c&&(e=~e,Sk(a,b,e-1,d),Sk(a,b,e,d));break}}return d}
function Sk(a,b,c,d){var e={},f=a.C[b].ie,g=0,k=null;0<=c&&c<f.length&&(g=f[c][0],k=f[c][1]);k&&(e=a.C[b].ia[k],k="."==k.charAt(0)?null:e.l||k);d.push(k);d.push(g);d.push(e.a);d.push(e.c)}function Tk(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return Nj(a)||a.v("no variables"),!0;if(!c[2])return Nj(a,c[1]);if(!c[3])return delete a.i[c[1]],!0;b=Lj(a,c[3]);return void 0!==b?(a.i[c[1]]={value:b,jh:void 0},!0):!1}a.v("invalid assignment:"+b);return!1}
function Uk(a,b,c){var d=null;if(b=Yj(a,b,!0)){var e=Rk(a,b,!0);if(e.length){var f,g;e[0]&&(g="",(f=b.L-e[1])&&(g=" + "+ra(f)),f=e[0]+" ("+K(a,e[1])+")"+g,c&&a.v(f),d=f);4<e.length&&e[4]&&(g="",(f=e[5]-b.L)&&(g=" - "+ra(f)),f=e[4]+" ("+K(a,e[5])+")"+g,c&&a.v(f),d||(d=f))}else c&&a.v("no symbols")}return d}
function uk(a,b){var c;if(b&&"?"==b[1])a.v("register commands:"),a.v("\tr\tdump registers"),a.v("\trm\tdump misc registers"),a.v("\trx [#]\tset flag or register x to [#]");else{var d=!1,e=a.f;null==c&&(c=!0);if(b&&1<b.length){var f=b[1];if("m"==f)d=!0;else{var g=f.indexOf("=");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.v("missing value for "+b[1]);return}g=Lj(a,b);if(void 0===g)return;b=f.toUpperCase();switch(b){case "SP":case "R6":e.g[6]=g&65535;break;case "PC":case "R7":tc(e,
g);a.I=X(e.g[7]);break;case "N":e.I=g?32768:0;break;case "Z":e.K=g?0:1;break;case "V":e.G=g?32768:0;break;case "C":e.C=g?65536:0;break;case "PS":Dd(e,g);break;case "PI":Bd(e,g);break;case "ER":e.P=g;d=!0;break;case "SL":e.Ga=g|255;break;case "M0":xd(e,g);d=!0;break;case "M3":Ad(e,g);d=!0;break;case "AR":a.g&&(d=a.g,lc(d,d.ga=g));d=!0;break;case "DR":a.g&&Wb(a.g,g);d=!0;break;case "SR":a.g&&mc(a.g,g);d=!0;break;default:if("R"==b.charAt(0)&&(b=+b.charAt(1),0<=b&&6>b)){e.g[b]=g&65535;break}a.v("unknown register: "+
f);return}H(a.J);a.v("updated registers:")}}a.v(Qk(a,d));c&&(a.I=X(e.g[7]),vk(a,bk(a,a.I)))}}function Vk(a,b){b=za(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.v(c[2]):Mj(a,null,c[2].charCodeAt(0)):Lj(a,b,!1)}
function Wk(a,b,c){if("?"==c)a.v("trace commands:"),a.v("\tt  [#]\ttrace # instructions"),a.v("\ttr [#]\ttrace # instructions with register updates"),a.v("\ttc [#]\ttrace # cycles"),a.v("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=Gj(a,c,null,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.ua=b;Pa(c,function(){return Hb(a,!0)&&xc(a,e,d,!1)},function(){a.g&&a.g.stop();H(a.J,-1);Hb(a,!1)})}}
function vk(a,b,c,d){if(b=Yj(a,b,!0)){void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=Gj(a,c.substr(1)),null!=c&&(d=c);else{d=Yj(a,c,!0);if(!d||d.L<b.L)return;e=d.L-b.L;if(256<e){a.v("range too large");return}d=-1}c=0;for(var f;0<e&&d--;){f=Gb(a,!1)||a.K?a.B:null;var g=null!=f?"cycles":null,k=Rk(a,b),l=b.L;if(k[0]&&d&&(!c&&d||0>k[0].indexOf("+"))){var m=k[0]+":";k[2]&&(m+=" "+k[2]);a.v(m)}k[3]&&(g=k[3],f=null);f=Ck(a,b,g,f);a.v(f);a.I=b;e-=b.L-l;c++}}}
function Bk(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.v(tk+b):(a.R&&(a.v("ended assemble at "+bk(a,a.P)),a.I=a.P,a.R=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.U=null;if(Fb(a)&&0<b.length){a.R&&(b="a "+bk(a,a.P)+" "+b);var f=!1,g=b.replace(/ +/g," ").split(" ");g[0]=g[0].toLowerCase();if(g&&g.length)for(var k=g[0],l=k.charAt(0),m=1;m<k.length;m++){var n=k.charAt(m);if("?"==l||"r"==l||"a">n||"z"<n){g[0]=k.substr(m);g.unshift(k.substr(0,m));break}}switch(g[0].charAt(0)){case "a":var r=
Yj(a,g[1],!0);if(r)if(a.P=r,void 0===g[2])a.v("begin assemble at "+bk(a,r)),a.R=!0,H(a.J);else{var t;a.v("not supported yet");t=[];if(t.length){for(var q=0;q<t.length;q++)a.Qd(r,t[q],1);a.v(Ck(a,a.P))}}break;case "b":a:{var z=g[0],B=g[1],C=b;if("?"==B)a.v("breakpoint commands:"),a.v("\tbp #\tset exec breakpoint"),a.v("\tbr #\tset read breakpoint"),a.v("\tbw #\tset write breakpoint"),a.v("\tbc #\tclear breakpoint (* to clear all)"),a.v("\tbl\tlist all breakpoints"),a.v("\tbn [#]\tbreak after # instruction(s)");
else{var J=z.charAt(1);if("l"==J){var wb;wb=0+Ak(a,a.b);wb+=Ak(a,a.M);(wb+=Ak(a,a.G))||a.v("no breakpoints")}else if("n"==J){var Fd=+B||0;B&&(a.ha=Fd);a.v("break after "+Fd+" instruction(s)")}else if(void 0===B)a.v("missing breakpoint address");else{var sa=X();if("*"!=B&&(sa=Yj(a,B,!0),!sa))break a;"c"==J?null==sa.L?(Pj(a),a.v("all breakpoints cleared")):yk(a,a.b,sa)||yk(a,a.M,sa)||yk(a,a.G,sa)||a.v("breakpoint missing: "+bk(a,sa)):null!=sa.L&&(ak(a,sa,C),"p"==J?a.Ab(a.b,sa):"r"==J?a.Ab(a.M,sa):"w"==
J?a.Ab(a.G,sa):a.v("unknown breakpoint command: "+J))}}}break;case "c":var yi=a.J;yi.w&&(yi.w.value="");break;case "d":a:{var Zb,lb=g[0],Ua=g[1],mb=g[2],vl=g[3];if("?"==Ua){var $b="";for(Zb in Tb)a.ma[Zb]&&($b&&($b+=","),$b+=Zb);$b+=",state,symbols";a.v("dump memory commands:");a.v("\tda [a]        dump info for address a");a.v("\tdb [a] [n]    dump n bytes at address a");a.v("\tdw [a] [n]    dump n words at address a");a.v("\tdd [a] [n]    dump n dwords at address a");a.v("\tds [a] [n]    dump n words at address a as JSON");
a.v("\tdh [p] [n]    dump n instructions from history position p");$b.length&&a.v("dump extension commands:\n\t"+$b)}else if("state"==Ua){var gf=Xk(a.J,!0);if("console"==mb)console.log(gf);else{var zi=a.J;zi.w&&(zi.w.value="");gf&&a.v(gf)}}else if("symbols"==Ua)for(var hf=0;hf<a.C.length;hf++){var jf=a.C[hf],ac;for(ac in jf.ia)if("."!=ac.charAt(0)){var Ai=jf.ia[ac].o;if(void 0!==Ai){var Bi=jf.ia[ac].l;Bi&&(ac=Bi);a.v(K(a,Ai)+" "+ac)}}}else{if("d"==lb){for(Zb in Tb)if(g[1]==Zb){var Ci=a.ma[Zb];Ci?
(g.shift(),g.shift(),Ci(g)):a.v("no dump registered for "+Ua);break a}Ua||(lb=a.La||"dw")}else a.La=lb;if("dh"==lb){var Di=Ua,Ei=mb,Fi="",Gi=0,Ia=a.S,Va=a.j;if(Va.length){var Ca=+Di||a.ta,Nc=+Ei||10;isNaN(Ca)?Ca=Nc:Fi="more ";Ca>Va.length&&(a.v("note: only "+Va.length+" available"),Ca=Va.length);Ia-=Ca;0>Ia&&(null==Va[Va.length-1].L?(Ca=Ia+Ca,Ia=0):Ia+=Va.length);var kf=[];"call"==Ei&&(Nc=1E5,kf=["CALL"]);for(void 0!==Di&&a.v(Ca+" instructions earlier:");0<Nc&&Ia!=a.S;){var Hi=Va[Ia++];if(null==Hi.L)break;
var Oc=X(Hi.L),wl=Ca--,Ii=Ck(a,Oc,"history",wl);(!kf.length||0<=Ii.indexOf(kf[0]))&&a.v(Ii);Oc.xd&&(Ia+=Oc.xd,Nc-=Oc.xd,Ca-=Oc.xd);Ia>=Va.length&&(Ia=0);a.ta=Ca;Gi++;Nc--}}Gi||(a.v("no "+Fi+"history available"),a.ta=void 0)}else{var oa=Yj(a,Ua);if(oa)if("da"==lb){var lf=oa.Na||65535<oa.L,O=Re(a.f,oa.L||0,lf);a.v(ya("",lf?12:19)+pa(oa.L,lf?22:17,3)+"  "+u(oa.L,8));6>O.length?(2<O.length&&(a.v("    OFFSET:             "+pa(O[3],13,3)+"  "+u(O[3],8)),a.v("UNIMAP["+qa(O[1],2)+"]: "+pa(O[2],22,3)+"  "+
u(O[2],8))),a.v("  PHYSICAL: "+pa(O[0],22,3)+"  "+u(O[0],8))):(a.v("    OFFSET:             "+pa(O[1],13,3)+"  "+u(O[1],8)),a.v("+   "+Yk[O[2]]+"PAR"+O[3]+": "+pa(O[4],22,3)+"  "+u(O[4],8)),a.v("&  MMUMASK: "+pa(O[5],22,3)+"  "+u(O[5],8)),a.v("= PHYSICAL: "+pa(O[0],22,3)+"  "+u(O[0],8)))}else{var xb=0,mf="ds"==lb;if(mb){if("l"==mb.charAt(0))mb=mb.substr(1)||vl,xb=Gj(a,mb);else{var Ji=Yj(a,mb);Ji&&(xb=Ji.L-oa.L)}0>xb&&(xb=0);65536<xb&&(xb=65536)}var yl=a.W;oa.W&&(a.W=oa.W);for(var yb="dd"==lb?4:"db"==
lb?1:2,Od=yb*xb||128,nf=mf?16:a.W,zl=(Od+nf-1)/nf|0||1,zb="";zl--&&0<Od;){for(var Ab="",of="",Ua=bk(a,oa),Pd=nf,Pc=0,Qc=0;0<Pd&&0<Od;){var bc=1,Qd=1==yb?a.Pd(oa,bc):a.Sa(oa,bc=2),Pc=Pc|Qd<<(Qc<<3),Qc=Qc+bc;Qc==yb&&(mf?(Ab&&(Ab+=","),Ab+="0x"+v(Pc,yb<<1)):(Ab+=K(a,Pc,yb<<3),Ab+=1==yb?9==Pd?"-":" ":"  "),Pc=Qc=0);Pd-=bc;for(Od-=bc;1==yb&&bc--;)var pf=Qd&255,of=of+(32<=pf&&128>pf?String.fromCharCode(pf):"."),Qd=Qd>>8}zb&&(zb+="\n");zb=mf?zb+(Ab+","):zb+(Ua+":  "+Ab+(Pd?"":" "+of))}zb&&a.v(zb);a.Ga=oa;
a.W=yl}}}}break;case "e":if("else"==g[0])break;var cc,qf,rf,sf,tf=g[0],uf=g[1];"eb"==tf?(cc=1,qf=255,rf=a.Pd,sf=a.Qd):"e"==tf||"ew"==tf?(cc=2,qf=65535,rf=a.Sa,sf=a.Le):uf=null;if(null==uf)a.v("edit memory commands:"),a.v("\teb [a] [...]  edit bytes at address a"),a.v("\tew [a] [...]  edit words at address a");else{var Rd=Yj(a,uf);if(Rd)for(var Sd=2;Sd<g.length;Sd++){var Rc=Lj(a,g[Sd]);if(void 0===Rc){a.v("unrecognized value: "+g[Sd]);break}Rc&~qf&&a.v("warning: "+v(Rc)+" exceeds "+cc+"-byte value");
a.v("changing "+bk(a,Rd)+(E(a,16)?"":" from "+K(a,rf.call(a,Rd),cc<<3))+" to "+K(a,Rc,cc<<3));sf.call(a,Rd,Rc,cc)}}break;case "g":a:{var Ki=g[1],Al=b;if(void 0!==Ki){var vf=Yj(a,Ki,!0);if(!vf)break a;ak(a,vf,Al);a.Ab(a.b,vf,!0)}rk(a,!0,c)}break;case "h":a.A.V?(c||a.v("halting"),a.da()):Gb(a,!0)||c||a.v("already halted");break;case "i":if("if"==g[0]){var wf;var Sc=b.substr(2),Sc=za(Sc);Lj(a,Sc)?(c||a.v("true: "+Sc),wf=!0):(c||a.v("false: "+Sc),wf=!1);wf||(d=!1);break}f=!0;break;case "k":var Bl=g[0];
if("?"==g[1])a.v("stack trace commands:"),a.v("\tk\tshow frame addresses"),a.v("\tks\tshow symbol information");else{var xf=0,yf=X(),Tc=X(a.f.g[6]);for(a.v("stack trace for "+bk(a,Tc));10>xf;){for(var Bb=null,Cl=256;65536>Tc.L>>>0;){yf.L=a.Sa(Tc,2);if(null==Tc.L||!Cl--)break;if(!(yf.L&1)){for(var Dl=a,Td=yf,Li=null,Uc=Td.L,Mi=Uc,zf=1;6>=zf&&Uc;zf++){if(2<zf){Td.L=Uc;var Ud=Ck(Dl,Td);if(0<=Ud.indexOf("JSR")){var Ni=Ud.indexOf(" ");if(Uc+(Ud.indexOf(" ",Ni+1)-Ni-1)/2==Mi){Li=Ud;break}}}Uc-=2}Td.L=Mi;
if(Bb=Li)break}}if(!Bb||null==Bb)break;var Oi=null;if("ks"==Bl){var Pi=Bb.match(/[0-9A-F]+$/);Pi&&(Oi=Uk(a,Pi[0]))}Bb=ya(Bb,50)+"  ;"+(Oi||"stack="+bk(a,Tc));a.v(Bb);xf++}xf||a.v("no return addresses found")}break;case "l":if("ln"==g[0]){Uk(a,g[1],!0);break}f=!0;break;case "m":a:{var Wa,Xa=null,T=g[1];"?"==T&&(T=void 0);if(void 0!==T){var nb=0;if("all"==T)nb=1879046143,T=null;else if("on"==T)Xa=!0,T=null;else if("off"==T)Xa=!1,T=null;else{"keys"==T&&(T="key");"kbd"==T&&(T="keyboard");for(Wa in Tb)if(T==
Wa){nb=Tb[Wa];Xa=!!(a.ja&nb);break}if(!nb){a.v("unknown message category: "+T);break a}}if(nb)if("on"==g[2])a.ja|=nb,Xa=!0;else if("off"==g[2]&&(a.ja&=~nb,Xa=!1,1073741824==nb)){for(var Qi=1E3<=a.N.length?a.N.length-1E3:0;Qi<a.N.length;)a.v(a.N[Qi++]);a.N=[]}}var El=0,Vc="";for(Wa in Tb)if(!T||T==Wa){var Fl=!!(a.ja&Tb[Wa]);if(null===Xa||Xa==Fl)Vc&&(Vc+=","),++El%10||(Vc+="\n\t"),"key"==Wa&&(Wa="keys"),Vc+=Wa}void 0===T&&a.v("message commands:\n\tm [category] [on|off]\tturn categories on/off");a.v((null!==
Xa?Xa?"messages on:  ":"messages off: ":"message categories:\n\t")+(Vc||"none"));Qj(a)}break;case "p":if("print"==g[0]){Vk(a,b.substr(5));break}var Gl=g[0];if("?"==g[1])a.v("step commands:"),a.v("\tp\tstep over instruction"),a.v("\tpr\tstep over instruction with register update");else{var Ri="pr"==Gl?1:0,Si=1+Ri;if(a.K)a.v("step in progress");else{var Vd=X(a.f.g[7]),dc=a.Sa(Vd);3==dc||4==dc||34816==(dc&65280)||32256==(dc&65024)||35072==(dc&65280)?(a.K=Si,Zj(Vd,2)):2048==(dc&65024)&&(Ck(a,Vd),a.K=
Si);a.K?(a.Ab(a.b,Vd,!0),rk(a)||(a.J&&se(a.J),a.K=0)):Wk(a,Ri?"tr":"t")}}break;case "r":if("reset"==b){a.J&&a.J.reset();break}uk(a,g);break;case "s":a:switch(g[1]){case "base":if(g[2]){var Wc=+g[2];if(8==Wc||10==Wc||16==Wc)a.W=Wc;else{a.v("invalid base: "+Wc);break}}a.v("default base: "+a.W);break;case "cs":var Xc;void 0!==g[3]&&(Xc=+g[3]);switch(g[2]){case "int":a.f.Lb=Xc;break;case "start":a.f.nc=Xc;break;case "stop":a.f.Pb=Xc;break;default:a.v("unknown cs option");break a}void 0!==Xc&&ke(a.f);
a.v("checksums "+(a.f.A.Mb?"enabled":"disabled"));break;case "sp":void 0!==g[2]&&(pe(a.f,+g[2])||a.v("warning: using 1x multiplier, previous target not reached"));a.v("target speed: "+(a.f.wb.toFixed(2)+"Mhz")+" ("+a.f.lb+"x)");break;default:if(g[1]){a.v("unknown option: "+g[1]);break}case "?":a.v("debugger options:"),a.v("\tbase #\t\tset default base to #"),a.v("\tcs int #\tset checksum cycle interval to #"),a.v("\tcs start #\tset checksum cycle start count to #"),a.v("\tcs stop #\tset checksum cycle stop count to #"),
a.v("\tsp #\t\tset speed multiplier to #")}break;case "t":Wk(a,g[0],g[1]);break;case "u":vk(a,g[1],g[2],8);break;case "v":if("var"==g[0]){Tk(a,b.substr(3))||(d=!1);break}if("ver"==g[0]){a.v((Jb||"PDP11")+" version 1.36.0 ("+a.f.ka+",RELEASE"+(Lb?",TYPEDARRAYS":Kb?",BYTEARRAYS":",LONGARRAYS")+")");a.v(window?window.navigator.userAgent:"");break}f=!0;break;case "?":if(g[1]){Vk(a,b.substr(1));break}var Af="commands:",Bf;for(Bf in Zk)Af+="\n"+ya(Bf,9)+Zk[Bf];df(a)||(Af+="\nnote: history disabled if no exec breakpoints");
a.v(Af);break;default:f=!0}f&&(a.v("unknown command: "+b),d=!1)}}catch(Ui){a.v("debugger error: "+(Ui.stack||Ui.message)),d=!1}return d}function ne(a,b,c){b=Cj(a,b,c);for(var d in b)if(!Bk(a,b[+d]))return!1;return!0}
var Zk={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},Ek=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),
gk=20,hk=21,ik=22,jk=23,kk=24,lk=25,mk=26,nk=27,ek=28,ok=29,pk=30,ck={SP:6,PC:7,PS:gk,PI:hk,ER:ik,SL:jk,M0:kk,M1:lk,M2:mk,M3:nk,AR:ek,DR:ok,SR:pk},fk="R0 R1 R2 R3 R4 R5 SP PC A0 A1 A2 A3 A4 A5 A6 A7 S0 S1 S2 S3 PS PI ER SL M0 M1 M2 M3 AR DR SR".split(" "),Yk="KI KD SI SD ?? ?? UI UD".split(" "),Lk=7,Mk=56,Z=Mk|Lk,Kk=4032,Y=4096,Gk=8192,Hk=12288,Ik=24576,Jk=32768,Fk=61440,Sj={61440:{4096:[62,Kk,Z],8192:[47,Kk,Z],12288:[18,Kk,Z],16384:[14,Kk,Z],20480:[16,Kk,Z],24576:[3,Kk,Z],36864:[63,Kk,Z],40960:[48,
Kk,Z],45056:[19,Kk,Z],49152:[15,Kk,Z],53248:[17,Kk,Z],57344:[94,Kk,Z]},65024:{2048:[57,448,Z],28672:[100,Z,448],29184:[101,Z,448],29696:[102,Z,448],30208:[103,Z,448],30720:[104,448,Z],32256:[105,448,Gk]},65280:{256:[27,Y],512:[24,Y],768:[10,Y],1024:[11,Y],1280:[22,Y],1536:[12,Y],1792:[20,Y],32768:[25,Y],33024:[23,Y],33280:[13,Y],33536:[21,Y],33792:[28,Y],34048:[29,Y],34304:[8,Y],34560:[9,Y],34816:[106,Jk],35072:[107,Jk]},65472:{64:[56,Z],192:[95,Z],2560:[39,Z],2624:[49,Z],2688:[53,Z],2752:[51,Z],
2816:[67,Z],2880:[1,Z],2944:[77,Z],3008:[97,Z],3072:[73,Z],3136:[71,Z],3200:[6,Z],3264:[4,Z],3328:[58,Ik],3392:[60,Z],3456:[65,Z],3520:[96,Z],35328:[40,Z],35392:[50,Z],35456:[54,Z],35520:[52,Z],35584:[68,Z],35648:[2,Z],35712:[78,Z],35776:[98,Z],35840:[74,Z],35904:[72,Z],35968:[7,Z],36032:[5,Z],36096:[66,Z],36160:[59,Z],36224:[64,Z],36288:[61,Z]},65528:{128:[76,Lk],152:[108,Hk]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],
166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],191:[79]}},Dk=[0],Wj=[58,60,65,96,110,100,101,102,103,104,105],Xj=[108,59,64],qk=1E3,tk=">> ";Sa(function(){for(var a=A(document,y,"debugger"),b=0;b<a.length;b++){var c=a[b],d=kb(c),d=new Oj(d);jb(d,c)}});
function $k(a,b,c){x.call(this,"Computer",a,33554432);this.A.ca=!1;this.P=null;al(this,b);this.M=ie(this,"autoPower",a,6);this.j=0;this.U=+a.busWidth||+a.buswidth;this.I=this.B=this.K=null;this.G=this.S=!1;this.C=this.u=null;this.R=this.N=this.O=!1;this.X=ie(this,"url")||"";(Math.random()+.1).toString(36);this.g=bl(this);if(this.f=qb("CPU",this.id)){this.D=qb("Debugger",this.id);this.F=new Ic({id:this.ub+".bus",busWidth:this.U},this.f,this.D);var d,e=ob(this.id);if(this.w=(this.i=qb("Panel",this.id))&&
this.i.H.print)for(b=0;b<e.length;b++)d=e[b],d.T=this.i.T,d.print=this.i.print,d.v=this.i.v;this.v(Jb+" v1.36.0\nCopyright \u00a9 2012-2017 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");this.v("Portions adapted from the PDP-11/70 Emulator by Paul Nankervis <http://skn.noip.me/pdp11/pdp11.html>");for(b=0;b<e.length;b++)d=e[b],d.Ba&&d.Ba(this,this.F,this.f,this.D);b=null;d=ie(this,"resume",a);void 0!==d&&(1<d.length?b=this.B=d:this.b=parseInt(d,10));
var f;if(a=ie(this,"state")||(f=!0,a.state))this.K=b=a,f||(this.G=!0,this.b=cl),this.b&&(this.C=new G(this,"1.36.0"),dl(this.C)?b=null:delete this.C);!b&&this.b&&(b=el(this))&&(this.G=!0);if(b){var g=this;Ea(b,null,!0,function(a,b,c){c?(g.B=null,g.G=!1,g.T("Unable to load machine state from server (error "+c+(b?": "+za(b):"")+")")):(g.I=b,g.S=!0);D(g)})}else D(this);this.H.power||(this.M=!0);!c&&this.M&&this.wc(this.qc)}else w("Unable to find CPU component")}p($k,x);
function al(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){w(d.message+" ("+c+")")}}a.P=b}function ie(a,b,c,d){var e=b.toLowerCase(),e=Na(b)||Na(e);void 0===e&&a.P&&(e=a.P[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);void 0===e&&(e=void 0);if("string"==typeof e&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e="true"==e}return e}h=$k.prototype;
h.wc=function(a,b){for(var c=this,d=ob(this.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:this;if(!Fb(f)){Fb(f,function(){c.wc(a,b)});return}}a.call(this,b)};function fl(a,b){var c=new G(a,"1.36.0",gl);if(dl(c)&&hl(c)){var d=c.get(il),e=b?b.get(il):"unknown";d!=e&&(a.T("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}
h.qc=function(a){void 0===a&&(a=this.b||(this.I?jl:cl));if(!this.j){this.j++;var b=!1,c=!1;this.O=!1;var d=this.C||new G(this,"1.36.0");if(a==kl)b=!0;else if(a>cl){if(dl(d,this.I)){this.u=new G(this,"1.36.0",ll);dl(this.u)&&(ml(this,d),a=nl,ol(this.u));this.u.set(il,Da());pl(this.u);var e=this.b&&!this.G;if(a==jl||hb("Click OK to restore the previous "+Jb+" machine state, or CANCEL to reset the machine.")){if(c=hl(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?dl(d,g):("error"==f&&"no machine state"!=
g?(this.T("Error: "+g),"unable to verify user"==g&&(La(ql,""),this.g=null)):this.v(f+": "+g),ol(d),dl(d)?(c=hl(d),e=!0):c=!1))}e&&fl(this,c?d:null)}else a==nl&&d.clear()}else fl(this);delete this.I;delete this.C}e=ob(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.f&&(c=rl(this,g,d,b,c));b=[d,a,c];a!=kl?this.wc(this.oe,b):this.oe(b)}};
function rl(a,b,c,d,e){if(!b.A.ca){b.A.ca=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/-[0-9]+\./i,".")))),"string"===typeof f&&(f=null),!b.Da(f,d)&&f&&(w("Unable to restore state for "+b.type),a.K&&!a.S?(c.clear(),a.b=cl,window&&window.location.reload()):a.O=!0,b.Da(null),e=!1),!d&&b.Vd){var g=b.Vd.split("|");for(a=0;a<g.length;a++)b.status(g[a])}}catch(k){w("Error restoring state for "+b.type+" ("+k.message+")")}}return e}
h.oe=function(a){var b=a[0],c=0>a[1];a=a[2];this.R=!0;this.A.ca=!0;var d=this.H.power;d&&(d.textContent="Shutdown");this.f&&(rl(this,this.f,b,c,a),H(this,-2),this.f.ra());this.O&&(ml(this,b),b.clear());!c&&this.u&&(this.u.clear(),delete this.u);this.j=0};
function ml(a,b){if(hb("There may be a problem with your "+Jb+" machine.\n\nTo help us diagnose it, click OK to send this "+Jb+" machine state to http://www.pcjs.org.")){var c=a.X;a=a.g||"";b=b.toString();var d={};d.app=Jb;d.ver="1.36.0";d.url=c;d.user=a;d.type="bug";d.data=b;Ea("http://www.pcjs.org/api/v1/report",d,!0)}}
function Xk(a,b,c){var d,e="none";if(a.j)return null;a.j--;var f=new G(a,"1.36.0"),g=new G(a,"1.36.0",gl),k=Da();g.set(il,k);f.set(il,k);f.set(sl,"1.36.0");f.set(tl,window?window.location.href:null);f.set(ul,window?window.navigator.userAgent:"");a.f&&a.f.Ca&&(c&&(b&&(a.f.A.ra=a.f.A.V),a.f.da()),d=a.f.Ca(b,c),"object"===typeof d&&f.set(a.f.id,d),c&&(a.f.A.ca=!1,!1===d&&(e=null)));for(var k=ob(a.id),l=0;l<k.length;l++){var m=k[l];m.A.ca&&(m.Ca&&(d=m.Ca(b,c),"object"===typeof d&&f.set(m.id,d)),c&&(m.A.ca=
!1,!1===d&&(e=null)))}e&&(c?(k=d=!1,b?(a.g&&xl(a,a.g,f.toString()),pl(g)&&pl(f)||(e=null,d=k=!0)):a.b&&(d=!0,k=a.b==Hl),d&&f.clear(k)):e=f.toString());c&&(a.A.ca=!1,b=a.H.power)&&(b.textContent="Power");a.j=0;return e}
h.reset=function(){this.A.reset=!0;this.F&&this.F.reset&&(F(this,"Resetting "+this.F.type),this.F.reset());this.f&&this.f.reset&&(F(this,"Resetting "+this.f.type),this.f.reset());for(var a=ob(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.F&&c!==this.f&&c.reset&&(F(this,"Resetting "+c.type),c.reset())}this.A.reset=!1;H(this,-1)};h.start=function(a,b){for(var c=ob(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}H(this,-1)};
h.stop=function(a,b){for(var c=ob(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}H(this,-1)};
function H(a,b){if(a.f){var c=a.f,d=b||0,e=c.H.speed;e&&(0>=d||30<=(c.$c+=d))&&(e.textContent=c.A.V?c.vb.toFixed(2)+"Mhz":"Stopped",c.$c=0)}if(a.i&&(a=a.i,b=b||0,a.u)){c=a.f.A.V;d=!!(a.f.i&8);if(0>=b||60<=(a.j+=b)){for(e=0;e<a.f.g.length;e++)pc(a,"R"+e,a.f.g[e]);e=Cd(a.f);pc(a,"PS",e);pc(a,"NF",e&8?1:0,1);pc(a,"ZF",e&4?1:0,1);pc(a,"VF",e&2?1:0,1);pc(a,"CF",e&1?1:0,1);a.j=0}-1>b?a.ga=a.f.g[7]:0<b&&c&&!d&&(a.ga=a.f.hb);lc(a,a.ga);Xb(a,a.Db);b=a.f;b=b.xb?b.X&16?1:2:4;Gc(a,"B22",b&1);Gc(a,"B18",b&2);
Gc(a,"B16",b&4)}}
h.wa=function(a,b,c){var d=this;switch(b){case "power":return this.H[b]=c,c.onclick=function(){d.j||(d.A.ca?Xk(d,!1,!0):d.wc(d.qc))},!0;case "reset":return this.H[b]=c,c.onclick=function(){if(d.A.ca&&!d.j)if(d.b&&!d.B){var a=hb("Click OK to save changes to this "+Jb+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");Xk(d,a,!0);!a&&d.K?window&&window.location.reload():(a||(d.N=!0),d.qc(cl),d.N=!1)}else d.reset(),d.f&&!d.D&&d.f.ra()},!0;case "save":if(va(Ga(),"pcjs.org"))c.parentNode.removeChild(c);
else return this.H[b]=c,c.onclick=function(){var a=bl(d,!0);if(a){var b=!!(d.b&&!d.B||d.K),c=Xk(d,b);b?xl(d,a,c):d.T("Resume disabled, machine state not saved")}},!0}return!1};
function bl(a,b){var c=a.g;c||((c=Ka(ql),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Il(a,c))||a.T("The user ID is invalid.")):b&&a.T("Browser local storage is not available"));return c}
function Il(a,b){a.g=null;b=Ea(Ga()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(La(ql,b.data),a.g=b.data)}catch(d){w(d.message+" ("+c+")")}return a.g}function el(a){var b=null;a.g&&(b=Ga()+"/api/v1/user?req=load&user="+a.g+"&state="+Jl(a,"1.36.0"));return b}
function xl(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=Jl(a,"1.36.0");d.data=c;b=Ea(Ga()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.T("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.T(c),La(ql,""),a.g=null)}}
function Wh(a){var b;a=ob(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function se(a,b){if(a.w){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.w.focus();!b&&window&&window.scrollTo(c,d)}}var ll="failsafe",gl="validate",il="timestamp",sl="version",tl="url",ul="browser",ql="user",kl=-1,cl=0,jl=1,nl=2,Hl=3;
Sa(function(){for(var a=A(document,y+"-machine"),b=0;b<a.length;b++)for(var c=a[b],d=kb(c),c=A(c,y,"computer"),e=0;e<c.length;e++){var f=c[e],g=kb(f),g=new $k(g,d,!0);jb(g,f);g.M&&g.wc(g.qc)}});Ta.show.push(function(){for(var a=A(document,y,"computer"),b=0;b<a.length;b++){var c=kb(a[b]);if(c=qb("Computer",c.id))c.A.Id=!1,c.R&&!c.A.ca&&c.qc(kl)}});
Ta.exit.push(function(){for(var a=A(document,y,"computer"),b=0;b<a.length;b++){var c=kb(a[b]);if(c=qb("Computer",c.id))c.A.Id=!0,c.A.ca&&Xk(c,!(!c.b||c.B),!0)}});function G(a,b,c){this.id=a.id;this.b="";this.f={};this.g=this.D=!1;this.key=Jl(a,b,c);ol(this,a.wf)}h=G.prototype;h.set=function(a,b){try{this.f[a]=b}catch(c){}};h.get=function(a){return this.f[a]||null};h.data=function(){return this.f};function dl(a,b){return b?(a.b=b,a.g=!0,a.D=!1,!0):a.g?!0:Ha()&&(b=Ka(a.key))?(a.b=b,a.g=!0):!1}
function hl(a){var b=!0;if(!a.D)try{a.f=JSON.parse(a.b),a.D=!0}catch(c){w(c.message||c),b=!1}return b}function pl(a){var b=!0;if(Ha()){var c=JSON.stringify(a.f);La(a.key,c)||(w("Unable to store "+c.length+" bytes in browser local storage"),b=!1)}return b}h.toString=function(){return this.f?JSON.stringify(this.f):this.b};function ol(a,b){a.b="";a.f={};a.g=a.D=!1;b&&a.set("parms",b)}
h.clear=function(a){ol(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function Jl(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Kl=0;
function Ll(a,b,c,d,e,f,g){f("Loading "+a+"...");Ea(a,null,!0,function(k,l,m){m?(l||(l="unable to load "+a+" ("+m+")"),g(l,null)):Ml(l,a,b,c,d,e,f,g)})}
function Ml(a,b,c,d,e,f,g,k){function l(a,g){if(g)k(g,null);else{c&&(eb(c,b,a),(g=b)&&0>g.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(g=window.location.pathname+g),e?"}"==e.slice(-1)?(e=e.slice(0,-1),1<e.length&&(e+=",")):e='{state:"'+e+'",':e="{",e+='url:"'+g+'"}',"object"==typeof resources&&(g=null),e=e.replace(/\$/g,"$$$$"),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(e?" parms='"+e+"'":"")+(g?' url="'+g+'"':"")));f||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,
"$1PDPjs$2"),a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1"+d+"$2"));g=null;if("<"==a.charAt(0))try{f||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(g=new window.ActiveXObject("Microsoft.XMLDOM"),g.async=!1,g.loadXML(a)):g=(new window.DOMParser).parseFromString(a,"text/xml")}catch(r){g=null,a=r.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);k(a,g)}}a?f?Nl(a,g,l):l(a,null):k("no data"+(b?" for file: "+
b:""),null)}
function Nl(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");Ea(e,null,!0,function(f,g,k){if(k||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+k+")");else{if(f=d[3])if(k=g.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var l=k[0],m,n=/( [a-z]+=)(['"])(.*?)\2/gi;m=n.exec(f);)l=0>l.toLowerCase().indexOf(m[1].toLowerCase())?l.replace(">",m[0]+">"):l.replace(new RegExp(m[1]+"(['\"])(.*?)\\1"),m[0]);k[0]!=l&&(g=g.replace(k[0],l))}else{c(a,"missing <"+d[1]+
"> in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,"");a=a.replace(d[0],g);Nl(a,b,c)}})}else c(a,null)}
function Ol(a,b,c,d,e){function f(a){if(void 0===l){var b=k&&A(k,"machine-warning");l=b&&b[0]||k}l&&(l.innerHTML=wa(a))}function g(a){f("Error: "+a);m&&(--Kl||$a(!0));m=!1}var k,l,m=!0;Kl++;fb[b]={};try{if(k=document.getElementById(b)){var n;if("object"==typeof resources&&(n=resources.css)){var r=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css";t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n));r.appendChild(t)}d||
(n=a,"pdp"==a.substr(0,3)&&(n="pdpjs"),d="/versions/"+n+"/1.36.0/components.xsl");n=function(e,l){l?Ll(d,null,a,null,!1,f,function(a,e){e?(eb(b,d,a),f("Processing "+c+"..."),window.ActiveXObject||"ActiveXObject"in window?(e=l.transformNode(e))?(k.outerHTML=e,--Kl||$a(!0)):g("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(a=new XSLTProcessor,a.importStylesheet(e),(e=a.transformToFragment(l,document))?k.parentNode?(k.parentNode.replaceChild(e,k),--Kl||
$a(!0)):g("invalid machine element: "+b):g("transformToFragment failed")):g("unable to transform XML: unsupported browser")):g(a)}):g(e)};"<"!=c.charAt(0)?Ll(c,b,a,e,!0,f,n):Ml(c,null,b,a,e,!1,f,n)}else g("missing machine element: "+b)}catch(q){g(q.message)}return m}window.embedPDP10=function(a,b,c,d){$a(!1);return Ol("pdp10",a,b,c,d)};window.embedPDP11=function(a,b,c,d){$a(!1);return Ol("pdp11",a,b,c,d)};
window.commandMachine=function(a,b,c,d,e,f){if("script"==e){d=!1;c+=".machine";if(!f)delete sb[c],d=!0;else if("string"==typeof f&&!sb[c]){d=!0;e=sb;for(var g=c,k=f.length,l=[],m=[],n="",r=null,t=0;t<k;t++){var q=f[t];if('"'==q||"'"==q)r&&q!=r?n+=q:(r?r=null:r=q,n&&(m.push(n),n=""));else{if(!r){if("\r"==q||"\n"==q)q=";";if(" "==q||"\t"==q||";"==q){n&&(m.push(n),n="");";"==q&&m.length&&(l.push(m),m=[]);continue}}n+=q}}n&&m.push(n);m.length&&l.push(m);e[g]=l;rb(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(g=qb(d,c+".machine"))&&(k=g.exports)&&(k=k[e]))return k.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};window.enableEvents=$a;window.sendEvent=bb;})();//# sourceMappingURL=/versions/pdpjs/1.36.0/pdp11-dbg.map
