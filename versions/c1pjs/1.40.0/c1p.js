(function(){/*
 http://pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/panel.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/cpu.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/rom.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/ram.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/keyboard.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/video.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/serial.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/disk.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/debugger.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/c1pjs/lib/computer.js (C) Jeff Parsons 2012-2017
*/
var e,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={cb:!0},ea={};try{ea.__proto__=da;ca=ea.cb;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;
function p(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.ge=b.prototype}
for(var ha="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},t="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,u=["Math","trunc"],ia=0;ia<u.length-1;ia++){var ja=u[ia];ja in t||(t[ja]={});t=t[ja]}var ka=u[u.length-1],la=t[ka],ma=la?la:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b};
ma!=la&&null!=ma&&ha(t,ka,{configurable:!0,writable:!0,value:ma});function v(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);c=c?"0x":"";var d=void 0===d?0:d;var f="";isNaN(a)?a=null:null!=a&&(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(16,b)),a>=Math.pow(16,b)&&(b=Math.ceil(Math.log(a)/Math.log(16))));for(var g=d||-1;0<b--;){g||(f=","+f,g=d);if(null==a)f="?"+f;else{var h=a%16;h+=0<=h&&9>=h?48:55;f=String.fromCharCode(h)+f;a=Math.trunc(a/16)}g--}return(void 0===c?"":c)+f}
function na(a){var b=a,c=a.lastIndexOf("/");0<=c&&(b=a.substr(c+1));c=b.indexOf("&");0<c&&(b=b.substr(0,c));return b}function oa(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function pa(a){return a.replace(/[&<>"']/g,function(a){return qa[a]})}var qa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},ra=Date.now||function(){return+new Date};
function w(a,b){var c=!0;c=void 0===c?!1:c;var d=0,f=null;if("object"==typeof resources&&(f=resources[a]))b&&b(a,f,d);else if(c&&"function"==typeof resources)resources(a,function(c,d){b&&b(a,c,d)});else{var g=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(g.onreadystatechange=function(){4===g.readyState&&(f=g.responseText,200==g.status||!g.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(d=g.status||-1),b&&b(a,f,d))});g.open("GET",
a,c);g.send();c||(f=g.responseText,200!=g.status&&(d=g.status||-1),b&&b(a,f,d))}}function x(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function sa(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function y(a){z.init.push(a)}
function A(a){if(B)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){C(""+("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks."))}}function D(a){!B&&a?(B=!0,ta&&ua("init"),va&&ua("show")):B=a}function ua(a){z[a]&&A(z[a])}var E=null,z={init:[],show:[],exit:[]},ta=!1,va=!1,B=!0;sa("onload",function(){ta=!0;A(z.init)});sa("onpageshow",function(){va=!0;A(z.show)});sa(x("iOS")?"onpagehide":x("Opera")?"onunload":"onbeforeunload",function(){A(z.exit)});
function F(a,b){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.exports={};this.A=this.bindings={};a=this.id.indexOf(".");0>a||(this.ya=this.id.substr(0,a));this.u={ready:!1,qa:!1,ta:!1,fe:!1,I:!1,de:!1,error:!1};this.sa=null;this.u.error=!1;this.G=this.J=null;G.push(this)}function C(a){window&&window.alert(a)}function wa(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function H(a,b){b=I(b.parentNode,"c1pjs-control");for(var c=0;c<b.length;c++)for(var d=b[c].childNodes,f=0;f<d.length;f++){var g=d[f];if(1===g.nodeType){var h=g.getAttribute("class");if(h)for(var k=h.split(" "),l=0;l<k.length;l++)switch(h=k[l],h){case "c1pjs-binding":(h=J(g))&&h.binding&&a.L(h.type,h.binding,g,h.value),l=k.length}}}}function K(a,b){if(void 0!==a){var c;b&&0<(c=b.indexOf("."))&&(a=b.substr(0,c+1)+a);for(c=0;c<G.length;c++)if(G[c].id===a)return G[c]}return null}
function xa(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<G.length;d++)if(c)c==G[d]&&(c=null);else if(!(a!=G[d].type||b&&G[d].id.indexOf(b)))return G[d]}return null}function J(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){C(c.message+" ("+a+")")}return b}
function I(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var f=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)f.test(a[b].className)&&c.push(a[b]);return c}
function ya(a){for(var b=!0,c=L[a];c&&c.length;){var d=c.splice(0,1)[0],f=d[0],g=null;0<=za.indexOf(f)&&(g=function(){return function(){ya(a)}}());var h=Aa[f];if(h)if(!g)b=h(d[1],d[2],d[3]);else{if(!h(g,d[1],d[2],d[3]))break}else{b=!1;var k=xa(d[1],a);if(k)if(h=Ba[f])b=h(k,d[2],d[3]);else{var l=k.exports;if(l&&(h=l[f]))if(b=!0,!g)b=h.call(k,d[2],d[3]);else if(!h.call(k,g,d[2],d[3]))break}}if(!b){C("Script error: '"+f+(h?" failed":" unrecognized"));break}}c&&!c.length&&delete L[a];return b}e=F.prototype;
e.toString=function(){return this.name?this.name:this.id||this.type};
e.L=function(a,b,c){switch(b){case "clear":return this.A[b]||(this.A[b]=c,c.onclick=function(a){return function(){a.A.print&&(a.A.print.value="")}}(this)),!0;case "print":return this.A[b]||(this.A[b]=c,this.ra=function(a){this.F(a,this.type);return!0},c.value="",this.print=function(a){return function(b){wa(a,b)}}(c),this.F=function(a,b){return function(a,c){a||(a="");if(c!=Ca||"..."!=a.slice(-3))c&&(a=c+": "+a),wa(b,a+"\n");else{c=b.value;var d=c.lastIndexOf(a);0>d?c+=a+"\n":c=c.substr(0,d)+(a+".")+
c.substr(d+a.length);8192<c.length&&(c=c.substr(c.length-4096));b.value=c;b.scrollTop=b.scrollHeight}}}(this,c)),!0;default:return!1}};e.log=function(){};e.print=function(){};e.F=function(){};e.status=function(a){this.F(this.type+": "+a)};e.ra=function(a,b,c){if(!b){var d=xa("Computer",this.id);if(d&&d.u.de)return console.log("ignoring notice during unload: "+a),!1}c=c||this.type;b||C((c?c+": ":"")+a);return!0};function Da(a,b){a.u.error=!0;a.ra(b)}
function Ea(a,b){b&&(a.u.ready?b():a.sa=b);return a.u.ready}e.R=function(a){this.u.error||(this.u.ready=!1!==a,this.u.ready&&(a=this.sa,this.sa=null,a&&a()))};function Fa(a,b){if(a.u.ta)return a.u.qa=!1,a.u.ta=!1;if(a.u.error)return a.F(a.toString()+" error"),!1;a.u.qa=b;return a.u.qa}var Ca="progress";window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var M=window?window.PCjs.Machines:{},G=window?window.PCjs.Components:[],L=window?window.PCjs.Commands:{},za=["hold","sleep","wait"],Aa={alert:function(a){C(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},Ba={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});function Ga(a){F.call(this,"C1PPanel",a);this.u.I=!1}p(Ga,F);
Ga.prototype.L=function(a,b,c,d){return this.J&&this.J.L(a,b,c,d)||this.G&&this.G.L(a,b,c,d)||this.b&&this.b.L(a,b,c,d)?!0:F.prototype.L.call(this,a,b,c,d)};Ga.prototype.Z=function(a,b){a&&!this.u.I&&(this.u.I=!0,this.J=b,this.G=N(b,"cpu"),this.b=N(b,"keyboard"),Ha())};function Ha(){for(var a=!1,b=I(document,"c1pjs","panel"),c=0;c<b.length;c++){var d=b[c],f=J(d),g=K(f.id);g||(a=!0,g=new Ga(f));H(g,d);a&&g.R()}}y(Ha);
function Ia(a){F.call(this,"C1PCPU",a);Ja(this);this.u.I=!1;this.u.Y=!1;this.xa=a.autoStart;this.K=this.ja=0;this.ua=30;this.na=5;this.ea=8;this.wa=["Slow","Fast","Max"];this.gb=["(1Mhz)","(up to "+this.ea+"Mhz)","(unlimited)"];this.S=[];this.M=[];this.ka=65536;this.la=0;this.ca=65536;this.da=0;this.v=[this.Mb,this.ed,this.Xd,this.l,this.l,this.gd,this.Cb,this.l,this.kd,this.dd,this.Bb,this.l,this.l,this.ad,this.zb,this.l,this.Lb,this.fd,this.l,this.l,this.l,this.hd,this.Db,this.l,this.Pb,this.cd,
this.l,this.l,this.l,this.bd,this.Ab,this.l,this.Cc,this.vb,this.l,this.l,this.Ib,this.xb,this.qd,this.l,this.md,this.ub,this.pd,this.l,this.Hb,this.rb,this.nd,this.l,this.Jb,this.wb,this.l,this.l,this.l,this.yb,this.rd,this.l,this.Hd,this.tb,this.l,this.l,this.l,this.sb,this.od,this.l,this.xd,this.qc,this.l,this.l,this.l,this.sc,this.Yc,this.l,this.jd,this.pc,this.Xc,this.l,this.Bc,this.mc,this.Vc,this.l,this.Nb,this.rc,this.l,this.l,this.l,this.tc,this.Zc,this.l,this.Rb,this.oc,this.l,this.l,this.l,
this.nc,this.Wc,this.l,this.yd,this.Ia,this.l,this.l,this.l,this.Ka,this.vd,this.l,this.ld,this.Ha,this.ud,this.l,this.Ac,this.Ea,this.sd,this.l,this.Ob,this.Ja,this.l,this.l,this.l,this.La,this.wd,this.l,this.Jd,this.Ga,this.l,this.l,this.l,this.Fa,this.td,this.l,this.l,this.Nd,this.l,this.l,this.Vd,this.Pd,this.Sd,this.l,this.lc,this.l,this.ae,this.l,this.Ud,this.Kd,this.Rd,this.l,this.Eb,this.Od,this.l,this.l,this.Wd,this.Qd,this.Td,this.l,this.ce,this.Md,this.be,this.l,this.l,this.Ld,this.l,this.l,
this.Sc,this.Hc,this.Nc,this.l,this.Tc,this.Jc,this.Oc,this.l,this.Zd,this.Gc,this.Yd,this.l,this.Qc,this.Dc,this.Lc,this.l,this.Fb,this.Ic,this.l,this.l,this.Uc,this.Kc,this.Pc,this.l,this.Sb,this.Fc,this.$d,this.l,this.Rc,this.Ec,this.Mc,this.l,this.ec,this.Xb,this.l,this.l,this.fc,this.Zb,this.ic,this.l,this.zc,this.Wb,this.kc,this.l,this.dc,this.Tb,this.gc,this.l,this.Kb,this.Yb,this.l,this.l,this.l,this.$b,this.jc,this.l,this.Qb,this.Vb,this.l,this.l,this.l,this.Ub,this.hc,this.l,this.bc,this.Qa,
this.l,this.l,this.cc,this.Sa,this.wc,this.l,this.yc,this.Pa,this.$c,this.l,this.ac,this.Ma,this.uc,this.l,this.Gb,this.Ra,this.l,this.l,this.l,this.Ta,this.xc,this.l,this.Id,this.Oa,this.l,this.l,this.l,this.Na,this.vc,this.l];this.fb=[7,6,0,0,0,3,5,0,3,2,2,0,0,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,3,6,0,0,3,3,5,0,4,2,2,0,4,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,6,6,0,0,0,3,5,0,3,2,2,0,3,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,6,6,0,0,0,3,5,0,4,2,2,0,5,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,0,6,0,0,
3,3,3,0,2,0,2,0,4,4,4,0,2,5,0,0,4,4,4,0,2,4,2,0,0,4,0,0,2,6,2,0,3,3,3,0,2,2,2,0,4,4,4,0,2,5,0,0,4,4,4,0,2,4,2,0,4,4,4,0,2,6,0,0,3,3,5,0,2,2,2,0,4,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,2,6,0,0,3,3,5,0,2,2,2,0,4,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0]}p(Ia,F);e=Ia.prototype;e.reset=function(a){this.u.Y&&O(this);Ja(this);this.f=this.a[65532]|this.a[65533]<<8;this.u.error=!1;a&&(!0===this.xa||null===this.xa&&void 0===this.A.run)&&Ka(this)};
e.L=function(a,b,c){a=!1;switch(b){case "run":this.A[b]=c;c.onclick=function(a){return function(){a.u.Y?O(a):Ka(a)}}(this);a=!0;break;case "A":case "X":case "Y":case "S":case "PC":case "C":case "Z":case "I":case "D":case "B":case "V":case "N":case "speed":this.A[b]=c;a=!0;break;case "setSpeed":this.A[b]=c,c.onclick=function(a){return function(){La(a,2<=a.K?a.ja:a.K+1,!0)}}(this),a=!0}return a};e.X=function(a,b){this.a=a;(this.Ca=b)?C("unsupported CPU address buffer offset ("+this.Ca+")"):this.R()};
e.Z=function(a,b){if(a&&!this.u.I){this.J=b;if(a=N(b,"video"))this.va=function(a){return function(){Ma(a)}}(a),this.ba=function(a){return function(){a.ba()}}(a);this.u.I=!0;this.reset(!0);this.update()}};function Na(a,b,c,d,f){0>Oa(a.S,b,c,d,f)&&(a.ka>b&&(a.ka=b),a.la<c&&(a.la=c),a.S.push([b,c,d,f]))}function P(a,b,c,d,f){0>Oa(a.M,b,c,d,f)&&(a.ca>b&&(a.ca=b),a.da<c&&(a.da=c),a.M.push([b,c,d,f]))}
function Oa(a,b,c,d,f){for(var g=0;g<a.length;g++)if(a[g][0]==b&&a[g][1]==c&&a[g][2]==d&&a[g][3]==f)return g;return-1}function La(a,b,c){void 0!==b&&(a.K=b,a.A.setSpeed&&(a.A.setSpeed.innerHTML=a.wa[2<=b?0:b+1]),a.F("running at "+a.wa[b].toLowerCase()+" speed "+a.gb[b]),c&&a.ba());a.U=0;a.za=ra();Pa(a)}e.va=function(){};e.ba=function(){};function Q(a,b,c,d){void 0!==a.A[b]&&(void 0===d&&(d=1),c="0000"+c.toString(16),a.A[b].innerHTML=c.slice(c.length-d).toUpperCase())}
function Qa(a){Q(a,"A",a.g,2);Q(a,"X",a.m,2);Q(a,"Y",a.o,2);var b=Ra(a);Q(a,"C",b&1?1:0);Q(a,"Z",b&2?1:0);Q(a,"I",b&4?1:0);Q(a,"D",b&8?1:0);Q(a,"B",b&16?1:0);Q(a,"V",b&64?1:0);Q(a,"N",b&128?1:0);Q(a,"S",a.s,4);Q(a,"PC",a.f,4);a.A.speed&&a.N&&(a.A.speed.innerHTML=a.N.toFixed(1)+"Mhz")}
function Pa(a,b){var c=30;c<a.ua&&(c=a.ua);c<a.na&&(c=a.na);var d=1;b&&a.K>a.ja&&a.N&&(d=a.N);d>a.ea&&2>a.K&&(d=a.ea);a.hb=Math.round(1E3/30);a.fa=Math.floor(1E6/c*d);a.ia=Math.floor(1E6/30*d);a.Ba=Math.floor(1E6/a.ua*d);a.Aa=Math.floor(1E6/a.na*d);b||(a.T=a.ia,a.W=a.Ba,a.V=a.Aa);a.ma=0}function Sa(a){1E6<=a.ma&&Pa(a,!0);a.aa=0;a.ib=ra()}
function Ta(a){var b=ra(),c=a.hb;a.aa&&(c=Math.round(c*a.aa/a.ia));c-=b-a.ib;if(b-=a.za)a.N=Math.round(a.U/(100*b))/10,864E5<=b&&La(a);0>c?c=0:1==a.K?a.N<=a.ea&&(c=0):2==a.K&&(c=0);a.ma+=a.aa;return c}
function Ka(a){if(Fa(a,!0)){a.u.Y||(La(a),a.J&&a.J.start(),a.u.Y=!0,a.A.run&&(a.A.run.innerHTML="Halt"),a.ba());Sa(a);try{do{Ua(a,a.fa);var b=a.O-a.H;a.U+=b;a.aa+=b;a.O=a.H=0;a.W-=a.fa;0>=a.W&&(a.W+=a.Ba,a.va());a.V-=a.fa;0>=a.V&&(a.V+=a.Aa,Qa(a));a.T-=a.fa;if(0>=a.T){a.T+=a.ia;break}}while(a.u.Y)}catch(c){O(a);a.update();Fa(a,!1);Da(a,c.stack||c.message);return}setTimeout(function(a){return function(){Ka(a)}}(a),Ta(a))}else a.update(),a.J&&a.J.stop(a.za,a.U)}
function Ua(a,b){a.b=a.j=-1;a.O=a.H=b;do{b=a.a[a.f];a.f++;a.v[b].call(a);if(0<=a.b){if(a.b>=a.ka&&a.b<=a.la)for(var c=a,d=a.b,f=a.f,g=0;g<c.S.length;g++)d>=c.S[g][0]&&d<=c.S[g][1]&&c.S[g][3].call(c.S[g][2],d,f);a.b=-1}else if(0<=a.j){if(a.j>=a.ca&&a.j<=a.da)for(c=a,d=a.j,f=a.f,g=0;g<c.M.length;g++)d>=c.M[g][0]&&d<=c.M[g][1]&&c.M[g][3].call(c.M[g][2],d,f);a.j=-1}a.H-=a.fb[b]}while(0<a.H)}function O(a){a.u.qa&&(a.u.ta=!0);a.O-=a.H;a.H=0;a.u.Y&&(a.u.Y=!1,a.A.run&&(a.A.run.innerHTML="Run"))}
e.update=function(){this.va();Qa(this)};function Va(a){return a.u.Y?a.U+a.O-a.H:0}function Ra(a){var b=a.c&256?1:0;b|=a.i&255?0:2;b|=(a.w&255^a.D^a.w>>1)&128?64:0;b|=a.h&128?128:0;return a.B&60|b}function R(a,b,c){var d=a.c&256?1:0,f=(b&15)+(c&15)+d;10<=f&&(f=f+6&15|16);f+=(b&240)+(c&240);a.D=b^c;a.w=f;a.h=f&255;160<=f&&(f+=96);512<=f&&(f-=256);a.c=f;a.i=b+c+d&255;a.H--;return f&255}
function S(a,b,c){var d=a.c&256?0:1,f=(b&15)-(c&15)-d;0>f&&(f=(f-6&15)-16);f+=(b&240)-(c&240);0>f&&(f-=96);a.h=a.i=(a.c=b-c-d)&255;a.D=b^c;a.w=a.c;a.c^=256;a.H--;return f&255}function Ja(a){a.g=0;a.m=0;a.o=0;a.s=256;a.B=0;a.h=0;a.i=0;a.D=0;a.w=0;a.c=0;a.f=0;a.b=-1;a.j=-1;a.N=0;a.U=a.O=a.H=0}
e.Mb=function(){this.f++;this.a[this.s--]=this.f>>8;this.s|=256;this.a[this.s--]=this.f&255;this.s|=256;this.B|=16;this.B=Ra(this);this.a[this.s--]=this.B;this.s|=256;this.B&=239;this.b=65534;this.f=this.a[this.b]|this.a[this.b+1]<<8};e.ed=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.h=this.i=this.g|=this.a[this.b]};e.gd=function(){this.b=this.a[this.f++];this.h=this.i=this.g|=this.a[this.b]};
e.Cb=function(){this.j=this.a[this.f++];this.c=this.a[this.j]<<1;this.h=this.i=this.a[this.j]=this.c&255};e.kd=function(){this.B=Ra(this);this.a[this.s--]=this.B;this.s|=256};e.dd=function(){this.b=this.f++;this.h=this.i=this.g|=this.a[this.b]};e.Bb=function(){this.c=this.g<<1;this.h=this.i=this.g=this.c&255};e.ad=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.g|=this.a[this.b]};
e.zb=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.c=this.a[this.j]<<1;this.h=this.i=this.a[this.j]=this.c&255};e.Lb=function(){this.f+=(this.h&128?0:(this.H--,this.a[this.f]<<24>>24))+1};e.fd=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.h=this.i=this.g|=this.a[this.b]};e.hd=function(){this.b=this.a[this.f++]+this.m&255;this.h=this.i=this.g|=this.a[this.b]};
e.Db=function(){this.j=this.a[this.f++]+this.m&255;this.c=this.a[this.j]<<1;this.h=this.i=this.a[this.j]=this.c&255};e.Pb=function(){this.c=0};e.cd=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.h=this.i=this.g|=this.a[this.b]};e.bd=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.h=this.i=this.g|=this.a[this.b]};e.Ab=function(){this.j=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.c=this.a[this.j]<<1;this.h=this.i=this.a[this.j]=this.c&255};
e.Cc=function(){this.b=this.f++;this.a[this.s--]=this.f>>8;this.s|=256;this.a[this.s--]=this.f&255;this.s|=256;this.f=this.a[this.b]|this.a[this.b+1]<<8};e.vb=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.h=this.i=this.g&=this.a[this.b]};e.Ib=function(){this.b=this.a[this.f++];this.i=this.g&this.a[this.b];this.h=this.h&127|this.a[this.b]&128;this.w=0;this.D=this.a[this.b]&64?128:0};e.xb=function(){this.b=this.a[this.f++];this.h=this.i=this.g&=this.a[this.b]};
e.qd=function(){this.j=this.a[this.f++];this.c=this.c&65280|this.a[this.j];this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.h=this.i=this.a[this.j]=this.c&255};e.md=function(){this.s=this.s+1&255|256;this.B=this.a[this.s];this.c=this.B&1?256:0;this.i=this.B&2?0:1;this.h=this.B&128;this.w=0;this.D=this.B&64?128:0};e.ub=function(){this.b=this.f++;this.h=this.i=this.g&=this.a[this.b]};
e.pd=function(){this.c=this.c&65280|this.g;this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.h=this.i=this.g=this.c&255};e.Hb=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.i=this.g&this.a[this.b];this.h=this.h&127|this.a[this.b]&128;this.w=0;this.D=this.a[this.b]&64?128:0};e.rb=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.g&=this.a[this.b]};
e.nd=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.c=this.c&65280|this.a[this.j];this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.h=this.i=this.a[this.j]=this.c&255};e.Jb=function(){this.f+=(this.h&128?(this.H--,this.a[this.f]<<24>>24):0)+1};e.wb=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.h=this.i=this.g&=this.a[this.b]};e.yb=function(){this.b=this.a[this.f++]+this.m&255;this.h=this.i=this.g&=this.a[this.b]};
e.rd=function(){this.j=this.a[this.f++]+this.m&255;this.c=this.c&65280|this.a[this.j];this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.h=this.i=this.a[this.j]=this.c&255};e.Hd=function(){this.c=256};e.tb=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.h=this.i=this.g&=this.a[this.b]};e.sb=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.h=this.i=this.g&=this.a[this.b]};
e.od=function(){this.j=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.c=this.c&65280|this.a[this.j];this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.h=this.i=this.a[this.j]=this.c&255};e.xd=function(){this.s=this.s+1&255|256;this.B=this.a[this.s];this.c=this.B&1?256:0;this.i=this.B&2?0:1;this.h=this.B&128;this.w=0;this.D=this.B&64?128:0;this.s=this.s+2&255|256;this.f=this.a[this.s-1|256]|this.a[this.s]<<8};
e.qc=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.h=this.i=this.g^=this.a[this.b]};e.sc=function(){this.b=this.a[this.f++];this.h=this.i=this.g^=this.a[this.b]};e.Yc=function(){this.j=this.a[this.f++];this.c=this.c&65279|(this.a[this.j]&1?256:0);this.a[this.j]=(this.c=this.c&65280|this.a[this.j]>>1)&255;this.h=this.i=this.c&255};e.jd=function(){this.a[this.s--]=this.g;this.s|=256};e.pc=function(){this.b=this.f++;this.h=this.i=this.g^=this.a[this.b]};
e.Xc=function(){this.c=this.c&65279|(this.g&1?256:0);this.g=(this.c=this.c&65280|this.g>>1)&255;this.h=this.i=this.c&255};e.Bc=function(){this.b=this.f;this.f=this.a[this.b]|this.a[this.b+1]<<8};e.mc=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.g^=this.a[this.b]};e.Vc=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.c=this.c&65279|(this.a[this.j]&1?256:0);this.a[this.j]=(this.c=this.c&65280|this.a[this.j]>>1)&255;this.h=this.i=this.c&255};
e.Nb=function(){this.f+=((this.w&255^this.D^this.w>>1)&128?0:(this.H--,this.a[this.f]<<24>>24))+1};e.rc=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.h=this.i=this.g^=this.a[this.b]};e.tc=function(){this.b=this.a[this.f++]+this.m&255;this.h=this.i=this.g^=this.a[this.b]};e.Zc=function(){this.j=this.a[this.f++]+this.m&255;this.c=this.c&65279|(this.a[this.j]&1?256:0);this.a[this.j]=(this.c=this.c&65280|this.a[this.j]>>1)&255;this.h=this.i=this.c&255};
e.Rb=function(){this.B&=251};e.oc=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.h=this.i=this.g^=this.a[this.b]};e.nc=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.h=this.i=this.g^=this.a[this.b]};e.Wc=function(){this.j=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.c=this.c&65279|(this.a[this.j]&1?256:0);this.a[this.j]=(this.c=this.c&65280|this.a[this.j]>>1)&255;this.h=this.i=this.c&255};
e.yd=function(){this.s=this.s+2&255|256;this.f=(this.a[this.s-1|256]|this.a[this.s]<<8)+1};e.Ia=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.c=this.g+this.a[this.b]+(this.c&256?1:0);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255};e.nb=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.g=R(this,this.g,this.a[this.b])};
e.Ka=function(){this.b=this.a[this.f++];this.c=this.g+this.a[this.b]+(this.c&256?1:0);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255};e.pb=function(){this.b=this.a[this.f++];this.g=R(this,this.g,this.a[this.b])};e.vd=function(){this.j=this.a[this.f++];this.c=this.c&65280|this.a[this.j];this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.h=this.i=this.a[this.j]=this.c&255};e.ld=function(){this.s=this.s+1&255|256;this.h=this.i=this.g=this.a[this.s]};
e.Ha=function(){this.b=this.f++;this.c=this.g+this.a[this.b]+(this.c&256?1:0);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255};e.mb=function(){this.b=this.f++;this.g=R(this,this.g,this.a[this.b])};e.ud=function(){this.c=this.c&65280|this.g;this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.h=this.i=this.g=this.c&255};e.Ac=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.f=this.a[this.b]|this.a[this.b+1]<<8};
e.Ea=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.c=this.g+this.a[this.b]+(this.c&256?1:0);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255};e.jb=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.g=R(this,this.g,this.a[this.b])};e.sd=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.c=this.c&65280|this.a[this.j];this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.h=this.i=this.a[this.j]=this.c&255};
e.Ob=function(){this.f+=((this.w&255^this.D^this.w>>1)&128?(this.H--,this.a[this.f]<<24>>24):0)+1};e.Ja=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.c=this.g+this.a[this.b]+(this.c&256?1:0);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255};e.ob=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.g=R(this,this.g,this.a[this.b])};
e.La=function(){this.b=this.a[this.f++]+this.m&255;this.c=this.g+this.a[this.b]+(this.c&256?1:0);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255};e.qb=function(){this.b=this.a[this.f++]+this.m&255;this.g=R(this,this.g,this.a[this.b])};e.wd=function(){this.j=this.a[this.f++]+this.m&255;this.c=this.c&65280|this.a[this.j];this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.h=this.i=this.a[this.j]=this.c&255};e.Jd=function(){this.B|=4};
e.Ga=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.c=this.g+this.a[this.b]+(this.c&256?1:0);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255};e.lb=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.g=R(this,this.g,this.a[this.b])};e.Fa=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.c=this.g+this.a[this.b]+(this.c&256?1:0);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255};
e.kb=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.g=R(this,this.g,this.a[this.b])};e.td=function(){this.j=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.c=this.c&65280|this.a[this.j];this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.h=this.i=this.a[this.j]=this.c&255};e.Nd=function(){this.j=this.a[this.f++]+this.m&255;this.j=this.a[this.j]|this.a[this.j+1]<<8;this.a[this.j]=this.g};e.Vd=function(){this.j=this.a[this.f++];this.a[this.j]=this.o};
e.Pd=function(){this.j=this.a[this.f++];this.a[this.j]=this.g};e.Sd=function(){this.j=this.a[this.f++];this.a[this.j]=this.m};e.lc=function(){this.h=this.i=this.o=this.o-1&255};e.ae=function(){this.h=this.i=this.g=this.m};e.Ud=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.a[this.j]=this.o};e.Kd=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.a[this.j]=this.g};e.Rd=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.a[this.j]=this.m};
e.Eb=function(){this.f+=(this.c&256?0:(this.H--,this.a[this.f]<<24>>24))+1};e.Od=function(){this.j=this.a[this.f++];this.j=(this.a[this.j]|this.a[this.j+1]<<8)+this.o;this.a[this.j]=this.g};e.Wd=function(){this.j=this.a[this.f++]+this.m&255;this.a[this.j]=this.o};e.Qd=function(){this.j=this.a[this.f++]+this.m&255;this.a[this.j]=this.g};e.Td=function(){this.j=this.a[this.f++]+this.o&255;this.a[this.j]=this.m};e.ce=function(){this.h=this.i=this.g=this.o};
e.Md=function(){this.j=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.a[this.j]=this.g};e.be=function(){this.s=this.m|256};e.Ld=function(){this.j=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.a[this.j]=this.g};e.Sc=function(){this.b=this.f++;this.h=this.i=this.o=this.a[this.b]};e.Hc=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.h=this.i=this.g=this.a[this.b]};e.Nc=function(){this.b=this.f++;this.h=this.i=this.m=this.a[this.b]};
e.Tc=function(){this.b=this.a[this.f++];this.h=this.i=this.o=this.a[this.b]};e.Jc=function(){this.b=this.a[this.f++];this.h=this.i=this.g=this.a[this.b]};e.Oc=function(){this.b=this.a[this.f++];this.h=this.i=this.m=this.a[this.b]};e.Zd=function(){this.h=this.i=this.o=this.g};e.Gc=function(){this.b=this.f++;this.h=this.i=this.g=this.a[this.b]};e.Yd=function(){this.h=this.i=this.m=this.g};e.Qc=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.o=this.a[this.b]};
e.Dc=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.g=this.a[this.b]};e.Lc=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.m=this.a[this.b]};e.Fb=function(){this.f+=(this.c&256?(this.H--,this.a[this.f]<<24>>24):0)+1};e.Ic=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.h=this.i=this.g=this.a[this.b]};e.Uc=function(){this.b=this.a[this.f++]+this.m&255;this.h=this.i=this.o=this.a[this.b]};
e.Kc=function(){this.b=this.a[this.f++]+this.m&255;this.h=this.i=this.g=this.a[this.b]};e.Pc=function(){this.b=this.a[this.f++]+this.o&255;this.h=this.i=this.m=this.a[this.b]};e.Sb=function(){this.D=this.w=0};e.Fc=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.h=this.i=this.g=this.a[this.b]};e.$d=function(){this.h=this.i=this.m=this.s&255};e.Rc=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.h=this.i=this.o=this.a[this.b]};
e.Ec=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.h=this.i=this.g=this.a[this.b]};e.Mc=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.h=this.i=this.m=this.a[this.b]};e.ec=function(){this.b=this.f++;this.h=this.i=this.c=this.o-this.a[this.b];this.c^=256};e.Xb=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.h=this.i=this.c=this.g-this.a[this.b];this.c^=256};
e.fc=function(){this.b=this.a[this.f++];this.h=this.i=this.c=this.o-this.a[this.b];this.c^=256};e.Zb=function(){this.b=this.a[this.f++];this.h=this.i=this.c=this.g-this.a[this.b];this.c^=256};e.ic=function(){this.j=this.a[this.f++];this.h=this.i=this.a[this.j]=this.a[this.j]-1&255};e.zc=function(){this.h=this.i=this.o=this.o+1&255};e.Wb=function(){this.b=this.f++;this.h=this.i=this.c=this.g-this.a[this.b];this.c^=256};e.kc=function(){this.h=this.i=this.m=this.m-1&255};
e.dc=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.c=this.o-this.a[this.b];this.c^=256};e.Tb=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.c=this.g-this.a[this.b];this.c^=256};e.gc=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.a[this.j]=this.a[this.j]-1&255};e.Kb=function(){this.f+=(this.i&255?(this.H--,this.a[this.f]<<24>>24):0)+1};
e.Yb=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.h=this.i=this.c=this.g-this.a[this.b];this.c^=256};e.$b=function(){this.b=this.a[this.f++]+this.m&255;this.h=this.i=this.c=this.g-this.a[this.b];this.c^=256};e.jc=function(){this.j=this.a[this.f++]+this.m&255;this.h=this.i=this.a[this.j]=this.a[this.j]-1&255};
e.Qb=function(){this.B&=-9;this.v[97]=this.Ia;this.v[101]=this.Ka;this.v[105]=this.Ha;this.v[109]=this.Ea;this.v[113]=this.Ja;this.v[117]=this.La;this.v[121]=this.Ga;this.v[125]=this.Fa;this.v[225]=this.Qa;this.v[229]=this.Sa;this.v[233]=this.Pa;this.v[237]=this.Ma;this.v[241]=this.Ra;this.v[245]=this.Ta;this.v[249]=this.Oa;this.v[253]=this.Na};e.Vb=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.h=this.i=this.c=this.g-this.a[this.b];this.c^=256};
e.Ub=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.h=this.i=this.c=this.g-this.a[this.b];this.c^=256};e.hc=function(){this.j=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.h=this.i=this.a[this.j]=this.a[this.j]-1&255};e.bc=function(){this.b=this.f++;this.h=this.i=this.c=this.m-this.a[this.b];this.c^=256};
e.Qa=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.c=this.g-this.a[this.b]-(this.c&256?0:1);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255;this.c^=256};e.Dd=function(){this.b=this.a[this.f++]+this.m&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.g=S(this,this.g,this.a[this.b])};e.cc=function(){this.b=this.a[this.f++];this.h=this.i=this.c=this.m-this.a[this.b];this.c^=256};
e.Sa=function(){this.b=this.a[this.f++];this.c=this.g-this.a[this.b]-(this.c&256?0:1);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255;this.c^=256};e.Fd=function(){this.b=this.a[this.f++];this.g=S(this,this.g,this.a[this.b])};e.wc=function(){this.j=this.a[this.f++];this.h=this.i=this.a[this.j]=this.a[this.j]+1&255};e.yc=function(){this.h=this.i=this.m=this.m+1&255};
e.Pa=function(){this.b=this.f++;this.c=this.g-this.a[this.b]-(this.c&256?0:1);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255;this.c^=256};e.Cd=function(){this.b=this.f++;this.g=S(this,this.g,this.a[this.b])};e.$c=function(){};e.ac=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.c=this.m-this.a[this.b];this.c^=256};
e.Ma=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.c=this.g-this.a[this.b]-(this.c&256?0:1);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255;this.c^=256};e.zd=function(){this.b=this.a[this.f++]|this.a[this.f++]<<8;this.g=S(this,this.g,this.a[this.b])};e.uc=function(){this.j=this.a[this.f++]|this.a[this.f++]<<8;this.h=this.i=this.a[this.j]=this.a[this.j]+1&255};e.Gb=function(){this.f+=(this.i&255?0:(this.H--,this.a[this.f]<<24>>24))+1};
e.Ra=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.c=this.g-this.a[this.b]-(this.c&256?0:1);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255;this.c^=256};e.Ed=function(){this.b=this.a[this.f++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.o;this.g=S(this,this.g,this.a[this.b])};
e.Ta=function(){this.b=this.a[this.f++]+this.m&255;this.c=this.g-this.a[this.b]-(this.c&256?0:1);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255;this.c^=256};e.Gd=function(){this.b=this.a[this.f++]+this.m&255;this.g=S(this,this.g,this.a[this.b])};e.xc=function(){this.j=this.a[this.f++]+this.m&255;this.h=this.i=this.a[this.j]=this.a[this.j]+1&255};
e.Id=function(){this.B|=8;this.v[97]=this.nb;this.v[101]=this.pb;this.v[105]=this.mb;this.v[109]=this.jb;this.v[113]=this.ob;this.v[117]=this.qb;this.v[121]=this.lb;this.v[125]=this.kb;this.v[225]=this.Dd;this.v[229]=this.Fd;this.v[233]=this.Cd;this.v[237]=this.zd;this.v[241]=this.Ed;this.v[245]=this.Gd;this.v[249]=this.Bd;this.v[253]=this.Ad};
e.Oa=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.c=this.g-this.a[this.b]-(this.c&256?0:1);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255;this.c^=256};e.Bd=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.o;this.g=S(this,this.g,this.a[this.b])};
e.Na=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.c=this.g-this.a[this.b]-(this.c&256?0:1);this.D=this.g^this.a[this.b];this.w=this.c;this.h=this.i=this.g=this.c&255;this.c^=256};e.Ad=function(){this.b=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.g=S(this,this.g,this.a[this.b])};e.vc=function(){this.j=(this.a[this.f++]|this.a[this.f++]<<8)+this.m;this.h=this.i=this.a[this.j]=this.a[this.j]+1&255};
e.Xd=function(){var a=this.a[this.f++];switch(a){case 0:this.F("HALT");O(this);break;case 1:a=this.f;for(var b="";a<this.a.length;){var c=this.a[a++];if(!c)break;b+=String.fromCharCode(c)}this.f=a;b=b.replace(/%A/g,v(this.g,2)).replace(/%X/g,v(this.m,2)).replace(/%Y/g,v(this.o,2));this.F(b);this.T=0;this.O-=this.H;this.H=0;break;default:this.f-=2,this.F("undefined opSim: "+v(a,2,!0)+" at "+v(this.f,4,!0)),O(this)}};
e.l=function(){var a=this.a[--this.f];this.F("undefined opcode: "+v(a,2,!0)+" at "+v(this.f,4,!0));O(this)};y(function(){for(var a=I(document,"c1pjs","cpu"),b=0;b<a.length;b++){var c=a[b],d=J(c);d=new Ia(d);H(d,c)}});
function T(a){F.call(this,"C1PROM",a);this.b=this.a=null;this.c=a.size;if(this.f=a.image){a=this.f;var b=oa(this.f);"json"!=b&&"hex"!=b&&(a="http://"+(window?window.location.host:"www.pcjs.org")+"/api/v1/dump?file="+this.f+"&format=bytes");var c=this;w(a,function(a,b,g){Wa(c,a,b,g)})}}p(T,F);
T.prototype.X=function(a,b,c,d){this.a=a;this.g=b;a=c-b+1;this.c||(this.c=a);a!=this.c?Da(this,"computer-specified ROM size ("+v(a,4,!0)+") does not match component-specified size ("+v(this.c,4,!0)+")"):(d&&(this.G=d,P(d,b,c,this,this.h)),Xa(this))};T.prototype.Z=function(a){a&&!this.u.I&&(this.u.I=!0)};T.prototype.h=function(a,b){void 0!==b&&(a-=this.g,this.a[this.g+a]=this.b?this.b[a]:0)};
function Wa(a,b,c,d){if(d)a.F('Error loading ROM "'+b+'" ('+d+")");else{if("["==c.charAt(0)||"{"==c.charAt(0))try{var f=eval("("+c+")"),g=f.bytes;g?a.b=g:a.b=f}catch(h){a.F('Error processing ROM "'+b+'": '+h.message);return}else for(b=c.replace(/\n/gm," ").replace(/ +$/,"").split(" "),a.b=Array(b.length),c=0;c<b.length;c++)a.b[c]=parseInt(b[c],16);Xa(a)}}
function Xa(a){if(!Ea(a))if(!a.f)a.R();else if(a.b&&a.a){var b=a.b.length;if(b!=a.c)Da(a,"ROM image size ("+v(b,4,!0)+") does not match component-specified size ("+v(a.c,4,!0)+")");else{for(var c=0;c<b;c++)a.a[a.g+c]=a.b[c];a.R()}}}y(function(){for(var a=I(document,"c1pjs","rom"),b=0;b<a.length;b++){var c=a[b],d=J(c);d=new T(d);H(d,c)}});function Ya(a){F.call(this,"C1PRAM",a)}p(Ya,F);Ya.prototype.X=function(a){this.a=a;this.R()};
y(function(){for(var a=I(document,"c1pjs","ram"),b=0;b<a.length;b++){var c=a[b],d=J(c);d=new Ya(d);H(d,c)}});
function Za(a){F.call(this,"C1PKeyboard",a);this.u.I=!1;this.aa=a.model;this.K=8;this.la=10;this.ka=13;this.M=27;this.fa=this.K;this.ja=this.la;this.ca=this.ka;this.H=this.M;this.s=241;this.D=224;this.da=3;this.ea=15;this.o=1;this.j={};this.j["break"]=this.D;this.j.esc=this.H;this.j["ctrl-c"]=this.da;this.j["ctrl-o"]=this.ea;this.b=[];this.b[49]=30464;this.b[33]=30704;this.b[50]=30208;this.b[34]=30448;this.b[51]=29952;this.b[35]=30192;this.b[52]=29696;this.b[36]=29936;this.b[53]=29440;this.b[37]=
29680;this.b[54]=29184;this.b[38]=29424;this.b[55]=28928;this.b[39]=29168;this.b[56]=26368;this.b[40]=26608;this.b[57]=26112;this.b[41]=26352;this.b[48]=25856;this.b[58]=25600;this.b[42]=25840;this.b[45]=25344;this.b[61]=25584;this.b[46]=22272;this.b[62]=22512;this.b[108]=22016;this.b[76]=22256;this.b[92]=22256;this.b[111]=21760;this.b[79]=22E3;this.b[this.fa]=22E3;this.b[this.ja]=21504;this.b[this.ca]=21248;this.b[119]=18176;this.b[87]=18416;this.b[101]=17920;this.b[69]=18160;this.b[114]=17664;this.b[82]=
17904;this.b[116]=17408;this.b[84]=17648;this.b[121]=17152;this.b[89]=17392;this.b[117]=16896;this.b[85]=17136;this.b[105]=16640;this.b[73]=16880;this.b[115]=14080;this.b[83]=14320;this.b[100]=13824;this.b[68]=14064;this.b[102]=13568;this.b[70]=13808;this.b[103]=13312;this.b[71]=13552;this.b[104]=13056;this.b[72]=13296;this.b[106]=12800;this.b[74]=13040;this.b[107]=12544;this.b[75]=12784;this.b[91]=12784;this.b[120]=9984;this.b[88]=10224;this.b[99]=9728;this.b[67]=9968;this.b[118]=9472;this.b[86]=
9712;this.b[98]=9216;this.b[66]=9456;this.b[110]=8960;this.b[78]=9200;this.b[94]=9200;this.b[109]=8704;this.b[77]=8944;this.b[93]=8944;this.b[44]=8448;this.b[60]=8688;this.b[113]=5888;this.b[81]=6128;this.b[97]=5632;this.b[65]=5872;this.b[122]=5376;this.b[90]=5616;this.b[32]=5120;this.b[47]=4864;this.b[63]=5104;this.b[59]=4608;this.b[43]=4848;this.b[112]=4352;this.b[80]=4592;this.b[64]=4592;this.b[this.s]=1536;this.b[this.H]=1280;this.b[240]=512;this.b[242]=256;this.b[244]=0;this.reset()}p(Za,F);
e=Za.prototype;e.reset=function(){this.oa(this.aa);this.c=this.o;this.O=0;this.f=[this.o,0,0,0,0,0,0,0];this.v=[];if(this.g)for(var a in this.g)isNaN(+a)||this.g[a]&&clearTimeout(this.g[a]);this.g=[];this.W=this.h=0;this.S=-1;this.N=this.f;this.U=this.B=0;this.i=""};
e.L=function(a,b,c){if(void 0===this.A[b])switch(b){case "keyDown":return this.A[b]=c,c.onkeydown=function(a){return function(b){return $a(a,b,!0)}}(this),!0;case "keyPress":return this.A[b]=c,c.onkeypress=function(a){return function(b){var c=!0;b=b||window.event;b=b.which||b.keyCode;a.i="";a.c&8?a.c&=-9:c=!ab(a,b);return c}}(this),!0;case "keyUp":return this.A[b]=c,c.onkeyup=function(a){return function(b){return $a(a,b,!1)}}(this),!0;case "break":return this.A[b]=c,c.onclick=function(a){return function(){a.J&&
a.J.reset(!0)}}(this),!0;default:if(void 0!==this.j[b])return this.A[b]=c,c.onclick=function(a,b,c){return function(){a.G&&a.G.ba();return!ab(a,c)}}(this,b,this.j[b]),!0}return!1};e.X=function(a,b,c,d){this.a=a;this.V=b;this.ia=c-b+1;this.na=this.V+this.ia;d&&(this.G=d,P(d,b,c,this,this.Ya));this.R()};e.oa=function(a){this.m=a;this.w=255;600!=this.m&&(this.w=0,this.F("updated keyboard model: "+this.m))};e.Z=function(a,b){a&&!this.u.I&&(this.u.I=!0,this.J=b)};
e.R=function(){this.T=(this.ma=x("iOS"))||x("Android");F.prototype.R.call(this)};function bb(a,b){b=b?100:250;a.G&&a.G.N&&(b/=a.G.N);return b}function cb(a,b){!a.h||void 0!==b&&b==a.h||(clearTimeout(a.g[a.h]),V(a,a.h,!1,4))}function W(a,b,c){a.i=b;db(a,c||300)}function db(a,b){if(0<a.i.length){var c=a.i.charCodeAt(0);10==c&&(c=13);65<=c&&90>=c&&(c+=32);a.i=a.i.substr(1);ab(a,c)}0<a.i.length&&setTimeout(function(a){return function(){db(a,b)}}(a),b)}
function $a(a,b,c){var d=!c;b=b.keyCode;c&&(a.W=b);if(16==b)a.c&=-5,c&&(a.c|=4),b+=224,d=!1;else if(18==b)a.c&=-3,c&&(a.c|=2),b+=224,d=!1;else if(b==a.s-224)a.c&=-65,c&&(a.c|=64),b+=224,d=!1;else if(20==b)c=!c,a.c&=~a.o,c&&(a.c|=a.o),b+=224,d=!1;else if(91==b){a.c&=-9;c&&(a.c|=8);d=!1;var f=!0}else f=9==b?d=!1:b==a.M||b==a.K?c?!ab(a,b):!1:!0;d&&(a.c&=-9,a.T||b!=a.W||cb(a));void 0===f&&(f=!V(a,b,c,2));return f}
function ab(a,b){var c=!1;b==a.D?a.J&&(a.J.reset(!0),c=!0):(a.T&&65<=b&&90>=b&&(b+=32),cb(a,b),V(a,b,!0,0)&&(2==a.G.K?V(a,b,!1,1):(c=!1,a.g[b]&&(clearTimeout(a.g[b]),c=!0),c=bb(a,c),a.g[a.h=b]=setTimeout(function(a){return function(){V(a,b,!1,3)}}(a),c)),c=!0));return c}
function V(a,b,c,d){var f=!1;c||(a.g[b]=null,a.h==b&&(a.h=0));var g=0,h=a.b[b];void 0===h&&(1<=b&&26>=b&&(b+=64,g=a.s),h=a.b[b]);void 0!==h&&(b=h>>12,f=h>>8&15,g||(g=h&255),c?(a.f[b]|=1<<f,a.f[0]=g==a.s?a.f[0]|64:240==g?a.f[0]|4:242==g?a.f[0]|2:a.f[0]&-71):(a.f[b]&=~(1<<f),a.f[0]&=-71,a.f[0]|=a.c&70),c=0==d&&!a.v.length,a.v.push(a.f.slice()),eb(a,c),f=!0);return f}e.Ya=function(a){this.O=this.G.a[a]^this.w;this.B++;eb(this,!1,a)};
function eb(a,b,c){var d=Va(a.G);b||(2==a.G.K?b=void 0!==c&&32<=a.B:(b=d-a.U,b=0>b||8192<=b));b&&(b=a.v.shift(),void 0!==b&&(a.N=b),a.B=0,a.U=d);for(b=d=0;8>b;b++)a.O&1<<b&&(d|=a.N[b]);d^=a.w;if(void 0!==c)a.a[c]=d;else if(c=a.V,d!=a.S)for(;c<a.na;c++)a.a[c]=d;a.S=d}y(function(){for(var a=I(document,"c1pjs","keyboard"),b=0;b<a.length;b++){var c=a[b],d=J(c);d=new Za(d);H(d,c)}});
function fb(a,b,c,d){F.call(this,"C1PVideo",a);this.S=a.model;this.M=a.charCols;this.N=a.charRows;this.U=a.screenWidth;this.V=a.screenHeight;this.i=a.charWidth;this.j=a.charHeight;gb(this);this.h=b;this.w=c;this.f=d;var f;b=["","moz","ms","webkit"];a=a.smoothing;if(!E){c={};if(window){f||(f=window.location.search.substr(1));for(var g=/\+/g,h=/([^&=]+)=?([^&]*)/g;d=h.exec(f);)c[decodeURIComponent(d[1].replace(g," "))]=decodeURIComponent(d[2].replace(g," "))}E=c}(f=E.smoothing||E.smoothing)&&(a="true"==
f);if(null!=a)for(f=0;f<b.length;f++)if(c=(c=b[f])?c+"ImageSmoothingEnabled":"imageSmoothingEnabled",void 0!==this.w[c]){this.w[c]=a;break}}p(fb,F);e=fb.prototype;e.reset=function(a){this.oa(this.S);if(this.a)for(var b=this.s;b<this.B;b++)this.a[b]=a?Math.floor(256*Math.random()):32};e.L=function(a,b,c){switch(b){case "refresh":return this.A[b]=c,c.onclick=function(a){return function(){hb(a);Ma(a)}}(this),!0}return!1};
e.X=function(a,b,c,d){this.a=a;this.s=b;this.T=c-b+1;this.B=this.s+this.T;d&&(this.G=d,Na(d,56832,56832,this,this.ab),P(d,56832,56832,this,this.bb));this.reset(!0)};function gb(a,b,c,d,f){a.o=void 0!==b?b:a.M;a.W=void 0!==c?c:a.N;a.c=a.o*a.W;a.B=a.s+a.c;a.K=void 0!==d?d:0;a.O=void 0!==f?f:c;a.D=Math.floor(a.U/a.o);a.H=Math.floor(a.V/a.O)}e.ba=function(){this.h.focus()};
e.oa=function(a){this.m=a;600==this.m?(gb(this,this.M,this.N,3,25),1024==this.c&&this.G&&(this.g=this.B+this.c-1,P(this.G,this.g,this.g,this,this.Va))):(this.F("updated video model: "+this.m),gb(this,64,32));hb(this);Ma(this)};e.Z=function(a,b){if(a&&!this.u.I&&Ea(this)){if(this.u.I=!0,this.b=N(b,"keyboard"))this.b.L("canvas","keyDown",this.h),this.b.L("canvas","keyPress",this.h),this.b.L("canvas","keyUp",this.h)}else!a&&this.u.I&&(this.u.I=!1)};
e.R=function(){this.i||(this.i=Math.floor(this.f.width/16));this.j||(this.j=Math.floor(this.f.height/16));F.prototype.R.call(this)};e.ab=function(a){this.G.a[a]=this.G.a[a]&127|(Math.floor(Va(this.G)/8333)&1?128:0)};e.bb=function(){};
e.Va=function(a,b){if(void 0!==b){this.oa(540);this.b&&this.b.oa(542);a=this.G;b=a.M;var c=[],d=Oa(b,this.g,this.g,this,this.Va);if(0<=d){c.push(b[d][0]);c.push(b[d][1]);b.splice(d,1);var f=65536,g=0;for(d=0;d<b.length;d++)f>b[d][0]&&(f=b[d][0]),g<b[d][1]&&(g=b[d][1]);c.push(f);c.push(g)}4==c.length&&(a.ca=c[2],a.da=c[3])}};function hb(a){a.v=Array(a.c);for(var b=0;b<=a.c;b++)a.v[b]=-1}
function Ma(a){var b=0;if(a.u.I)for(;b<a.c;){var c=a.a[a.s+b];if(a.v[b]!=c){var d=Math.floor(b/a.o);if(d>=a.K&&(d-=a.K,d<a.O)){var f=c*a.i;a.w.drawImage(a.f,f%a.f.width,Math.floor(f/a.f.width)*a.j,a.i,a.j,b%a.o*a.D,d*a.H,a.D,a.H)}a.v[b]=c}b++}}
y(function(){for(var a=I(document,"c1pjs","video"),b=0;b<a.length;b++){var c=a[b],d=J(c),f=document.createElement("canvas");if(void 0===f||!f.getContext){c.innerHTML="<br/>Missing &lt;canvas&gt; support. Please try a newer web browser.";break}f.setAttribute("class","c1pjs-canvas");f.setAttribute("width",d.screenWidth);f.setAttribute("height",d.screenHeight);f.setAttribute("contenteditable","true");f.setAttribute("autocapitalize","off");f.setAttribute("autocorrect","off");f.style.backgroundColor=d.screenColor;
f.style.height="auto";0<=(window?window.navigator.userAgent:"").indexOf("MSIE")&&(f.style.height=(c.clientWidth*d.screenHeight/d.screenWidth|0)+"px",c.onresize=function(a,b,c,d){return function(){b.style.height=(a.clientWidth*d/c|0)+"px"}}(c,f,d.screenWidth,d.screenHeight));c.appendChild(f);var g=new Image,h=f.getContext("2d");f=new fb(d,f,h,g);g.onload=function(a){return function(){a.R()}}(f,d.charSet);g.src=d.charSet;H(f,c)}});
function ib(a){F.call(this,"C1PSerialPort",a);this.u.I=!1;this.j=a.demo;this.reset(!0)}p(ib,F);e=ib.prototype;e.reset=function(a){if(a||this.f!=jb){this.g=-1;this.h=0;this.c="";if(this.j){a=1;if(this.ya){var b=this.ya.match(/\d+/);null!==b&&(a=parseInt(b[0],10))}this.c='10 PRINT "HELLO OSI #'+a+'"\n'}this.i=!0;this.f=kb}};e.start=function(){this.b&&this.j&&(W(this.b," C\n\n",3E3),setTimeout(function(a){return function(){a.f=lb;W(a.b,"LOAD\n")}}(this),12E3));this.j=!1};
e.L=function(a,b,c){var d=this;switch(b){case "listSerial":return this.A[b]=c,!0;case "loadSerial":return this.A[b]=c,c.onclick=function(){d.A.listSerial&&w(d.A.listSerial.value,function(a,b,c){mb(d,a,b,c)})},!0;case "mountSerial":return!x("Mobi")&&window&&"FileReader"in window?(this.A[b]=c,c.onchange=function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length},c.onsubmit=function(a){var b=a.currentTarget[1].files[0],c=new FileReader;c.onload=function(){mb(d,b.name,c.result.toString(),
0)};c.readAsText(b);return!1}):c.parentNode.removeChild(c),!0}return!1};e.X=function(a,b,c,d){this.a=a;this.m=b;this.s=c-b+1;this.o=this.m+this.s;if(this.G=d)Na(d,b,c,this,this.Za),P(d,b,c,this,this.$a);this.R()};e.Z=function(a,b){a&&!this.u.I&&(this.u.I=!0,this.J=b,this.b=N(b,"keyboard"))};
function mb(a,b,c,d){if(c){a.h=0;a.c=c;a.i=!0;a.f=kb;if(-1!==b.indexOf(".json",b.length-5))try{d="";var f=eval("("+c+")").bytes;for(c=0;c<f.length;c++)d+=String.fromCharCode(f[c]);a.c=d;a.i=!1}catch(g){a.F('Error processing file "'+b+'": '+g.message);return}a.J&&a.b&&a.G.u.Y?(a.F("auto-loading "+b),a.G.ba(),"."!=a.c.charAt(0)?(a.f=lb,W(a.b,"NEW\nLOAD\n")):(a.f=jb,a.J.reset(!0),W(a.b,"ML"))):a.F(b+" ready to load")}else a.F('Error loading file "'+b+'" ('+d+")")}
e.Za=function(a,b){void 0!==b&&(a&1?nb(this):this.c&&!this.h&&nb(this))};e.$a=function(){};function nb(a){if(void 0!==a.c){a.g=-1;if(a.h<a.c.length){var b=a.c.charCodeAt(a.h++)&255;a.i&&10==b&&(b=13);a.g=b}else a.c="",a.h=0,a.f==lb&&a.b&&W(a.b," \nRUN\n"),a.f=kb;for(b=a.m+0;b<a.o;b+=2)a.a[b]=0<=a.g?ob:pb;for(b=a.m+1;b<a.o;b+=2)a.a[b]=0<=a.g?a.g:0}}var pb=0,ob=1,kb=0,lb=1,jb=2;y(function(){for(var a=I(document,"c1pjs","serial"),b=0;b<a.length;b++){var c=a[b],d=J(c);d=new ib(d);H(d,c)}});
function qb(a){F.call(this,"C1PDiskController",a);this.u.I=!1;this.reset(!0)}p(qb,F);e=qb.prototype;e.reset=function(a){rb(this);this.b=-1;a&&(this.c=[],this.c[0]={ee:0,Da:40,eb:!0,ha:20,$:0,ga:-1,pa:[]})};
function rb(a){a.s={C:64,read:function(){},update:function(a){return function(b){void 0!==b&&(this.C=b);a.i.C&4||X(a,0,this)}}(a)};a.f={C:255,read:function(){this.update()},update:function(a){return function(b){void 0===b?b=a.f.C:sb(a,b,a.h.C);b=(b|190)&-2;if(0<=a.b&&a.c[a.b].pa.length){var c=a.c[a.b];c.eb&&(b&=-33);c.$||(b&=-3);10>=--c.ha&&(0<c.ha?(b&=-129,tb(a)):(c.ha=100,0<=a.b&&(a.c[a.b].ga=0,ub(a))))}this.C=b;a.i.C&4&&X(a,0,this)}}(a)};a.i={C:0,read:function(){},update:function(a){return function(b){void 0!==
b&&(this.C=b&-193);X(a,1,this);a.f.update();a.s.update()}}(a)};a.v={C:255,read:function(){},update:function(a){return function(b){void 0!==b&&(this.C=b);a.j.C&4||X(a,2,this)}}(a)};a.h={C:255,read:function(){},update:function(a){return function(b){void 0===b?b=a.h.C:sb(a,a.f.C,b);if(0<=a.b&&a.b<a.c.length){var c=a.c[a.b];c.pa.length&&a.h.C&8&&!(b&8)&&(b&4?c.$--:c.$++,c.$>=c.Da&&(c.$=c.Da),0>c.$&&(c.$=0),c.ha=20,a.f.update(a.f.C|128),tb(a))}this.C=b;a.j.C&4&&X(a,2,this)}}(a)};a.j={C:0,read:function(){},
update:function(a){return function(b){void 0!==b&&(this.C=b&-193);X(a,3,this);a.h.update();a.v.update()}}(a)};a.w={C:0,read:function(){},update:function(a){return function(b){void 0!==b&&(3==(b&3)&&(a.g.C=14),this.C=b);a.g.update()}}(a)};a.g={C:14,read:function(){},update:function(a){return function(b){void 0===b&&(b=a.g.C);b&=-2;0<=a.b&&0<=a.c[a.b].ga&&(b|=1);this.C=b;X(a,16,this)}}(a)};a.o={C:0,read:function(a){return function(){ub(a)}}(a),update:function(a){return function(b){void 0!==b&&(this.C=
b);X(a,17,this)}}(a)};a.B={C:0,read:function(){},update:function(){return function(){}}(a)}}e.L=function(a,b,c){switch(b){case "listDisk":return this.A[b]=c,!0;case "loadDisk":return this.A[b]=c,c.onclick=function(a){return function(){if(a.A.listDisk){var b=a.A.listDisk.value,c=b;".json"!=b.substr(b.length-5)&&(c="http://"+window.location.host+"/api/v1/dump?disk="+b);a.F("loading  "+na(b)+"...");w(c,function(b,c,d){vb(a,b,c,d)})}}}(this),!0}return!1};
e.X=function(a,b,c,d){this.a=a;this.m=b;if(this.G=d)Na(d,b,c,this,this.Wa),P(d,b,c,this,this.Xa);this.R()};e.Z=function(a){a&&!this.u.I&&(this.u.I=!0)};
function vb(a,b,c,d){if(d)a.F("disk load error ("+d+")");else{d=[];a.F("mounting "+b+"...");try{if(d=eval("("+c+")"),d.length)if(d[0].length){var f=d[0];if(void 0===f[0].trackNum)a.F("data error: "+f[0]);else if(a.c[0]){for(c=0;c<f.length;c++){var g,h=f[c],k=h.sectors;if(void 0===(g=h.trackNum)||void 0===k)throw Error("track "+c+" missing data");g!=c&&C("track "+g+" out of order (expected "+c+")");d=[];var l;if(g){wb(d,h,"trackSig");xb(d,h);Y(d,h,"trackType");for(var n=0;n<k.length;n++){var m=k[n];
var q=m.sectorData;Y(d,m,"sectorSig");Y(d,m,"sectorNum");Y(d,m,"sectorPages");for(l=0;l<q.length;l++)d.push(q[l]);wb(d,m,"sectorEndSig")}}else for(m=k[0],q=m.sectorData,Y(d,h,"trackLoad",2),Y(d,m,"sectorPages"),l=0;l<q.length;l++)d.push(q[l]);f[g].Ua=d}a.c[0].pa=f;a.F("mount of "+b+" complete")}else a.F("no available drives")}else a.F("no tracks: "+b);else a.F("no data: "+b)}catch(U){a.F("disk data error: "+U.message)}}}
function xb(a,b){b=b.trackNum;if(void 0===b)throw Error("missing bcd value: trackNum");a.push(Math.floor(b/10)<<4|b%10)}function Y(a,b,c,d){b=b[c];if(void 0===b)throw Error("missing binary value: "+c);2==d&&a.push(b>>8&255);a.push(b&255)}function wb(a,b,c){b=b[c];if(void 0===b)throw Error("missing signature: "+c);for(c=0;c<b.length;c++)a.push(b.charCodeAt(c))}
function yb(a,b,c){b&=63;16>b?b&=3:32>b&&(b&=17);switch(b){case 0:a=a.i.C&4?a.f:a.s;break;case 1:a=a.i;break;case 2:a=a.j.C&4?a.h:a.v;break;case 3:a=a.j;break;case 16:a=c?a.w:a.g;break;case 17:a=a.o;break;default:a=a.B}return a}e.Wa=function(a,b){void 0!==b&&yb(this,a-this.m,!1).read()};e.Xa=function(a,b){void 0!==b&&yb(this,a-this.m,!0).update(this.G.a[a])};function sb(a,b,c){var d=-1;void 0!==b&&void 0!==c&&(d=0,c&32||(d|=2),a.f.C&64||(d|=1));a.b!=d&&(a.b=d,a.g.update())}
function tb(a){0<=a.b&&(a.c[a.b].ga=-1,a.o.update(255),a.g.update())}function ub(a){if(0<=a.b){var b=a.c[a.b];var c=b.pa[b.$];void 0!==c&&(0<=b.ga&&b.ga<c.Ua.length?(b.ha=100,b=c.Ua[b.ga++],a.o.update(b),a.g.update()):(b.ha=10,tb(a)))}}function X(a,b,c){a.G.a[b+a.m]=c.C}y(function(){for(var a=I(document,"c1pjs","disk"),b=0;b<a.length;b++){var c=a[b],d=J(c);d=new qb(d);H(d,c)}});function Z(a,b){F.call(this,"C1PComputer",a);this.P=b}p(Z,F);
Z.prototype.reset=function(a){var b=null,c;for(c in this.P)for(var d=0;d<this.P[c].length;d++){var f=this.P[c][d];f&&f.reset&&(f.reset(),"cpu"==c&&(b=f))}b&&(b.update(),a&&Ka(b))};Z.prototype.start=function(){for(var a in this.P)if("cpu"!=a)for(var b=0;b<this.P[a].length;b++){var c=this.P[a][b];c&&c.start&&c.start()}};Z.prototype.stop=function(a,b){for(var c in this.P)if("cpu"!=c)for(var d=0;d<this.P[c].length;d++){var f=this.P[c][d];f&&f.stop&&f.stop(a,b)}};
Z.prototype.L=function(a,b,c){switch(b){case "reset":return this.A[b]=c,c.onclick=function(a){return function(){a.reset()}}(this),!0}return!1};function N(a,b){return a.P[b]?a.P[b][0]:null}function zb(a){var b=null,c;for(c in a.P)for(var d=0;d<a.P[c].length;d++){var f=a.P[c][d];if(f){if(!Ea(f)){Ea(f,function(a){return function(){zb(a)}}(a));return}"cpu"==c?b=f:f.Z&&f.Z(!0,a)}}a.R();a.F("C1Pjs v1.40.0\nCopyright \u00a9 2012-2017 Jeff Parsons <Jeff@pcjs.org>");b&&b.Z(!0,a)}
y(function(){for(var a=I(document,"c1pjs","computer"),b=0;b<a.length;b++){for(var c=a[b],d=J(c),f,g={},h,k=0,l=0,n=0;n<d.modules.length;n++){var m=d.modules[n];if(!n){if("cpu"!=m.type)break;k=m.start;l=m.end;h=Array(l+1-k);for(f=k;f<h.length;f++)h[f]=0}if(f=K(m.refID,d.id)){var q=m.type;void 0===g[q]&&(g[q]=[]);g[q].push(f);f.X&&void 0!==m.start&&f.X(h,m.start,m.end,g.cpu[0])}else{C('no component for <module refid="'+m.refID+'">');return}}if(!h){C('<module type="cpu"> definition must appear first in the <computer> specification');
break}if(f=K("debugger",d.id))g["debugger"]=[f],f.X&&f.X(h,k,l,g.cpu[0]);k=new Z(d,g);if(l=K("panel",d.id))if(g.panel=[l],l.A.print){f=void 0;d=d.id;g=[];d&&(d=0<(f=d.indexOf("."))?d.substr(0,f+1):"");for(f=0;f<G.length;f++)n=G[f],d&&n.id.indexOf(d)||g.push(n);d=g;for(g=0;g<d.length;g++)f=d[g],f!=l&&(f.ra=l.ra,f.print=l.print,f.F=l.F)}H(k,c);zb(k)}});var Ab=0;
function Bb(a,b,c,d,f,g){f("Loading "+a+"...");w(a,function(h,k,l){l?(k||(k="unable to load "+a+" ("+l+")"),g(k,null)):Cb(k,a,b,c,d,f,g)})}
function Cb(a,b,c,d,f,g,h){function k(a,g){if(g)h(g,null);else{c&&(M[c]&&b&&(M[c][b]=a),(g=b)&&0>g.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(g=window.location.pathname+g),d?"}"==d.slice(-1)?(d=d.slice(0,-1),1<d.length&&(d+=",")):d='{state:"'+d+'",':d="{",d+='url:"'+g+'"}',"object"==typeof resources&&(g=null),d=d.replace(/\$/g,"$$$$"),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(d?" parms='"+d+"'":"")+(g?' url="'+g+'"':"")));f||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,
"$1C1Pjs$2"),a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1c1pjs$2"));g=null;if("<"==a.charAt(0))try{f||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(g=new window.ActiveXObject("Microsoft.XMLDOM"),g.async=!1,g.loadXML(a)):g=(new window.DOMParser).parseFromString(a,"text/xml")}catch(m){g=null,a=m.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);h(a,g)}}a?f?Db(a,g,k):k(a,null):h("no data"+(b?" for file: "+
b:""),null)}
function Db(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var f=d[2];b("Loading "+f+"...");w(f,function(g,h,k){if(k||!h)c(a,"unable to resolve XML reference: "+d[0]+" ("+k+")");else{if(g=d[3])if(k=h.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var l=k[0],n,m=/( [a-z]+=)(['"])(.*?)\2/gi;n=m.exec(g);)l=0>l.toLowerCase().indexOf(n[1].toLowerCase())?l.replace(">",n[0]+">"):l.replace(new RegExp(n[1]+"(['\"])(.*?)\\1"),n[0]);k[0]!=l&&(h=h.replace(k[0],l))}else{c(a,"missing <"+d[1]+"> in "+
f);return}h=h.replace(/<\?xml[^>]*>[\r\n]*/,"");a=a.replace(d[0],h);Db(a,b,c)}})}else c(a,null)}
function Eb(a,b,c){function d(a){if(void 0===h){var b=g&&I(g,"machine-warning");h=b&&b[0]||g}h&&(h.innerHTML=pa(a))}function f(a){d("Error: "+a);k&&(--Ab||D(!0));k=!1}var g,h,k=!0;Ab++;M[a]={};try{if(g=document.getElementById(a)){var l;if("object"==typeof resources&&(l=resources.css)){var n=document.head||document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css";m.styleSheet?m.styleSheet.cssText=l:m.appendChild(document.createTextNode(l));n.appendChild(m)}c||(c=
"/versions/c1pjs/1.40.0/components.xsl");l=function(h,l){l?Bb(c,null,null,!1,d,function(h,k){k?(M[a]&&c&&(M[a][c]=h),d("Processing "+b+"..."),window.ActiveXObject||"ActiveXObject"in window?(k=l.transformNode(k))?(g.outerHTML=k,--Ab||D(!0)):f("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(h=new XSLTProcessor,h.importStylesheet(k),(k=h.transformToFragment(l,document))?g.parentNode?(g.parentNode.replaceChild(k,g),--Ab||D(!0)):f("invalid machine element: "+
a):f("transformToFragment failed")):f("unable to transform XML: unsupported browser")):f(h)}):f(h)};"<"!=b.charAt(0)?Bb(b,a,void 0,!0,d,l):Cb(b,null,a,void 0,!1,d,l)}else f("missing machine element: "+a)}catch(q){f(q.message)}return k}window.embedC1P=function(a,b,c){D(!1);return Eb(a,b,c)};
window.commandMachine=function(a,b,c,d,f,g){if("script"==f){d=!1;c+=".machine";if(!g)delete L[c],d=!0;else if("string"==typeof g&&!L[c]){d=!0;f=L;for(var h=c,k=g.length,l=[],n=[],m="",q=null,U=0;U<k;U++){var r=g[U];if('"'==r||"'"==r)q&&r!=q?m+=r:(q?q=null:q=r,m&&(n.push(m),m=""));else{if(!q){if("\r"==r||"\n"==r)r=";";if(" "==r||"\t"==r||";"==r){m&&(n.push(m),m="");";"==r&&n.length&&(l.push(n),n=[]);continue}}m+=r}}m&&n.push(m);n.length&&l.push(n);f[h]=l;ya(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(h=xa(d,c+".machine"))&&(k=h.exports)&&(k=k[f]))return k.call(h,g)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+f+"','"+g+"')");return!1};window.enableEvents=D;window.sendEvent=ua;})();//# sourceMappingURL=/versions/c1pjs/1.40.0/c1p.map
